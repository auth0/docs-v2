---
title: Secure Human-in-the-Loop Approvals
description: Learn how Auth for GenAI enables AI agents to asynchronously authorize users.
sidebarTitle: Secure HITL Approvals
tocs: true
---
import UsingAI from "/snippets/common/using-ai.mdx";

{/* `GettingStartedTocs` requires `CustomTocs` to be imported */}
import { CustomTocs } from "/snippets/common/tocs.mdx";
import { GettingStartedTocs } from "/snippets/common/getting-started-tocs.mdx";

{/* `Prerequisites` requires `AccountAndAppSteps` to be imported */}
import { AccountAndAppSteps } from "/snippets/get-started/prerequisites/account-app-steps.jsx";
import { Prerequisites } from "/snippets/get-started/prerequisites/call-your-api.jsx";

import LangChainAsyncAuth from "/snippets/get-started/langchain-next-js/async-auth.mdx";
import LangChainFastAPIAsyncAuth from "/snippets/get-started/langchain-fastapi-py/async-auth.mdx";

Auth for GenAI enables AI agents to asynchronously authorize users using the [Client-Initiated Backchannel Authentication Flow (CIBA)](https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow). AI agents can work in the background, only notifying the user when needed for critical actions.

When you add secure [human-in-the-loop approvals](https://sdk.vercel.ai/cookbook/next/human-in-the-loop) to your AI agent workflows, you can use Auth0 to request the user's permission to complete an authorization request. The AI agent can render [rich authorization data](https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow/user-authorization-with-ciba) in the consent prompt so the user knows exactly what they're authorizing.

By the end of this quickstart, you should have an AI agent integrated with the [Auth0 AI SDK](https://github.com/auth0-lab/auth0-ai-js) that can request to buy products from an online shop on the user's behalf.

<Card
  title="What youâ€™ll learn"
>
- **Async Authorization**: Use CIBA to let AI agents get user consent securely in the background.
- **User Approvals**: Add Auth0 AI SDK for clear, human-in-the-loop authorization.
</Card>

<Prerequisites />

<Tabs>
  <Tab
    title="Next.js"
    icon="https://mintlify-assets.b-cdn.net/auth0/langchain.svg"
  >
    <UsingAI
      repository={<a href="https://github.com/auth0-samples/auth0-ai-samples.git" target="_blank" rel="noreferrer" className="link">auth0-samples/auth0-ai-samples</a>}
      folderPath={"async-authorization/langchain-next-js"}
      />
    <LangChainAsyncAuth />
  </Tab>
  <Tab
    title="FastAPI"
    icon="https://mintlify-assets.b-cdn.net/auth0/langchain.svg"
  >
    <UsingAI
      repository={<a href="https://github.com/auth0-samples/auth0-ai-samples.git" target="_blank" rel="noreferrer" className="link">auth0-samples/auth0-ai-samples</a>}
      folderPath={"async-authorization/langchain-fastapi-py"}
      />
    <LangChainFastAPIAsyncAuth />
  </Tab>
</Tabs>

<Panel>
  <GettingStartedTocs
    sections={[
      {
        title: "SDKs",
        links: [
          { label: "Auth0-AI / LangChain / JS", href: "https://www.npmjs.com/package/@auth0/ai-langchain" },
          { label: "Auth0-AI / LangChain / Python", href: "https://github.com/auth0-lab/auth0-ai-python/tree/main/packages/auth0-ai-langchain" },
          { label: "NextJS-Auth0", href: "https://github.com/auth0/nextjs-auth0" }
        ]
      },
      {
        title: "GitHub Samples",
        links: [
          { label: "LangChain + NextJS", href: "https://github.com/auth0-samples/auth0-ai-samples/tree/main/async-authorization/langchain-next-js" },
          { label: "LangChain + FastAPI", href: "https://github.com/auth0-samples/auth0-ai-samples/tree/main/async-authorization/langchain-fastapi-py" }
        ]
      },
      {
        title: "Learn more",
        links: [
          { label: "User Authorization with CIBA", href: "https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow/user-authorization-with-ciba" },
          { label: "CIBA Flow", href: "https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow" },
          { label: "Configure RAR", href: "https://auth0.com/docs/get-started/apis/configure-rich-authorization-requests" },
          { label: "Auth0 Guardian Android SDK", href: "https://auth0.com/docs/secure/multi-factor-authentication/auth0-guardian/guardian-for-android-sdk" },
          { label: "Auth0 Guardian iOS SDK", href: "https://auth0.com/docs/secure/multi-factor-authentication/auth0-guardian/guardian-for-ios-sdk" }
        ]
      }
    ]}
  />
</Panel>
