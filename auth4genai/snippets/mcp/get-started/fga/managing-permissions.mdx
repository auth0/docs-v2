The sample application includes helper scripts in the `fga/` directory to make permission management easier. These scripts use the FGA CLI to add or remove authorization tuples dynamically.

### Available Scripts

<AccordionGroup>
  <Accordion title="Add User to Group">
    Grant a user all permissions associated with a group (and its assigned role).

    **Usage**:
    ```shell
    ./fga/add-user-to-group.sh <user-email> <group-name>
    ```

    **Examples**:
    ```shell
    # Add user to managers group (grants admin role with full access)
    ./fga/add-user-to-group.sh user@example.com managers

    # Add user to marketing group (grants content_editor role)
    ./fga/add-user-to-group.sh user@example.com marketing
    ```

    **What it does**: Creates an FGA tuple that makes the user a member of the specified group. Since groups are assigned to roles, the user automatically inherits all role permissions.

    **Available groups**:
    - `managers` - Assigned to `admin` role (all tools + private documents)
    - `marketing` - Assigned to `content_editor` role (all tools, public documents only)
  </Accordion>

  <Accordion title="Remove User from Group">
    Revoke a user's group membership and all associated permissions.

    **Usage**:
    ```shell
    ./fga/remove-user-from-group.sh <user-email> <group-name>
    ```

    **Example**:
    ```shell
    # Remove user from managers group
    ./fga/remove-user-from-group.sh user@example.com managers
    ```

    **What it does**: Deletes the FGA tuple that grants group membership. The user immediately loses all permissions from that group's role.
  </Accordion>

  <Accordion title="Grant Temporal Access">
    Provide time-limited access to a specific tool that automatically expires.

    **Usage**:
    ```shell
    ./fga/add-temporal-access.sh <user-email> <tool-name> <duration>
    ```

    **Examples**:
    ```shell
    # Grant 20-second access to the greet tool
    ./fga/add-temporal-access.sh user@example.com greet 20s

    # Grant 1-hour access to the whoami tool
    ./fga/add-temporal-access.sh user@example.com whoami 1h

    # Grant 5-minute access
    ./fga/add-temporal-access.sh user@example.com greet 5m
    ```

    **What it does**: Creates an FGA tuple with a temporal condition. FGA evaluates the condition on each request and automatically denies access when the duration expires. No cleanup is needed.

    **Supported durations**: Use standard time notation (`s` for seconds, `m` for minutes, `h` for hours).

    **Available tools**: `greet`, `whoami`, `get_documents`

    <Note>
    Public tools like `get_datetime` don't need temporal access grants since they're already accessible to all authenticated users.
    </Note>
  </Accordion>

  <Accordion title="Reset Tuples">
    Reset all tuples to the initial state defined in `fga/tuples.yaml`.

    **Usage**:
    ```shell
    ./fga/reset-tuples.sh
    ```

    **What it does**: Deletes all existing tuples and reimports the default tuples from `fga/tuples.yaml`. Useful for returning to a clean state during testing.

    <Warning>
    This script removes all user assignments, including any custom permissions you've added. Use with caution.
    </Warning>
  </Accordion>
</AccordionGroup>

### Testing Permission Changes

After running any of these scripts, you'll need to reconnect in your MCP client (like MCP Inspector) to see the updated tool list. The server queries FGA on each connection to determine available tools.

<Tip>
You can also manage tuples directly in the [Auth0 FGA Dashboard](https://dashboard.fga.dev) if you're using Auth0 FGA. The dashboard provides a visual interface for viewing, adding, and removing authorization tuples in real-time.
</Tip>
