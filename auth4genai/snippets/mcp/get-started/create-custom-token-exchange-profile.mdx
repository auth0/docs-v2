To enable Custom Token Exchange, you need to create a Token Exchange Profile that links your Custom Token Exchange Action to a unique subject token type identifier.

<AccordionGroup>
  <Accordion title="1. Get Your Action ID">
    You need the ID of the Custom Token Exchange Action you deployed earlier.

    Run the following command to list all actions in your tenant:

    ```shell
    auth0 actions list
    ```

    From the output, find the action that matches the name you used when creating your Custom Token Exchange Action. Copy the Action ID (it starts with `act_`).

    Example output:
    ```
    ID                          NAME                                     TYPE
    act_aBc123XyZ456            On-behalf-of token exchange             custom-token-exchange
    ```

    Save this Action ID - you'll use it in the next step.
  </Accordion>

  <Accordion title="2. Create the Token Exchange Profile">
    Now use the Auth0 CLI to create your Custom Token Exchange Profile.

    Replace the placeholder values in the command below:
    - `<your-action-id>` - The Action ID from Step 1
    - `<YOUR_PROFILE_NAME>` - A descriptive name for your profile (e.g., `MCP Custom Token Exchange`)

    ```shell wrap lines
    auth0 token-exchange create \
      --name "<YOUR_PROFILE_NAME>" \
      --subject-token-type "urn:fastmcp:mcp" \
      --action-id "<your-action-id>" \
      --type "custom_authentication"
    ```

    <Info>
    The `subject_token_type` must be a unique URI identifier. In this example, we use `urn:fastmcp:mcp` which is specific to FastMCP implementations. You cannot use reserved namespaces like `urn:auth0`, `urn:okta`, or `urn:ietf`.
    </Info>

    A successful response will return the profile details including the profile ID and creation timestamp.

    For more information on managing token exchange profiles, see [Custom Token Exchange documentation](https://auth0.com/docs/authenticate/custom-token-exchange#manage-custom-token-exchange-profile).
  </Accordion>
</AccordionGroup>
