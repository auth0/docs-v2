---
title: "Syntaxe de demande de recherche journal"
permalink: "log-search-query-syntax"
'description': "Décrit la syntaxe de requête de recherche utilisant un sous-ensemble de syntaxe de requête Lucene pour affiner les recherches de journaux Auth0."
'og:title': "Syntaxe de demande de recherche journal"
'og:description': "Décrit la syntaxe de requête de recherche utilisant un sous-ensemble de syntaxe de requête Lucene pour affiner les recherches de journaux Auth0."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Syntaxe de demande de recherche journal"
'twitter:description': "Décrit la syntaxe de requête de recherche utilisant un sous-ensemble de syntaxe de requête Lucene pour affiner les recherches de journaux Auth0."
---

Lors de la recherche de journaux, vous pouvez créer des requêtes en utilisant un sous-ensemble de [syntaxe de requête Lucene](http://www.lucenetutorial.com/lucene-query-syntax.html) pour affiner votre recherche.

La chaîne de requête est analysée en séries de termes et d’opérateurs :

* Un terme peut être un mot unique tel que `jane` ou `smith`.
* Un terme peut être une phrase entourée de guillemets (`"customer log"`), qui correspondra à tous les mots de la phrase dans le même ordre.
* Un terme sans nom de champ ne correspondra qu’à ces champs sélectionnés.
* Plusieurs termes peuvent être regroupés entre parenthèses pour former des sous-requêtes.
* Tous les champs de recherche sont sensibles aux majuscules/minuscules.
* Les opérateurs ( `AND`,  `OR`,  `NOT`) fonctionnent sur tous les champs de recherche.

## Champs pouvant être recherchés

Les champs suivants peuvent être recherchés et sont sensibles aux majuscules/minuscules :

<table class="table"><thead>
<tr>
<th><strong>Champ</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>`client_id`</td>
<td>ID client associé à l’événement.</td>
</tr>
<tr>
<td>`client_name`</td>
<td>Nom du client lié à l’événement.</td>
</tr>
<tr>
<td>`connection`</td>
<td>Nom de connexion lié à l’événement.</td>
</tr>
<tr>
<td>`connection_id`</td>
<td>Identifiant de connexion lié à l’événement.</td>
</tr>
<tr>
<td>`description`</td>
<td>Description de l’événement.</td>
</tr>
<tr>
<td>`date`</td>
<td>Date à laquelle l’événement s’est produit au format AAAA-MM-JJ.</td>
</tr>
<tr>
<td>`hostname`</td>
<td>Le nom d’hôte utilisé pour le flux d’authentification.</td>
</tr>
<tr>
<td>`ip`</td>
<td>Adresse IP d’où provient la demande à l’origine de l’entrée du journal.</td>
</tr>
<tr>
<td>`log_id`</td>
<td>Identifiant du journal de l’événement.</td>
</tr>
<tr>
<td>`organization_id`</td>
<td>Identifiant de l’organization lié à l’événement.</td>
</tr>
<tr>
<td>`connection_id`</td>
<td>Identifiant de l’utilisateur lié à l’événement.</td>
</tr>
<tr>
<td>`user_name`</td>
<td>Nom d’utilisateur lié à l’événement.</td>
</tr>
<tr>
<td>`user_agent`</td>
<td>Agent utilisateur lié à l’événement.</td>
</tr>
<tr>
<td>`Strategy`</td>
<td>Stratégie de connexion liée à l’événement.</td>
</tr>
<tr>
<td>`strategy_type`</td>
<td>Type de stratégie de connexion liée à l’événement.</td>
</tr>
<tr>
<td>`type`</td>
<td>Type de l’événement.</td>
</tr>
</tbody>
</table>

## Champs pouvant être recherchés avec des termes nus

Si un terme de recherche est saisi sans nom de champ, la recherche ne portera que sur les champs suivants :

* `client_name`
* `connection`
* `description`
* `ip`
* `log_id`
* `type` :
* `user_name`

## Correspondance exacte

Pour trouver des correspondances exactes, utilisez des guillemets doubles : `description:"Username invalid"`.

Par exemple, pour trouver les journaux dont la description est `Username invalid`, utilisez `q=description:"Username invalid"`.

## Caractères générique

Les recherches par caractères génériques peuvent être effectuées sur des termes en utilisant le caractère astérisque (`*`) pour remplacer zéro ou plusieurs caractères : `user_name:john*`. Ils peuvent être utilisés pour la recherche de préfixes, par exemple `user_name:j*` Pour les autres utilisations des caractères génériques (par ex., la correspondance de suffixes), les littéraux doivent comporter 3 caractères ou plus. Par exemple, `name:*usa` est autorisé, mais `name:*sa` ne l’est pas.

Le point d’interrogation (`?`) n’est pas pris en charge.

Par exemple, pour trouver tous les journaux des utilisateurs dont le nom commence par `john`, utilisez `q=user_name:john*`.

## Plages

Vous pouvez utiliser des plages dans vos requêtes de recherche de journaux. Pour les intervalles inclusifs, utilisez des crochets : `[min TO max]`, et pour les plages exclusives, utilisez des crochets : `{min TO max}`.

Les accolades et les crochets peuvent être combinés avec la même expression de plage. Vous pouvez également utiliser les recherches génériques au sein des plages.

Par exemple, pour trouver tous les journaux du 18 décembre 2018 à aujourd’hui, utilisez `q=date:[2018-12-18 TO *]`.

Si vous souhaitez rechercher des journaux depuis le début de votre période de conservation jusqu’au 19 décembre 2018 inclus, utilisez `q=date:[* TO 2018-12-19}`.

## Exemples de requêtes

Ci-dessous se trouvent des exemples de types de requêtes que vous pouvez effectuer avec <Tooltip href="/docs/fr-ca/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip>.

<table class="table"><thead>
<tr>
<th>Cas d’utilisation</th>
<th>Requête</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rechercher tous les journaux avec des connexions contenant "Pass"</td>
<td>`connection:*pass*`</td>
</tr>
<tr>
<td>Rechercher tous les journaux avec un nom d’utilisateur contenant "fred"</td>
<td>`user_name:*fred*`</td>
</tr>
<tr>
<td>Rechercher tous les journaux avec des ID utilisateur correspondant exactement à "123"</td>
<td>`user_ID:"123"`</td>
</tr>
<tr>
<td>Rechercher tous les journaux dont le type commence par "s"</td>
<td>`type:s*`</td>
</tr>
<tr>
<td>Rechercher les noms d’utilisateur qui commencent par "jane" et se terminent par "smith"</td>
<td>`user_name:jane*smith`</td>
</tr>
<tr>
<td>Rechercher tous les journaux en décembre 2018</td>
<td>`date:[2018-12 TO 2019-01-01}`</td>
</tr>
<tr>
<td>Rechercher tous les journaux à partir du 10 décembre 2018</td>
<td>`date:[2018-12-10 TO *]`</td>
</tr>
<tr>
<td>Rechercher tous les journaux du 1er janvier 2019 à 1 h, jusqu’au 1er janvier 2019 à 12:23:45</td>
<td>`date:[2019-01-01T01:00:00 TO 2019-01-01T12:23:45}`</td>
</tr>
</tbody>
</table>

## Limites

* Si vous obtenez l’erreur `414 Request-URI Too Large`, cela signifie que votre chaîne de requête est plus longue que la longueur prise en charge. Dans ce cas, affinez votre recherche.
* Les champs du journal ne sont pas symbolisés, donc `description:rule` ne correspondra pas à une description avec la valeur `Create a rule` ou `Update a rule`. Utilisez plutôt `description:*rule`. Voir les recherches génériques et leurs correspondances exactes.
* L’extension de champ `.raw` n’est pas prise en charge. Les champs correspondent à l’intégralité de la valeur fournie et ne sont pas transformés en jetons.

## Pagination

Lors de l’appel des points de terminaison `GET /api/v2/logs` ou `GET /api/v2/users/{user_id}/logs` en utilisant le paramètre `include_totals`, le résultat est un objet JSON contenant un résumé des résultats et des journaux demandés. L’objet JSON ressemble à ceci :

```javascript lines
{
  "length": 5,
  "limit": 5,
  "logs": [...],
  "start": 0,
  "total": 5
}
```

Lors de la recherche de journaux, le champ **totals** indique le nombre de journaux renvoyés dans la page (comme le champ **length**).

## En savoir plus

* [Afficher les événements de journal](/docs/fr-ca/deploy-monitor/logs/view-log-events)
* [Codes de type d’événements de journal](/docs/fr-ca/deploy-monitor/logs/log-event-type-codes)
* [Filtrer les événements du journal](/docs/fr-ca/deploy-monitor/logs/log-event-filters)
* [Migrer vers Tenant Log Search v3](/docs/fr-ca/troubleshoot/product-lifecycle/past-migrations/migrate-to-tenant-log-search-v3)