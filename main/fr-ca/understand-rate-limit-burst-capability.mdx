---
title: "Comprendre la capacité de limite anti-attaques"
permalink: "understand-rate-limit-burst-capability"
'description': "Décrit la capacité anti-attaques d’Auth0 et fournit des exemples de calculs de limite anti-attaques."
'og:title': "Comprendre la capacité de limite anti-attaques"
'og:description': "Décrit la capacité anti-attaques d’Auth0 et fournit des exemples de calculs de limite anti-attaques."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Comprendre la capacité de limite anti-attaques"
'twitter:description': "Décrit la capacité anti-attaques d’Auth0 et fournit des exemples de calculs de limite anti-attaques."
---

**Date d’entrée en vigueur** : 10 novembre 2021

Auth0 maintient des limites anti-attaques et des limites de charge subite pour ses API. Alors que la limite anti-attaques est la quantité maximale durable de trafic que le système peut gérer, la limite de charge subite est le volume maximal de trafic à court terme que le système peut gérer au cours d’un intervalle. Les limites anti-attaques et les limites de charge subite offrent une meilleure fonctionnalité pour le trafic dynamique de volume.

Les limites anti-attaques Auth0 incluent les appels effectués via les règles et sont définies par locataire plutôt que par point de terminaison.

## Limites de charge subite

Comme indiqué précédemment, la limite de charge subite est le volume maximal de trafic à court terme que le système peut gérer dans un intervalle. Chaque point de terminaison Auth0 est configuré avec un « bucket (réceptacle) » qui définit une limite de demande et une fenêtre de limite anti-attaques (par exemple, par seconde, par minute, par jour). Examinons un exemple de configuration de réceptacle de point de terminaison :

```yaml lines
bucket:
    size: x
    per_minute: y
```

Dans cet exemple, le réceptacle donné a une limite de demande maximale de **`x`** par minute. Pour chaque minute qui s’écoule, Auth0 ajoute des permissions pour **`y`** requêtes. En d’autres termes, toutes les **60/y** secondes, Auth0 ajoute une requête supplémentaire au réceptacle. Cette opération se produit automatiquement jusqu’à ce que le réceptacle contienne le nombre maximal de demandes autorisées (**x**).

## Cas d’utilisation réel

En gardant à l’esprit la façon dont un exemple de réceptacle de point de terminaison est configuré, examinons les limites de charge subite de <Tooltip href="/docs/fr-ca/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip> Auth0 par type d’abonnement :

<table class="table"><thead>
<tr>
<th>Type de locataire</th>
<th>Requêtes soutenues par seconde</th>
<th>Requêtes maximales par seconde</th>
<th>Rafales par minute (Pointe)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gratuit ou essai</td>
<td><strong>2</strong></td>
<td>10</td>
<td>120</td>
</tr>
<tr>
<td>Libre-service (Payant)</td>
<td><strong>16</strong></td>
<td>50</td>
<td>1000</td>
</tr>
<tr>
<td>Entreprise (Production)</td>
<td><strong>16</strong></td>
<td>50</td>
<td>1000</td>
</tr>
<tr>
<td>Entreprise (Non-production)</td>
<td><strong>&lt;1</strong></td>
<td>2</td>
<td>10</td>
</tr>
</tbody>
</table>

Dans ce tableau, nous voyons :

* **Requêtes soutenues par seconde** : La limite anti-attaques en requêtes par seconde sur une période de plusieurs minutes ou plus. Il s’agit de la limite la plus importante à prendre en compte dans le temps. Si votre application ne dépasse jamais cette limite, le trafic ne sera jamais limité. En cas de dépassement, le degré d’excès détermine la rapidité avec laquelle la limite de charge subite est atteinte.
* **Requêtes maximales par seconde** : Limite absolue du nombre de demandes par seconde que votre locataire peut traiter. Vous ne serez jamais autorisé à dépasser cette limite.
* **Charge subite par minute (Pic)** : La taille du réceptacle de la limite de demandes.

Si nous examinons les limites Entreprise, nous constatons ce qui suit :

Requêtes soutenues par seconde : 16
Demandes maximales par seconde : 50
Charge subite par minute (pic) : 1000

Dans cet exemple, le nombre de charge subite par minute (pic) est de 1000, ce qui signifie que la `size` du réceptacle (**x**) est de 1000 et que le taux `per_minute` (**y**) est également de 1000. Comme nous savons que pour chaque minute qui s’écoule, Auth0 ajoute des permissions pour **`y`** requêtes (**60/y**), nous calculons 60/1000 = 0.06, donc Auth0 ajoute une requête au réceptacle toutes les 0,06 secondes, ce qui signifie que 16,67 requêtes sont ajoutées au réceptacle chaque seconde (1/0,06 = 16,67).

Jusqu’à présent, nous avons appris ce qui suit :

* Une application Entreprise ne peut jamais faire plus de 50 requêtes par seconde (rps).
* Une application Entreprise dispose d’un réceptacle de 1000 requêtes qu’elle peut consommer à une vitesse maximale de 50 rps.
* Au fil du temps, une application Entreprise ne doit pas dépasser une moyenne de 16,67 rps.

Lorsque le taux de requêtes dépasse 16,67 requêtes par seconde, la limite de charge subite est atteinte et le réceptacle se « vide » plus rapidement. Mais à quelle vitesse le réceptacle sera-t-il vidé? Cela dépend du nombre de requêtes par seconde effectuées par votre application.
Supposons que votre application Entreprise effectue 30 requêtes par seconde et que vous souhaitiez savoir combien de temps cela peut durer avant que le trafic ne soit limité. Vous savez déjà que :

* le réceptacle de l’application Entreprise contient 1000 requêtes.
* Auth0 ajoute 16,67 requêtes au réceptacle chaque seconde (+16,67 rps).

Et vous savez que votre application supprime 30 requêtes du réceptacle chaque seconde (-30 rps). Le taux de vidage du réceptacle est donc le suivant : 16,67 + (-30) = -13,33. Ce nombre étant négatif, cela signifie que le réceptacle se vide à un rythme de 13,33 requêtes par seconde.

Pour déterminer dans combien de temps le réceptacle sera vidé, divisez le nombre de demandes dans le réceptacle (x, ou 1000) par le nombre de requêtes par seconde auquel le seau est vidé (13,33) : 1000 requêtes/13,33 requêtes par seconde = 75 secondes, donc le réceptacle sera vidé après 75 secondes de requêtes à un taux de 30 requêtes par seconde.

Si nous effectuons ce calcul pour différents taux de requêtes, nous apprenons que :

* à 16 rps, le réceptacle ne sera jamais vide,
* à 30 rps, le réceptacle sera vidé en ~75 secondes,
* à 50 rps, le réceptacle sera vidé en ~30 secondes.

Une fois que la limite de charge subite est atteinte et que le réceptacle est épuisé, la limite anti-attaques effective sera limitée à 16,67 requêtes par seconde jusqu’à ce que le trafic tombe en dessous de 16,67 rps pendant un certain temps.

Ainsi, dans cet exemple, l’application Entreprise pourrait effectuer 50 requêtes par seconde, mais ce faisant, elle épuiserait le nombre de requêtes dans son réceptacle en 30 secondes environ et serait alors limitée à environ 16 requêtes par seconde. Toutefois, si l’application répartit son trafic sur exactement 16 requêtes par seconde, la limite anti-attaques ne sera jamais atteinte.