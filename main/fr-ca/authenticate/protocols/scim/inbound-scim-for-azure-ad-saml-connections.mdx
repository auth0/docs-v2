---
title: "SCIM entrant pour les connexions SAML Entra ID"
permalink: "inbound-scim-for-azure-ad-saml-connections"
'description': "Marche à suivre pour l’établissement d’une connexion Entra via SAML SCIM"
'og:title': "SCIM entrant pour les connexions SAML Entra ID"
'og:description': "Marche à suivre pour l’établissement d’une connexion Entra via SAML SCIM"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "SCIM entrant pour les connexions SAML Entra ID"
'twitter:description': "Marche à suivre pour l’établissement d’une connexion Entra via SAML SCIM"
---

<Card title="Avant de commencer">

Pour utiliser cette fonction, votre plan Auth0 ou votre accord personnalisé doit inclure les connexions d’entreprise. Pour en savoir plus, lisez [Page de tarification d’Auth0](https://auth0.com/pricing).

[Postman](https://www.postman.com/downloads/) doit être installé sur une machine locale pour tester vos connexions SCIM entrantes.

</Card>

Cette section décrit comment configurer une application d’entreprise autre qu’une galerie dans Microsoft Entra ID, qui peut être utilisée pour fournir des utilisateurs à votre point de terminaison SCIM Auth0.

### Configurer les paramètres SCIM dans Auth0

1. Lancez l’ [Auth0 Dashboard](https://manage.auth0.com/#/), allez sur  **Authentification > Entreprise > SAML > [votre-connexion] > Paramètres.**
2. Parcourez **Authentification > Entreprise > SAML > [votre-connexion] > Fourniture** et désactivez **Synchroniser les attributs du profil utilisateur à chaque connexion** à moins que vous ne souhaitiez [synchroniser des attributs supplémentaires à la connexion](/docs/fr-ca/authenticate/protocols/scim/configure-inbound-scim).
3. Dans la même section, activez **Synchroniser les profils utilisateurs à l’aide du SCIM**.
4. Dans l’onglet **Mappage**, assurez-vous que l’**attribut SCIM contenant l’identifiant utilisateur** est réglé sur **userName**.
5. Passez à la zone **Mappages supplémentaires** et remplacez ceci :

```javascript lines
{
		"scim": "emails[primary eq true].value",
		"auth0": "email"
	   },
```

Par celà :

```javascript lines
{
		"scim": "emails[type eq \"work\"].value",
		"auth0": "email"
	   },
```

6. Consultez les autres **Mappages supplémentaires** pour vous assurer que les attributs SCIM étendus sont mappés avec vos attributs Auth0 préférés. Consultez [mappage des attributs](/docs/fr-ca/authenticate/protocols/scim/configure-inbound-scim#attribute-mapping) pour plus de détails.

7. Cliquez sur **Enregistrer les modifications**.

### Récupérer l’URL du point de terminaison SCIM et le jeton

La configuration du SCIM dans un locataire Entra ID nécessite un URL de point de terminaison SCIM et un jeton de Auth0. Ces valeurs peuvent être récupérées manuellement via l’<Tooltip href="/docs/fr-ca/glossary?term=auth0-dashboard" tip="Auth0 Dashboard
Principal produit d’Auth0 pour configurer vos services." cta="Voir le glossaire">Auth0 Dashboard</Tooltip> ou programmatiquement via <Tooltip href="/docs/fr-ca/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip>. Consultez la section [Instructions pour le déploiement](/docs/fr-ca/authenticate/protocols/scim/configure-inbound-scim#deployment-guidelines) pour les meilleures pratiques. En utilisant le tableau de bord :

1. Dans Auth0 Dashboard, naviguez jusqu’à l’onglet **Configuration** SCIM, puis copiez l’ **URL du point de terminaison SCIM** et collez-le dans un endroit sûr.
2. Générez un jeton SCIM en choisissant **Générer un nouveau jeton,** puis définissez une date d’expiration pour le jeton si vous le souhaitez.
3. Sélectionnez les permissions que vous souhaitez accorder à Microsoft Entra ID. Les permissions requises par défaut utilisées par Microsoft Entra ID sont `get:users`, `post:users`, `patch:users` et `delete:users`.

### Configurer SCIM dans Microsoft Entra ID pour les applications SAML

1. Si l’application SAML n’est pas encore enregistrée, enregistrez une application d’entreprise personnalisée **sans galerie** dans un locataire Microsoft Entra ID en [suivant les instructions ici](https://community.auth0.com/t/setting-up-azure-ad-as-saml-enterprise-connection/87829).
2. Accédez à l’onglet **Gérer > Propriétés**  et confirmez que **Attributions requise** est défini sur **Oui**.
3. Accédez à l’onglet **Gérer > Utilisateurs et groupes** et affectez les utilisateurs Microsoft Entra ID que vous souhaitez fournir. Lorsque vous assignez un groupe, les utilisateurs de ce groupe sont fournis.
4. Sélectionnez l’onglet **Gérer > Fourniture**, sélectionnez **Démarrer** et choisissez **Automatique** comme **Mode Fourniture.**
5. Choisissez **Authentifiants administrateur**, puis saisissez la valeur d’**URL du point de terminaison SCIM** que vous avez sauvegardée précédemment en tant que **URL locataire**. À la fin de l’URL, ajoutez le paramètre de requête `?aadOptscim062020` pour résoudre les [problèmes connus décrits ici.](https://learn.microsoft.com/en-us/azure/active-directory/app-provisioning/application-provisioning-config-problem-scim-compatibility)
6. Collez la valeur du jeton dans le champ **Jeton secret** et sélectionnez **Enregistrer**
7. Accédez à **Mappages** et sélectionnez **Fourniture des utilisateurs Microsoft Entra ID**, puis Accédez à **Mappages d’attributs** et sélectionnez la ligne contenant `emails[type eq "work"].value` et `mail`
8. Dans l’écran **Modifier l’attribut**  définissez **Match objects using this attribute (Associer les objets utilisant cet attribut)** à **Yes (Oui)**, puisdéfinissez **Matching precedence (Précédent de correspondance)** sur **2** et choisissez **OK.**

<Frame>![SAML Azure Attribute Mapping](/images/fr-ca/cdy7uua7fh8z/6JnGm4IeBglKiHNoVPX5vs/ddc17baeca48f02a6309b57ab87f845e/attributemap2.jpg)</Frame>

Choisissez **Enregistrer** pour enregistrer les mappages d’attributs, puis sélectionnez **X** dans le coin supérieur droit pour revenir à l’écran **Fourniture**.

#### Tests

1. Sur l’écran de présentation de l’application Enterprise, sélectionnez **Gérer > Fourniture** puis **Fourniture à la demande** pour tester la connexion SCIM.
2. Allez sur **Sélectionner un utilisateur ou un groupe** et saisissez le nom d’un utilisateur que vous avez assigné à l’application, puis sélectionnez l’utilisateur et choisissez **Fourniture**. Cela crée l’utilisateur dans le locataire Auth0.
3. Fournissez tous les utilisateurs assignés en [suivant les instructions ici](https://learn.microsoft.com/en-us/entra/identity/app-provisioning/configure-automatic-user-provisioning-portal#provisioning-status) pour définir l’**État de fourniture** sur **On**.