---
title: "Configurer OneLogin en tant que fournisseur d’identité SAML"
permalink: "configure-onelogin-as-saml-identity-provider"
'description': "Découvrez comment configurer OneLogin en tant que fournisseur d’identité SAML à utiliser avec Auth0."
'og:title': "Configurer OneLogin en tant que fournisseur d’identité SAML"
'og:description': "Découvrez comment configurer OneLogin en tant que fournisseur d’identité SAML à utiliser avec Auth0."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Configurer OneLogin en tant que fournisseur d’identité SAML"
'twitter:description': "Découvrez comment configurer OneLogin en tant que fournisseur d’identité SAML à utiliser avec Auth0."
---

Configurez OneLogin en tant que fournisseur d’identité <Tooltip href="/docs/fr-ca/glossary?term=security-assertion-markup-language" tip="Security Assertion Markup Language (SAML)
Protocole normalisé permettant à deux parties d’échanger des informations d’authentification sans mot de passe." cta="Voir le glossaire">SAML</Tooltip> en effectuant les étapes suivantes :

1. Configurer l’intégration SAML de OneLogin
2. Configurer la connexion SAML dans Auth0.
3. Tester la connexion.

## Conditions préalables

Vous devez avoir un compte développeur OneLogin.

## Configurer OneLogin

1. Connectez-vous au tableau de bord [OneLogin](https://www.onelogin.com/) et cliquez sur **Applications** > **Ajouter des applications**.
2. Recherchez **SAML**, et sélectionnez **Connecteur d’essai SAML (IdP w/attr)**.
3. Lorsque vous y êtes invité, modifiez le **Nom d’affichage** de votre application.
4. Cliquez sur **Enregistrer**.
5. Allez dans l’onglet **SSO** et copiez les valeurs de **Point de terminaison SAML 2.0 (HTTP)** et **Point de terminaison SLO (HTTP)**.
6. Cliquez sur le lien **Afficher les détails** dans le champ **Certificat X.509**.
7. Téléchargez le certificat X.509 **onelogin.pem**.

## Configurer la connexion Auth0

1. Allez sur [Dashboard > Authentification > Entreprise > SAMLP](https://manage.auth0.com/#) et cliquez sur l’icône **plus** pour être redirigé vers la page qui vous permet de créer une nouvelle connexion.
2. Vous serez invité à fournir les réglages de configuration appropriés pour cette connexion. Les seuls champs obligatoires sont :

<table class="table"><thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>URL de connexion</strong></td>
<td>La valeur du point de terminaison SAML 2.0 (HTTP) que vous avez notée lors de la configuration de votre application OneLogin.</td>
</tr>
<tr>
<td><strong>URL de déconnexion</strong></td>
<td>La valeur du point de terminaison SLO (HTTP) que vous avez notée lors de la configuration de votre application OneLogin.</td>
</tr>
<tr>
<td><strong>Certificats de signature X509</strong></td>
<td>Le certificat que vous avez téléchargé de Onelogin. Vous devrez télécharger le certificat directement sur Auth0.</td>
</tr>
</tbody>
</table>
3. Cliquez sur **Enregistrer** pour continuer.
4. Dans la fenêtre suivante, deux options s’offrent à vous.

   1. Si vous êtes un administrateur de domaine, vous pouvez cliquer sur **Continuer** pour obtenir des instructions supplémentaires sur la configuration du fournisseur d’identité SAML.
   2. Si ce n’est pas le cas, vous pouvez donner à votre administrateur de domaine l’URL fournie afin qu’il puisse terminer la configuration.

### Valeurs de configuration d’Auth0

Pour terminer la configuration de l’application SAML, l’administrateur aura besoin des informations suivantes concernant Auth0 :

* **URL Consommateur SAML**: `https://{yourDomain}/login/callback`
* **<Tooltip href="/docs/fr-ca/glossary?term=audience" tip="Audience
Identifiant unique de 'audience d’un jeton émis. Appelé aud dans un jeton, sa valeur contient l’identifiant soit d’une application (Client ID) pour un jeton d’ID, soit d’une API (API Identifier) pour un jeton d’accès." cta="Voir le glossaire">Audience</Tooltip> SAML** : `urn:auth0:{yourTenant}:yourConnectionName`

Copiez également les valeurs de **l’URL de renvoi** et d’**identifiant de l’entité** avant de retourner à l’onglet Configuration de votre application [OneLogin](https://www.onelogin.com/) :

<table class="table"><thead>
<tr>
<th>Auth0 value</th>
<th>Champ de configuration OneLogin</th>
</tr>
</thead>
<tbody>
<tr>
<td>URL de renvoi</td>
<td>URL ACS (Consommateur) et Destinataire</td>
</tr>
<tr>
<td>Entité ID</td>
<td>Audience</td>
</tr>
</tbody>
</table>

Fournissez également une expression régulière valide pour le **Validateur d’URL de l’ACS (Consommateur)**. Par exemple :

`[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)`

## Tester la connexion

Avant de tester votre connexion :

* Assurez-vous que vous disposez d’un utilisateur OneLogin que vous pouvez utiliser pour les essais. Si ce n’est pas le cas, allez dans l’onglet **Utilisateurs** du tableau de bord OneLogin et ajoutez-en un.
* Assurez-vous que votre nouvelle connexion Auth0 SAMLP a été associée à une application (sinon vous obtiendrez une erreur `invalid_request: the connection was disabled`).

A côté de votre connexion **SAML**, cliquez sur le bouton **Essayer**. Si tout se passe bien, vous serez redirigé vers une page vous informant que la connexion fonctionne.

## Authentification unique initiée par IdP

OneLogin offre à ses utilisateurs un portail/lanceur d’applications. Si vous souhaitez bénéficier de cette fonctionnalité, vous devrez modifier l’**URL Consommateur SAML** dans le tableau de bord OneLogin pour inclure le paramètre `connection` (par exemple, `https://{yourDomain}/login/callback?connection=onelogin-customer`). Veillez à remplacer `onelogin-customer` par le nom de votre connexion Auth0.

Enfin, veillez à activer la connexion initiée par l’<Tooltip href="/docs/fr-ca/glossary?term=idp" tip="Fournisseur d’identité (IdP)
Service de stockage et de gestion des identités numériques." cta="Voir le glossaire">IdP</Tooltip> pour la connexion et à choisir l’application vers laquelle l’utilisateur est redirigé une fois l’assertion SAML consommée. Pour en savoir plus, lisez [Configurer l’authentification unique initiée par le fournisseur d’identité](/docs/fr-ca/authenticate/protocols/saml/saml-sso-integrations/identity-provider-initiated-single-sign-on).

## Modifier les mappages de connexion

Si vous utilisez OneLogin et Auth0, les utilisateurs qui se connectent à l’aide de OneLogin et qui sont créés dans <Tooltip href="/docs/fr-ca/glossary?term=auth0-dashboard" tip="Auth0 Dashboard
Principal produit d’Auth0 pour configurer vos services." cta="Voir le glossaire">Auth0 Dashboard</Tooltip> ne disposeront pas de certaines informations de profil que vous souhaiteriez avoir.

Pour collecter des informations supplémentaires sur l’utilisateur, modifiez les paramètres appropriés dans le tableau de bord OneLogin, incluez les paramètres dans l’assertion SAML et créez les mappages dans la connexion Auth0.

### Attributs du profil utilisateur

Parfois, les attributs du profil utilisateur standard ne suffisent pas pour la fonctionnalité que vous souhaitez créer. Dans ce cas, vous pouvez utiliser des attributs personnalisés afin d’améliorer le jeton SAML. Prenons un exemple de base.

Le jeton SAML contient, entre autres, deux attributs : `FirstName` et `LastName`. Ajoutons un nouvel attribut personnalisé, nommé `FullName`, qui contiendra la concaténation du prénom et du nom.

1. Naviguez vers le tableau de bord OneLogin et modifiez votre application.
2. Sur l’onglet **Réglages**, cliquez sur **Ajouter un paramètre**.
3. Dans la fenêtre contextuelle, attribuez un nom à votre nouvel attribut personnalisé en utilisant la zone de texte **Nom du champ**. Veillez à cocher l’option **Inclure dans l’assertion SAML**. Cliquez sur **Enregistrer**.
4. Le nouvel attribut que vous avez créé s’affiche. Cliquez sur le champ **Valeur**, qui affiche actuellement `- No default -` .
5. Cliquez sur le menu déroulant **Valeur** et sélectionnez `- Macro -`.
6. Dans la zone de texte, définissez la valeur sur `{firstname} {lastname}`. Cliquez sur **Enregistrer**.
7. Testez nos changements. Retournez à [Auth0 Dashboard > Authentification > Entreprise > SAML](https://manage.auth0.com/#/connections/enterprise). Sur votre connexion **SAML**, cliquez sur le bouton **Essayer**. Le résultat devrait inclure le nouvel attribut `FullName`.

Vous pouvez trouver plus d’informations sur les macros d’attributs dans le [Centre d’aide OneLogin](https://support.onelogin.com/hc/en-us/articles/201174464-Attribute-macros).

### Ajouter un nouveau paramètre à l’assertion SAML

Pour les besoins de la démonstration, voyons comment nous pouvons ajouter l’information `EmailAddress` à notre connexion, laquelle est plus que la concaténation de deux champs que nous envoyons déjà.

1. Avant de pouvoir mapper l’adresse **EmailAddress** des utilisateurs, vous devez ajouter ce champ en tant que paramètre personnalisé au tableau de bord OneLogin. Définissez **Nom du champ** sur `EmailAddress` et **Valeur** sur `Email`.
2. Vous trouverez des détails sur les étapes nécessaires à la personnalisation du profil utilisateur dans la section ci-dessus.
3. Une fois les modifications effectuées, enregistrez-les et testez à nouveau votre connexion.
4. Vérifiez votre utilisateur Auth0, en vous assurant que l’information `EmailAddress` est maintenant incluse et que la valeur est correcte.

Vous êtes maintenant prêt à procéder au mappage des champs d’information de l’utilisateur dans Auth0.

1. Allez dans les **Réglages** de votre [SAML](https://manage.auth0.com/#/connections/enterprise) et naviguez jusqu’à l’onglet **Mappages**. Pour les adresses courriel, copiez la correspondance ci-dessous et collez-la dans la zone de texte.
2. Enregistrez vos modifications et essayez à nouveau de vous connecter. Une fois que vous avez réussi à vous connecter, allez sur [Dashboard > Gestion des utilisateurs > Utilisateurs](https://manage.auth0.com/#/users), et vérifiez votre connexion. Vous verrez des informations supplémentaires pour l’utilisateur approprié.