---
title: "PHPÂ : Connexion, dÃ©connexion et restitution des profils utilisateurs avec Auth0-PHP"
permalink: "auth0-php-basic-use"
'description': "IntÃ©grez une expÃ©rience de connexion et dâ€™inscription fluide pour vos applications PHP."
'og:title': "PHPÂ : Connexion, dÃ©connexion et restitution des profils utilisateurs avec Auth0-PHP"
'og:description': "IntÃ©grez une expÃ©rience de connexion et dâ€™inscription fluide pour vos applications PHP."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "PHPÂ : Connexion, dÃ©connexion et restitution des profils utilisateurs avec Auth0-PHP"
'twitter:description': "IntÃ©grez une expÃ©rience de connexion et dâ€™inscription fluide pour vos applications PHP."
---

La trousse SDK Auth0 pour PHP regroupe trois classes principalesÂ : `Auth0\SDK\Auth0`, `Auth0\SDK\API\Authentication` et `Auth0\SDK\API\Management`, chacune offrant des interfaces pour diffÃ©rentes fonctionnalitÃ©s des API dâ€™Auth0. Si vous crÃ©ez une application Web avec Ã©tat qui doit garder une trace des sessions des utilisateurs, la classe de base `Auth0` est celle avec laquelle vous travaillerez le plus. Elle fournit des mÃ©thodes permettant de gÃ©rer les tÃ¢ches courantes dâ€™authentification et de session, telles que la connexion et la dÃ©connexion, la rÃ©cupÃ©ration des informations dâ€™identification de lâ€™utilisateur, la vÃ©rification de la disponibilitÃ© dâ€™une session et la gestion des rappels. Ces tÃ¢ches sont expliquÃ©es ci-dessous.

Pour plus dâ€™informations sur ces capacitÃ©s et dâ€™autres, veuillez consulter la page de documentation de lâ€™[Authentication API](/docs/fr-ca/libraries/auth0-php/using-the-authentication-api-with-auth0-php).

## PrÃ©requis

La documentation ci-dessous part du principe que vous avez suivi les Ã©tapes de [Auth0-PHP](/docs/fr-ca/libraries/auth0-php), et que vous avez utilisÃ© le code fourni.

### Connexion

Le processus de connexion par dÃ©faut dans la trousse SDK pour PHP utilise un [octroi de code dâ€™authentification](/docs/fr-ca/get-started/authentication-and-authorization-flow/authorization-code-flow/call-your-api-using-the-authorization-code-flow) combinÃ© Ã  la page de connexion universelle dâ€™Auth0. En bref, ce processus est le suivantÂ :

1. Un utilisateur qui demande un accÃ¨s est redirigÃ© vers la page de connexion universelle.
2. Lâ€™utilisateur sâ€™authentifie en utilisant lâ€™une des [nombreuses connexions possibles](/docs/fr-ca/authenticate/identity-providers)Â : rÃ©seau social (Google, X, Facebook), base de donnÃ©es (courriel et mot de passe), sans mot de passe (courriel, SMS), ou entreprise (ActiveDirectory, ADFS, Office 365).
3. Lâ€™utilisateur est redirigÃ© ou renvoyÃ© vers lâ€™URL de rappel de votre application avec un `code` et des valeurs `state` en cas de succÃ¨s ou une `error` et une `error_description` en cas dâ€™Ã©chec.
4. Si lâ€™authentification a rÃ©ussi, la valeur `state` est validÃ©e.
5. Si la valeur `state` est valide, la valeur `code` est Ã©changÃ©e avec Auth0 contre un jeton dâ€™ID et/ou un jeton dâ€™accÃ¨s.
6. Lâ€™identitÃ© du jeton dâ€™ID peut Ãªtre utilisÃ©e pour crÃ©er un compte, pour dÃ©marrer une session spÃ©cifique Ã  une application ou pour conserver la session de lâ€™utilisateur.

Auth0-PHP gÃ¨re la plupart de ces Ã©tapes automatiquement pour vous. Votre application devraÂ :

1. Appeler `Auth0\SDK\Auth0::login()` lorsque les utilisateurs doivent se connecter (par exempleÂ : cliquer sur un lien, visiter le contenu du mur, etc.)
2. Appeler `Auth0\SDK\Auth0::exchange()` lorsque les utilisateurs sont redirigÃ©s vers votre URL de rappel.
3. Appeler `Auth0\SDK\Auth0::getCredentials()` lorsque vous devez vÃ©rifier si un utilisateur est connectÃ© et rÃ©cupÃ©rer des informations sur lâ€™utilisateur.

Une simple mise en Å“uvre de ces Ã©tapes ressemble Ã  ceciÂ :

```php lines
// ðŸ‘† We're continuing from the "getting started" guide linked in "Prerequisites" above. Append this to the index.php file you created there.

// getExchangeParameters() can be used on your callback URL to verify all the necessary parameters are present for post-authentication code exchange.
if ($auth0->getExchangeParameters()) {
    // If they're present, we should perform the code exchange.
    $auth0->exchange();
}

// Check if the user is logged in already
$session = $auth0->getCredentials();

if ($session === null) {
    // User is not logged in!
    // Redirect to the Universal Login Page for authentication.
    header("Location: " . $auth0->login());
    exit;
}

// ðŸŽ‰ At this point we have an authenticated user session accessible from $session; your application logic can continue from here!
echo "Authenticated!";
```

Enfin, vous devrez ajouter lâ€™URL de votre application au champ Â« URL de rappel autorisÃ©es Â» de votre application Auth0 sur la page des paramÃ¨tres. AprÃ¨s cela, le chargement de votre page scriptÃ©e devraitÂ :

1. Vous rediriger immÃ©diatement vers une page de connexion Auth0 pour votre locataire.
2. Une fois la connexion rÃ©ussie Ã  lâ€™aide de nâ€™importe quelle connexion, vous rediriger vers votre application.
3. Afficher une page simple avec la mention Â«Â AuthentifiÃ©!Â Â».

### Profil

Maintenant que nous avons authentifiÃ© un utilisateur, nous pouvons travailler avec ses donnÃ©es de session conservÃ©es pour accomplir des tÃ¢ches telles que lâ€™affichage des profils utilisateurs.

```php lines
// ðŸ‘† We're continuing from code above. Append this to the index.php file.

printf(
    '<h1>Hi %s!</h1>
    <p><Frame><img width="100" src="/docs/%s"></Frame>

</p>
    <p><strong>Last update:</strong> %s</p>
    <p><strong>Contact:</strong> %s %s</p>
    <p><a href="/docs/fr-ca/logout.php">Logout</a></p>',
    isset($session->user['nickname']) ? strip_tags($session->user['nickname']) : '[unknown]',
    isset($session->user['picture']) ? filter_var($session->user['picture'], FILTER_SANITIZE_URL) : 'https://gravatar.com/avatar/',
    isset($session->user['updated_at']) ? date('j/m/Y', strtotime($session->user['updated_at'])) : '[unknown]',
    isset($session->user['email']) ? filter_var($session->user['email'], FILTER_SANITIZE_EMAIL) : '[unknown]',
    ! empty($session->user['email_verified']) ? 'âœ“' : 'âœ—'
);
```

### DÃ©connexion

Outre la connexion, nous voulons Ã©galement que les utilisateurs puissent se dÃ©connecter. Lorsque les utilisateurs se dÃ©connectent, ils doivent invalider leur session pour lâ€™application. Pour cette trousse SDK, cela signifie dÃ©truire leurs donnÃ©es utilisateur et jeton conservÃ©esÂ :

```php lines
// Log out of the application.
header("Location: $auth0->logout());
```

Si vous utilisez lâ€™authentification unique (<Tooltip href="/docs/fr-ca/glossary?term=single-sign-on" tip="Authentification unique (SSO)
Service qui, aprÃ¨s quâ€™un utilisateur se soit connectÃ© Ã  une application, le connecte automatiquement Ã  dâ€™autres applications." cta="Voir le glossaire">SSO</Tooltip>) et que vous souhaitez Ã©galement mettre fin Ã  leur session Auth0, consultez la section [DÃ©connexion SSO ici](/docs/fr-ca/libraries/auth0-php/using-the-authentication-api-with-auth0-php). Vous trouverez plus dâ€™informations dâ€™ordre gÃ©nÃ©ral sur la dÃ©connexion [ici](/docs/fr-ca/authenticate/login/logout).

## En savoir plus

* [PHPÂ : Premiers pas avec Auth0-PHP](/docs/fr-ca/libraries/auth0-php)
* [PHPÂ : Utiliser lâ€™Authentication API avec Auth0-PHP](/docs/fr-ca/libraries/auth0-php/using-the-authentication-api-with-auth0-php)
* [PHPÂ : Utiliser Management API avec Auth0-PHP](/docs/fr-ca/libraries/auth0-php/using-the-management-api-with-auth0-php)
* [PHPÂ : valider les jetons WebÂ JSON (JWT) avec Auth0-PHP](/docs/fr-ca/libraries/auth0-php/validating-jwts-with-auth0-php)
* [PHPÂ : DÃ©pannage de votre intÃ©gration Auth0-PHP](/docs/fr-ca/libraries/auth0-php/troubleshoot-auth0-php-library)