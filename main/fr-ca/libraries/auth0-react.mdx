---
title: "Trousse SDK Auth0 pour React pour les applications monopages"
permalink: "auth0-react"
'description': "Décrit la Trousse SDK Auth0 pour les applications monopages"
'og:title': "Trousse SDK Auth0 pour React pour les applications monopages"
'og:description': "Décrit la Trousse SDK Auth0 pour les applications monopages"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Trousse SDK Auth0 pour React pour les applications monopages"
'twitter:description': "Décrit la Trousse SDK Auth0 pour les applications monopages"
---

La trousse SDK Auth0 pour React (auth0-react.js) est une bibliothèque JavaScript permettant de mettre en œuvre l’authentification et l’autorisation dans les applications React avec Auth0. Elle fournit un hook React personnalisé et d’autres composants d’ordre supérieur afin que vous puissiez sécuriser les applications React en utilisant les meilleures pratiques, tout en écrivant moins de code.

La trousse SDK Auth0 pour React pour les applications monopages (SPA) gère les détails de l’autorisation et du protocole, l’expiration et le renouvellement des jetons, ainsi que le stockage et la mise en cache des jetons. Concrètement, elle met en œuvre la [connexion universelle](/docs/fr-ca/authenticate/login/auth0-universal-login) et le [flux de code d’autorisation avec PKCE](/docs/fr-ca/get-started/authentication-and-authorization-flow/authorization-code-flow-with-pkce).

La bibliothèque est [hébergée sur GitHub](https://github.com/auth0/auth0-react), où vous pouvez [en savoir plus sur l’API](https://auth0.github.io/auth0-react/).

## Installation

Vous avez quelques options pour utiliser auth0-react.js dans vos projets.

* [npm](https://npmjs.org/) :

  `npm install @auth0/auth0-react`
* [yarn](https://yarnpkg.com/) :
  `yarn add @auth0/auth0-react`

## Démarrage

Dans un premier temps, vous devez intégrer votre application dans un seul composant `Auth0Provider`. Cela fournira le contexte React aux composants qui sont placés dans votre application.

```javascript lines
import React from 'react';
    import ReactDOM from 'react-dom';
    import { Auth0Provider } from '@auth0/auth0-react';
    import App from './App';
    ReactDOM.render(
      <Auth0Provider
        domain="{yourDomain}"
        clientId="{yourClientId}"
        authorizationParams={{
          redirect_uri: window.location.origin
        }}
    >
      <App />
    </Auth0Provider>,
    document.getElementById('app')
 );
```

## isLoading et error

Attendez que la trousse SDK s’initialise et gérez les éventuelles erreurs avec les états `isLoading` et `error`.

```javascript lines
import React from 'react';
import { useAuth0 } from '@auth0/auth0-react';
function Wrapper({ children }) {
  const {
    isLoading,
    error,
  } = useAuth0();
  if (isLoading) {
    return <div>Loading...</div>;
  }
  if (error) {
    return <div>Oops... {error.message}</div>;
  }
  return <>{children}</>;
}
export default Wrapper;
```

## Connexion

Utilisez `loginWithRedirect` ou `loginWithPopup` pour connecter vos utilisateurs.

```javascript lines
import React from 'react';
import { useAuth0 } from '@auth0/auth0-react';

function LoginButton() {
  const {
    isAuthenticated,
    loginWithRedirect,
  } = useAuth0();

  return !isAuthenticated && (
    <button onClick={loginWithRedirect}>Log in</button>
  );
}

export default LoginButton;
```

## Déconnexion

Utilisez `logout (déconnexion)` pour déconnecter vos utilisateurs. Assurez-vous que `returnTo` est indiqué dans « URL de déconnexions autorisées » dans <Tooltip href="/docs/fr-ca/glossary?term=auth0-dashboard" tip="Auth0 Dashboard
Principal produit d’Auth0 pour configurer vos services." cta="Voir le glossaire">Auth0 Dashboard</Tooltip>.

```javascript lines
import React from 'react';
import { useAuth0 } from '@auth0/auth0-react';

function LogoutButton() {
  const {
    isAuthenticated,
    logout,
  } = useAuth0();

  return isAuthenticated && (
    <button onClick={() => {
      logout({ 
        logoutParams: {
          returnTo: window.location.origin
        }
      });
    }}>Log out</button>
  );
}

export default LogoutButton;
```

## Utilisateur

Accédez aux informations du profil utilisateur avec la valeur `user`.

```javascript lines
import React from 'react';
import { useAuth0 } from '@auth0/auth0-react';

function Profile() {
  const { user } = useAuth0();

  return <div>Hello {user.name}</div>;
}

export default Profile;
```

## Utilisation avec un composant de classe

Utilisez le composant d’ordre supérieur `withAuth0` pour ajouter la propriété `auth0` aux composants de classe au lieu d’utiliser le hook.

```javascript lines
import React, { Component } from 'react';
import { withAuth0 } from '@auth0/auth0-react';

class Profile extends Component {
  render() {
    const { user } = this.props.auth0;
    return <div>Hello {user.name}</div>;
  }
}

export default withAuth0(Profile);
```

## Protection d’une route

Protégez un composant de route en utilisant le composant d’ordre supérieur `withAuthenticationRequired`. Les visites vers cette route en l’absence d’authentification redirigeront l’utilisateur vers la page de connexion et le renverront vers cette page après la connexion.

```javascript lines
import React from 'react';
import { withAuthenticationRequired } from '@auth0/auth0-react';

const PrivateRoute = () => (<div>Private</div>);

export default withAuthenticationRequired(PrivateRoute, {
  // Show a message while the user waits to be redirected to the login page.
  onRedirecting: () => (<div>Redirecting you to the login page...</div>)
});
```

**Remarque** Si vous utilisez un routeur personnalisé, vous devrez fournir à `Auth0Provider` une méthode `onRedirectCallback` personnalisée pour exécuter l’action qui renvoie l’utilisateur à la page protégée. Voir des exemples pour [react-router](https://github.com/auth0/auth0-react/blob/master/EXAMPLES.md#1-protecting-a-route-in-a-react-router-dom-app), [Gatsby](https://github.com/auth0/auth0-react/blob/master/EXAMPLES.md#2-protecting-a-route-in-a-gatsby-app) et [Next.js](https://github.com/auth0/auth0-react/blob/master/EXAMPLES.md#3-protecting-a-route-in-a-nextjs-app-in-spa-mode).

## Appeler une API

Pour appeler une API protégée avec un jeton d’accès, veillez à préciser `audience`et `scope` de votre [jeton d’accès](/docs/fr-ca/secure/tokens/access-tokens/get-access-tokens), soit dans `Auth0Provider`, soit dans `getAccessTokenSilently`. Utilisez-le ensuite pour appeler une API protégée en le passant dans l’en-tête `Authorization` de votre requête.

```javascript lines
import React, { useEffect, useState } from 'react';
import { useAuth0 } from '@auth0/auth0-react';

const Posts = () => {
  const { getAccessTokenSilently } = useAuth0();
  const [posts, setPosts] = useState(null);

  useEffect(() => {
    (async () => {
      try {
        const token = await getAccessTokenSilently({
          authorizationParams: {
            audience: 'https://api.example.com/', // Value in Identifier field for the API being called.
            scope: 'read:posts', // Scope that exists for the API being called. You can create these through the Auth0 Management API or through the Auth0 Dashboard in the Permissions view of your API.
          }
        });
        const response = await fetch('https://api.example.com/posts', {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        });
        setPosts(await response.json());
      } catch (e) {
        console.error(e);
      }
    })();
  }, [getAccessTokenSilently]);

  if (!posts) {
    return <div>Loading...</div>;
  }

  return (
    <ul>
      {posts.map((post, index) => {
        return <li key={index}>{post}</li>;
      })}
    </ul>
  );
};

export default Posts;
```

