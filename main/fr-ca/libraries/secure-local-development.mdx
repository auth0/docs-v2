---
title: "HTTPS en développement"
permalink: "secure-local-development"
'description': "Sécuriser les serveurs de développement locaux pour travailler avec des témoins SameSite"
'og:title': "HTTPS en développement"
'og:description': "Sécuriser les serveurs de développement locaux pour travailler avec des témoins SameSite"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "HTTPS en développement"
'twitter:description': "Sécuriser les serveurs de développement locaux pour travailler avec des témoins SameSite"
---

Les environnements de développement locaux fonctionnent généralement (c’est-à-dire : http://localhost) par défaut sur HTTP. Ce guide portera sur des situations où vous devez exécuter un serveur local sur HTTPS et comment configurer HTTPS sur localhost.

## Quand utiliser un serveur HTTPS local

Les navigateurs Web se comportent différemment avec HTTP qu’avec HTTPS. Pour tenir compte de ces différences, vous pourriez avoir besoin que votre serveur de développement serve des pages sur HTTPS. Par exemple :

* Lorsque votre page est servie sur HTTPS, les requêtes pour charger des ressources depuis une URL HTTP seront bloquées. Vous pourriez vouloir ce comportement localement pour éviter des bugs qui ne se déclencheraient que dans l’environnement de production, ou parce que vous ne voulez pas effectuer par erreur de requêtes HTTP contenant des informations sensibles.
* Les témoins utilisant un attribut Secure ou un attribut [SameSite](https://auth0.com/blog/browser-behavior-changes-what-developers-need-to-know/) défini sur None ne seront pas envoyés par des canaux non sécurisés, ce qui perturbera l’authentification et d’autres fonctionnalités.

## Comment configurer un serveur local sécurisé

L’idée est de faire fonctionner un serveur Web devant votre serveur de développement local, qui acceptera les requêtes HTTPS et les transmettra au serveur Web de votre application via HTTP, servant ainsi les requêtes de votre application sur HTTPS par le biais d’un proxy. Cela s’appelle un proxy inverse HTTPS et nous pouvons utiliser un produit prêt à l’emploi appelé [Caddy](https://caddyserver.com/v2) pour créer un proxy inverse HTTPS.

Pour ce faire :

1. Téléchargez le fichier exécutable (binaire) de Caddy
2. Exécutez le serveur Web de votre application sur HTTP comme d’habitude.
3. Exécutez le binaire de Caddy en tant que proxy inverse en lui indiquant de diriger le trafic vers le serveur Web de votre application.
4. Visitez le serveur Web du proxy inverse via HTTPS.

### 1. Téléchargez le fichier exécutable (binaire) de Caddy

Visitez [https://caddyserver.com/download](https://caddyserver.com/download), sélectionnez votre plateforme et téléchargez le fichier sur votre ordinateur.

### 2. Exécutez le serveur Web de votre application sur HTTP comme d’habitude.

Exécutez le serveur de développement local de votre application comme d’habitude, par exemple : $ PORT=3000 npm start.

### 3. Exécutez le binaire de Caddy en tant que proxy inverse en lui indiquant de diriger le trafic vers le serveur Web de votre application.

Repérez l’emplacement de votre binaire Caddy téléchargé et exécutez la commande suivante pour créer un proxy inverse et diriger les requêtes du port 443 (le port par défaut utilisé pour HTTPS) vers le port de votre application (dans ce cas, 3000) :

```bash lines
/path/to/caddy reverse-proxy --from localhost:443 --to localhost:3000
```

### 4. Maintenant, visitez votre serveur Web via HTTPS.

Visitez [https://localhost](https://localhost/) et cela servira les requêtes de votre application via HTTPS.

## Exécution de votre application derrière un proxy.

Vous allez peut-être devoir apporter quelques ajustements à votre application lorsqu’elle fonctionne derrière un proxy.

Par exemple, dans Express.js, bien que l’application ne cesse pas de fonctionner, elle enregistrera incorrectement l’adresse IP du proxy comme adresse IP du client, sauf si `trust proxy` est configuré, consultez [https://expressjs.com/en/guide/behind-proxies.html](https://expressjs.com/en/guide/behind-proxies.html)