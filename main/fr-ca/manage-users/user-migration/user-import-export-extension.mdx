---
title: "L’extension User Import/Export (Importation/Exportation des utilisateurs)."
permalink: "user-import-export-extension"
'description': "Découvrez l’extension Importation/Exportation des utilisateurs, qui vous permet d’importer et d’exporter des utilisateurs depuis ou vers n’importe quelle base de données configurée dans votre compte."
'og:title': "L’extension User Import/Export (Importation/Exportation des utilisateurs)."
'og:description': "Découvrez l’extension Importation/Exportation des utilisateurs, qui vous permet d’importer et d’exporter des utilisateurs depuis ou vers n’importe quelle base de données configurée dans votre compte."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "L’extension User Import/Export (Importation/Exportation des utilisateurs)."
'twitter:description': "Découvrez l’extension Importation/Exportation des utilisateurs, qui vous permet d’importer et d’exporter des utilisateurs depuis ou vers n’importe quelle base de données configurée dans votre compte."
---

**L’extension User Import/Export (Importation/Exportation des utilisateurs).** vous permet de :

* Importer en masse les utilisateurs de votre base de données existante dans Auth0
* Rechercher et exporter certains (ou tous) les utilisateurs de votre base de données Auth0

Pour une liste des champs de profil utilisateur qui peuvent être importés et exportés, consulter [Attributs de profil utilisateur](/docs/fr-ca/manage-users/user-accounts/user-profiles/user-profile-structure).

Vous devez être Administrateur du Dashboard pour utiliser cette extension.

## Installer l’extension

Pour installer cette extension, rendez-vous dans [Auth0 Dashboard > Extensions](https://manage.auth0.com/#/extensions), et sélectionnez **User Import/Export (Importation/Exportation des utilisateurs).**.

L’extension ne nécessite aucune configuration supplémentaire avant d’être installée, sélectionnez **Installer** dans la fenêtre d’information pour continuer.

## Utilisation de l’extension

Après avoir installé votre extension, celle-ci apparaît dans la liste des extensions installées. Cliquez sur **Extension d’importation/exportation** pour lancer l’installation.

Au premier lancement de l’extension, il vous sera demandé d’autoriser l’extension à accéder à votre compte Auth0 pour les activités énumérées.

<Frame>![Dashboard Extensions Authorize the Users Import/Export Extension](/images/fr-ca/cdy7uua7fh8z/5CCKmxUv1HN5nDj9jL8qel/d7f02ccf3f4be166b00bbf217e14144f/Screen_Shot_2021-05-18_at_9.11.01_PM.png)</Frame>

Cliquez sur le symbole de **crochet** pour continuer.

Il y a deux façons d’utiliser cette extension :

* Importer en masse les utilisateurs de votre base de données existante dans Auth0
* Rechercher et exporter certains (ou tous) les utilisateurs de votre base de données Auth0

Les deux cas d’utilisation sont expliqués plus en détail ci-dessous.

### Importer des utilisateurs

Par défaut, chaque fois que vous ouvrez l’extension, vous verrez l’écran **Importation d’utilisateurs** (si vous êtes sur l’écran d’exportation, vous pouvez revenir à cet écran en cliquant sur **Importation** dans la barre de navigation de gauche).

Pour importer vos utilisateurs, faites glisser et déposez un fichier JSON valide ([schéma et exemples ici](/docs/fr-ca/manage-users/user-migration/bulk-user-import-database-schema-and-examples)) dans la zone indiquant **Déposez votre fichier ici, ou cliquez pour sélectionner**. Vous pouvez également cliquer sur cette zone pour parcourir vos fichiers et sélectionner le fichier JSON approprié. Le fichier JSON doit contenir la liste des utilisateurs que vous envisagez d’importer.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Si vous utilisez un fichier d’exportation provenant d’un locataire Auth0, vous devez convertir le fichier exporté de `ndjson` en [JSON](https://auth0.com/docs/manage-users/user-migration/bulk-user-exports#json-compatible-format). Pour conserver les mêmes identifiants d’utilisateur, vous devez supprimer le préfixe `auth0|` de tous les identifiants importés.

Le processus d’importation ajoute automatiquement le préfixe `auth0|` aux identifiants d’utilisateur importés. Si vous ne supprimez pas le préfixe `auth0|` avant l’importation, les identifiants sont renvoyés sous la forme `auth0|auth0|...`.

</Callout>

Sélectionnez la connexion à la base de données pour laquelle vos utilisateurs seront importés. Assurez-vous que la connexion que vous choisissez a été activée pour au moins une application.

Cliquez sur **Commencer à importer des utilisateurs** pour lancer le processus d’importation.

Une fois l’importation terminée, le message suivant sera affiché : **Terminé**.

<Frame>![Dashboard Extensions Users Import Export Import Complete](/images/fr-ca/cdy7uua7fh8z/7hyE3DWBJuFuAulAAnZlfN/23303644d4c706f4c0937bd363bf6699/import-complete.png)</Frame>

Une fois que vous avez importé vos utilisateurs, vous pouvez les gérer individuellement à partir d’[Auth0 Dashboard > Gestion des utilisateurs > Utilisateurs](https://manage.auth0.com/#/users).

### Exporter des utilisateurs

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0 utilise le format ndjson en raison de la grande taille des fichiers d’exportation. Avant de pouvoir importer des utilisateurs, vous devez les convertir de **ndjson** à **json** à l’aide de la bibliothèque de votre choix (telle que [jq](https://stedolan.github.io/jq/)). Lors de l’exportation d’utilisateurs destinés à être importés ultérieurement, les noms des champs utilisateur doivent être laissés par défaut et ne pas être associés à un nom de colonne.

</Callout>

Pour exporter vos utilisateurs Auth0 existants associés aux connexions de base de données, sélectionnez **Exporter**.

<Frame>![Dashboard Extensions Users Import Export Export Users page](/images/fr-ca/cdy7uua7fh8z/5wUhbGMjVQKIE9vx2SBIA3/a952aee6cc6027234631334c7174c4a8/export-users.png)</Frame>

Sous **Champs d’utilisateur**, vous pouvez décider quels attributs ou expressions d’utilisateur doivent être inclus dans l’exportation. L’attribut utilisateur peut être une valeur statique comme `user.user_metadata.name`, ou une expression JavaScript comme `user.user_metadata.name || user.name`. Les expressions seront évaluées pendant l’exécution de l’exportation. La valeur de **nom de colonne** correspond à la manière dont la valeur sera représentée dans l’exportation.

Vous pouvez cliquer sur le bouton **Ajouter des champs par défaut** pour sélectionner automatiquement les champs par défaut et remplir leurs noms de colonne (c’est également un bon moyen de visualiser la façon dont les paramètres/expressions apparaîtront).

Vous pouvez supprimer les attributs/expressions superflus en cliquant sur l’icône de **poubelle** qui leur est associée.

Sous **Paramètres**, vous pouvez :

* Configurer la manière dont les utilisateurs exportés sont répertoriés en fournissant un **attribut utilisateur** par lequel les utilisateurs doivent être triés (ainsi que l’ordre croissant ou décroissant des utilisateurs).
* Choisissez votre **Format d’exportation**; vous pouvez choisir entre des fichiers aux formats JSON et CSV.

  <Frame>![Dashboard Extensions Users Import Export Settings Export Format](/images/fr-ca/cdy7uua7fh8z/1HVpo1IevSRJbFvwrEKkzf/761fa914f6c33cdee147e07b2c43f7c7/settings.png)</Frame>

Lorsque vous êtes prêt, cliquez sur **Exporter X utilisateurs** (où `X` est le nombre d’utilisateurs que vous exportez).

Une fois l’exportation terminée, vous pouvez télécharger le fichier contenant vos utilisateurs.

## Mise à jour des utilisateurs

Management API d’Auth0 permet d’effectuer des mises à jour en masse des profils utilisateurs dans `user_metadata` et `app_metadata` à l’aide de l’extension Importation/Exportation des utilisateurs.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0 ne prend actuellement pas en charge l’importation en masse pour les connexions sans mot de passe. Utilisez la [Management API Auth0](https://auth0.com/docs/api/management/v2#!/Users/patch_users_by_id) pour mettre à jour les utilisateurs un par un.

</Callout>

### Exporter des utilisateurs

En utilisant le [processus d’exportation ci-dessus](https://auth0.com/docs/customize/extensions/user-import-export-extension#export-users), créez un fichier d’exportation complet comprenant tous les attributs de l’utilisateur.

Choisissez le format JSON pour votre exportation.

Une fois l’exportation terminée, téléchargez le fichier contenant vos utilisateurs.

### Mise à jour de votre configuration

Faites une **copie** du fichier JSON que vous avez téléchargé à l’étape précédente.

<Warning>

Ce processus peut entraîner une perte de données. Créez une sauvegarde de votre base de données d’utilisateurs en cas de corruption des données.

</Warning>

Ouvrez la copie du fichier JSON dans un éditeur de texte. Votre schéma d’utilisateur doit être similaire au schéma ci-dessous :

```json lines expandable
[
   {
      "Id":"auth0|626737a9813c000069daf462",
      "Nickname":"testuser1",
      "Name":"testuser1@auth0.com",
      "email":"testuser1@auth0.com",
      "Connection":"Username-Password-Authentication",
      "Created At":"2022-04-26T00:07:05.098Z",
      "Updated At":"2022-07-06T14:54:19.214Z"
   },
   {
      "Id":"auth0|62d1a1853bdcf11ff5dca672",
      "Nickname":"testuser2",
      "Name":"testuser2@auth0.com",
      "email":"testuser2@auth0.com",
      "Connection":"Username-Password-Authentication",
      "Created At":"2022-07-15T17:19:01.531Z",
      "Updated At":"2022-07-15T17:19:01.532Z"
   },
   {
      "Id":"auth0|62d1a1a524f32a4185c9ce23",
      "Nickname":"testuser3",
      "Name":"testuser3@auth0.com",
      "email":"testuser3@auth0.com",
      "Connection":"Username-Password-Authentication",
      "Created At":"2022-07-15T17:19:33.484Z",
      "Updated At":"2022-07-15T17:19:33.484Z"
   }
]
```

ne modifiez pas l’adresse courriel de l’utilisateur, qui sert de clé de recherche pour les utilisateurs dans la base de données.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

L’identifiant doit avoir un `connexion|id` unique. Si le même identifiant d’utilisateur existe dans plusieurs connexions, votre mise à jour échouera.

</Callout>

Pour ajouter un attribut, créez un nouveau champ dans chaque schéma d’utilisateur et mettez-le à jour avec une valeur. Dans l’exemple ci-dessous, l’attribut « Nom de famille » a pour valeur « Smith » suivi d’une virgule après la nouvelle valeur de l’attribut.

Vous pouvez également ajouter l’attribut `email_verified` à plusieurs utilisateurs et définir la valeur sur `true`.

```json lines
{
   "Id":"auth0|626737a9813c000069daf462",
   "Nickname":"testuser1",
   "Family Name":"Smith",
   "Name":"testuser1@auth0.com",
   "email":"testuser1@auth0.com",
   "email_verified":true,
   "Connection":"Username-Password-Authentication",
   "Created At":"2022-04-26T00:07:05.098Z",
   "Updated At":"2022-07-06T14:54:19.214Z"
}
```

Enregistrez les modifications dans votre fichier utilisateur.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Ce processus ne peut pas bloquer plusieurs utilisateurs. Vous devez bloquer les utilisateurs individuellement dans l’Auth0 Dashboard ou avec l’[Auth0 Management API](https://auth0.com/docs/api/management/v2#!/Users/patch_users_by_id).

</Callout>

### Importer les données actualisées du profil utilisateur

Le point de terminaison `users-import` vous permet de téléverser votre fichier de profil utilisateur mis à jour et de mettre à jour plusieurs utilisateurs en une seule tâche. Naviguez jusqu’au point de terminaison [Créer le point de terminaison de la tâche d’importation des utilisateurs](https://auth0.com/docs/api/management/v2/#!/Jobs/post_users_imports).

Ajoutez votre fichier utilisateur au paramètre users et ajoutez l’ID de connexion à la base de données que vous souhaitez mettre à jour.

La valeur upsert doit être `true` pour mettre à jour les informations de l’utilisateur déjà existantes.
Pour ajouter vos mises à jour, sélectionnez **Essayer** ou utilisez Postman pour importer les utilisateurs.

Utilisez le `job_id` pour vérifier le statut avec le [point de terminaison](https://auth0.com/docs/api/management/v2/#!/Jobs/get_jobs_by_id)`jobs`.