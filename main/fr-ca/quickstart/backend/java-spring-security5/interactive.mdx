---
title: "Ajouter l’autorisation à votre application Spring Boot"
permalink: "interactive"
'description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Spring Boot, nouvelle ou ancienne."
'og:title': "Ajouter l’autorisation à votre application Spring Boot"
'og:description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Spring Boot, nouvelle ou ancienne."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/java.png"
'twitter:title': "Ajouter l’autorisation à votre application Spring Boot"
'twitter:description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Spring Boot, nouvelle ou ancienne."
sidebarTitle: Spring Boot API
---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Application from "/snippets/quickstart/backend/java-spring-security5/application.yml.mdx";
import Securityconfig from "/snippets/quickstart/backend/java-spring-security5/SecurityConfig.java.mdx";
import Apicontroller from "/snippets/quickstart/backend/java-spring-security5/APIController.java.mdx";

export const sections = [
  { id: "définir-les-autorisations", title: "Définir les autorisations" },
  { id: "configurer-l-exemple-de-projet", title: "Configurer l’exemple de projet" },
  { id: "installer-les-dépendances", title: "Installer les dépendances" },
  { id: "configurer-le-serveur-de-ressources", title: "Configurer le serveur de ressources" },
  { id: "créer-l-objet-de-domaine", title: "Créer l’objet de domaine" },
  { id: "créer-le-contrôleur-d-api", title: "Créer le contrôleur d’API" },
  { id: "exécuter-l-application", title: "Exécuter l’application" }
]

<Recipe>
  <Content>
    Auth0 vous permet d’ajouter rapidement une autorisation à votre application. Ce guide explique comment intégrer Auth0 à n’importe quelle application Spring Boot, nouvelle ou ancienne.

    Si vous n’avez pas encore créé d’API dans votre Auth0 Dashboard, vous pouvez utiliser le sélecteur interactif pour créer une nouvelle API Auth0 ou sélectionner une API existante qui représente le projet avec lequel vous souhaitez vous intégrer.

    Consultez [notre guide de démarrage](https://auth0.com/docs/get-started/auth0-overview/set-up-apis) pour configurer votre première API via Auth0 Dashboard.

    Chaque API Auth0 utilise l’identificateur API, dont votre application a besoin pour valider le jeton d’accès.

    <Info>
    **Vous ne connaissez pas Auth0?** Découvrez [Auth0](https://auth0.com/docs/overview) et [l’implémentation de l’authentification et de l’autorisation d’API](https://auth0.com/docs/api-auth) en utilisant le cadre d’applications OAuth 2.0.
    </Info>

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Les autorisations vous permettent de définir comment les ressources peuvent être accessibles au nom de l’utilisateur avec un jeton d’accès donné. Par exemple, vous pouvez choisir d’accorder un accès en lecture à la ressource `messages` si les utilisateurs ont le niveau d’accès gestionnaire et un accès en écriture à cette ressource s’ils ont le niveau d’accès administrateur.

      Vous pouvez définir les autorisations autorisées dans la vue **Permissions (Autorisations)** de la section [API](https://manage.auth0.com/dashboard/us/dev-1-2s2aq0/apis) d’Auth0 Dashboard.

      ![Auth0 Dashboard> Applications > APIs (API) > [Specific API (API précise)] > Onglet Permissions (Autorisations)](/images/fr-ca/cdy7uua7fh8z/1s3Yp5zqJiKiSWqbPSezNO/677a3405b2853f5fdf9e42f6e83ceba7/Quickstarts_API_-_French.png)

      <Info>
      Cet exemple utilise la permission `read:messages`.
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      L’exemple de projet utilise un fichier `/src/main/resources/application.yml`, qui le configure pour utiliser le **domaine** et l’**identificateur API** Auth0 corrects pour votre API. Si vous téléchargez le code à partir de cette page, il sera automatiquement configuré. En revanche, si vous clonez l’exemple à partir de GitHub, vous devrez le remplir manuellement.
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Si vous utilisez Gradle, vous pouvez ajouter les dépendances nécessaires en utilisant le [plugiciel Gradle de Spring Boot](https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/) et le [plugiciel de gestion des dépendances](https://docs.spring.io/dependency-management-plugin/docs/current/reference/html/) pour résoudre les problèmes de versions de dépendances :

      ```
      // build.gradle
      plugins {

          id 'java'

          id 'org.springframework.boot'

          version '3.1.5'

          id 'io.spring.dependency-management'

          version '1.1.3'

      }

      dependencies {

          implementation 'org.springframework.boot:spring-boot-starter-web'

          implementation 'com.okta.spring:okta-spring-boot-starter:3.0.5'

      }
      ```

      Si vous utilisez Maven, ajoutez les dépendances Spring à votre fichier `pom.xml` :

      ```xml
      // pom.xml
      <parent>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-parent</artifactId>
      <version>3.1.5</version>
      <relativePath/>
      </parent>
      <dependencies>
      <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
      </dependency>
      <dependency>
      <groupId>com.okta.spring</groupId>
      <artifactId>okta-spring-boot-starter</artifactId>
      <version>3.0.5</version>
      </dependency>
      </dependencies>
      ```
      </Section>

      <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      Pour configurer l’application en tant que serveur de ressources et valider les JWT, créez une classe qui fournira une instance `SecurityFilterChain` et ajoutez l’annotation `@Configuration`.

      ### Protéger les points de terminaison des API

      Les routes ci-dessous sont disponibles pour les demandes suivantes :

      - `GET /api/public` : disponible pour les demandes non authentifiées
      - `GET /api/private` : disponible pour les demandes authentifiées contenant un jeton d’accès sans permission supplémentaire
      - `GET /api/private-scoped` : disponible pour les demandes authentifiées contenant un jeton d’accès dont la permission `read:messages` est accordée

      L’exemple ci-dessous montre comment sécuriser les méthodes de l’API à l’aide de l’objet `HttpSecurity` fourni dans la méthode `filterChain()` de la classe `SecurityConfig`. Les adaptateurs de routes limitent l’accès en fonction du niveau d’autorisation requis.

      <Info>
      Par défaut, Spring Security crée une `GrantedAuthority` pour chaque permission dans la demande `scope` du JWT. Cette permission permet d’utiliser la méthode `hasAuthority("SCOPE\_read:messages")` pour restreindre l’accès à un JWT valide qui contient la permission `read:messages`.
      </Info>
      </Section>

      <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      Pour que votre point de terminaison renvoie un objet JSON, utilisez un enregistrement Java. Les variables membres de cet objet sont sérialisées dans la valeur clé de votre objet JSON. Créez un nouvel enregistrement appelé `Message` comme exemple d’objet de domaine à renvoyer lors des appels à l’API.
      </Section>

      <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      Créez une nouvelle classe appelée `APIController` pour gérer les demandes vers les points de terminaison. L’`APIController` possède trois routes définies dans la section [Protéger les points de terminaison des API](https://auth0.com/docs/quickstart/backend/java-spring-security5/interactive#configure-the-resource-server). Dans cet exemple, toutes les origines sont autorisées par l’annotation `@CrossOrigin`. Les applications réelles doivent configurer `CORS` en fonction de leur cas d’utilisation.
      </Section>

      <Section id={sections[6].id} title={sections[6].title} stepNumber="7">
      Pour développer et exécuter le projet exemple, exécutez la tâche Gradle `bootRun`.

      Linux ou macOS :

      `./gradlew bootRun`

      Windows :

      `gradlew.bat bootRun`

      Si vous configurez votre propre application en utilisant Maven et le plugiciel [Spring Boot Maven Plugin](https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html), vous pouvez exécuter l’objectif `spring-boot:run`.

      Linux ou macOS :

      `mvn spring-boot:run`

      Windows :

      `mvn.cmd spring-boot:run`

      <Note>
      ##### Point de contrôle
      L’exemple d’application sera accessible à l’adresse `http://localhost:3010/`. Pour en savoir plus sur la manière de tester et d’utiliser votre API, consultez [Utiliser votre API](https://auth0.com/docs/quickstart/backend/java-spring-security5/02-using).
      </Note>
      </Section>

    ## Étapes suivantes

    Beau travail! Si vous en êtes arrivé là, vous devriez avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Cela conclut notre tutoriel de démarrage rapide, mais il y a tellement plus à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    *   [Auth0 Dashboard](https://manage.auth0.com/#) : apprenez à configurer et gérer votre locataire et vos applications Auth0
    *   [Trousse SDK Okta Spring Boot Starter](https://github.com/okta/okta-spring-boot/) : explorez en détail la trousse SDK utilisée dans ce tutoriel
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) : découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <CodeGroup>
          <Application/>
          <Securityconfig/>
          <Apicontroller/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <CodeGroup>
          <Application/>
          <Securityconfig/>
          <Apicontroller/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[3].id}>
        <CodeGroup>
          <Securityconfig/>
          <Application/>
          <Apicontroller/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[4].id}>
        <CodeGroup>
          <Application/>
          <Securityconfig/>
          <Apicontroller/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[5].id}>
        <CodeGroup>
          <Apicontroller/>
          <Securityconfig/>
          <Application/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[6].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

    </SideMenu>
</Recipe>
