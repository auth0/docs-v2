---
title: "Ajouter une fonctionnalité de connexion à votre application Go"
permalink: "interactive"
'description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Web Go, nouvelle ou existante."
'og:title': "Ajouter une fonctionnalité de connexion à votre application Go"
'og:description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Web Go, nouvelle ou existante."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/golang.png"
'twitter:title': "Ajouter une fonctionnalité de connexion à votre application Go"
'twitter:description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Web Go, nouvelle ou existante."
sidebarTitle: Go
---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Auth from "/snippets/quickstart/webapp/golang/auth.go.mdx";
import Callback from "/snippets/quickstart/webapp/golang/callback.go.mdx";
import Env from "/snippets/quickstart/webapp/golang/.env.mdx";
import Go from "/snippets/quickstart/webapp/golang/go.mod.mdx";
import Isauthenticated from "/snippets/quickstart/webapp/golang/isAuthenticated.go.mdx";
import Login from "/snippets/quickstart/webapp/golang/login.go.mdx";
import Logout from "/snippets/quickstart/webapp/golang/logout.go.mdx";
import Main from "/snippets/quickstart/webapp/golang/main.go.mdx";
import Router from "/snippets/quickstart/webapp/golang/router.go.mdx";
import User from "/snippets/quickstart/webapp/golang/user.go.mdx";

export const sections = [
  { id: "configuration-d-auth0", title: "Configuration d’Auth0" },
  { id: "installer-les-dépendances", title: "Installer les dépendances" },
  { id: "configurer-les-variables-d-environnement", title: "Configurer les variables d’environnement" },
  { id: "configurez-les-packages-oauth2-et-openid-connect", title: "Configurez les packages OAuth2 et OpenID Connect" },
  { id: "configurer-vos-routes-d-application", title: "Configurer vos routes d’application" },
  { id: "ajouter-une-fonctionnalité-de-connexion-à-votre-application", title: "Ajouter une fonctionnalité de connexion à votre application" },
  { id: "gérer-le-rappel-d-authentification", title: "Gérer le rappel d’authentification" },
  { id: "afficher-les-informations-du-profil-utilisateur", title: "Afficher les informations du profil utilisateur" },
  { id: "ajouter-une-fonctionnalité-de-déconnexion-à-votre-application", title: "Ajouter une fonctionnalité de déconnexion à votre application" },
  { id: "protéger-les-routes", title: "Protéger les routes" },
  { id: "lancer-votre-application", title: "Lancer votre application" }
]

<Recipe>
  <Content>
    Auth0 vous permet d’ajouter l’authentification et de pouvoir accéder aux informations relatives au profil de l’utilisateur dans votre application. Ce guide explique comment intégrer Auth0 à n’importe quelle application Web Go, nouvelle ou existante.

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Pour utiliser les services Auth0, vous devez avoir une application installée dans Auth0 Dashboard. L’application Auth0 est l’endroit où vous allez configurer le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet avec lequel vous souhaitez effectuer l’intégration. Dans Auth0, chaque application se voit attribuer un identifiant client unique alphanumérique que votre code d’application utilisera pour appeler les API Auth0 via la trousse SDK.

      Tous les paramètres que vous configurez à l’aide de ce guide de démarrage rapide seront automatiquement mis à jour pour votre application dans le [Tableau de bord](https://manage.auth0.com/dashboard/us/auth0-dsepaid/), qui est l’endroit où vous pourrez gérer vos applications à l’avenir.

      Si vous préférez explorer une configuration complète, consultez plutôt un exemple d’application.

      ### Configuration des URL de rappel

      Une URL de rappel est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas redirigés vers votre application après s’être connectés.

      <Info>
      Si vous suivez notre exemple de projet, définissez cette URL comme suit : `http://localhost:3000``/callback`.
      </Info>

      ### Configuration des URL de déconnexion

      Une URL de déconnexion est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront un message d’erreur.

      <Info>
      Si vous suivez notre exemple de projet, définissez cette URL comme suit : `http://localhost:3000`.
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Créez un fichier `go.mod` pour lister toutes les dépendances de votre application.

      Pour intégrer Auth0 dans une application Go, ajoutez les packages `coreos/go-oidc/v3` et `x/oauth2`.

      En plus des packages OIDC et OAuth2, ajoutez `joho/godotenv`, `gin-gonic/gin`, et `gin-contrib/sessions`.

      <Info>
      Cet exemple utilise `gin` pour le routage, mais vous pouvez utiliser le routeur de votre choix.
      </Info>

      Enregistrez le fichier `go.mod` avec les dépendances nécessaires et installez-les en utilisant la commande suivante dans votre terminal :

      `go mod download`
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Vous devez définir les variables d’environnement suivantes dans `.env` à la racine de votre répertoire de projet :

      - **AUTH0\_DOMAIN** : Le domaine de votre locataire Auth0. Trouvez votre domaine Auth0 dans Auth0 Dashboard sous les paramètres de votre application dans le champ Domain (Domaine). Pour les domaines personnalisés, définissez-le plutôt sur la valeur de votre domaine personnalisé.
      - **AUTH0\_CLIENT\_ID** : L’identificateur de l’application Auth0 que vous avez configurée précédemment dans ce guide rapide. Vous le trouverez dans Auth0 Dashboard sous les paramètres de votre application dans le champ Client ID (Identificateur client).
      - **AUTH0\_CLIENT\_SECRET** : Le secret de l’application Auth0 que vous avez configurée précédemment dans ce guide rapide. Vous le trouverez dans Auth0 Dashboard, sous les paramètres de votre application dans le champ Client Secret (Secret client).
      - **AUTH0\_CALLBACK\_URL** : L’URL utilisée par Auth0 pour rediriger l’utilisateur après une authentification réussie.
      </Section>

      <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      Ensuite, configurez les packages OAuth2 et OpenID Connect

      Créez un fichier nommé `auth.go` dans le dossier `platform/authenticator`. Dans ce package, créez une méthode pour configurer et renvoyer les clients [OAuth2](https://godoc.org/golang.org/x/oauth2) et [OIDC](https://godoc.org/github.com/coreos/go-oidc), et une autre pour vérifier un jeton d’ID.
      </Section>

      <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      Créez un fichier nommé `router.go` dans le dossier `platform/router`. Dans ce package, créez une méthode pour configurer et renvoyer nos routes en utilisant [github.com/gin-gonic/gin](https://github.com/gin-gonic/gin). Vous passerez une instance de `Authenticator` à la méthode pour l’utiliser avec les gestionnaires `login (connexion)` et `callback (rappel)`.
      </Section>

      <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      Pour que l’utilisateur s’authentifie, nous devons créer une fonction gestionnaire pour traiter la route`/login`.

      Créez un fichier nommé `login.go` dans le dossier `web/app/login` et ajoutez une fonction `Handler`. Lors de l’exécution du gestionnaire, l’utilisateur sera redirigé vers Auth0 où il pourra saisir ses identifiants.

      Pour appeler la route `/login` ajoutez un lien vers `/login` dans le modèle `home.html` situé dans le directory `web/template`.
      </Section>

      <Section id={sections[6].id} title={sections[6].title} stepNumber="7">
      Une fois que les utilisateurs se sont authentifiés en utilisant la page de connexion universelle d’Auth0, ils reviendront à l’application à la route `/callback`.

      Créez un fichier nommé `callback.go` dans le dossier `web/app/callback` et ajoutez une fonction `Handler`.

      Ce gestionnaire prendra la chaîne de requête `code` fournie par Auth0 et l’échangera contre un jeton d’ID et un jeton d’accès.

      Si le jeton d’ID est valide, il stockera les informations de profil et le jeton d’accès dans la session. Les informations de profil sont basées sur les demandes contenues dans le jeton d’ID. Le stockage de session permet à l’application d’accéder à ces informations selon les besoins.
      </Section>

      <Section id={sections[7].id} title={sections[7].title} stepNumber="8">
      Maintenant que vos utilisateurs peuvent se connecter, vous voulez probablement pouvoir récupérer et utiliser les informations de profil associées aux utilisateurs authentifiés.

      Vous pouvez accéder à ces informations de profil, telles que leur pseudonyme ou leur photo de profil, à partir du `profile` qui a été sauvegardé dans la session précédemment.

      Créez un gestionnaire pour le point de terminaison `/user` dans `web/app/user/user.go` et renvoyez le fichier HTML correspondant. Comme le `profile` passe à `ctx.HTML()`, vous pouvez accéder aux informations de profil, telles que `picture` et `nickname` à l’intérieur de ce même fichier HTML.

      Un exemple de fichier HTML de ce type pourrait ressembler à l’exemple ci-dessous, mais vous pouvez récupérer n’importe quelle information de profil, y compris des demandes personnalisées.
      </Section>

      <Section id={sections[8].id} title={sections[8].title} stepNumber="9">
      Pour déconnecter l’utilisateur, effacez les données de la session et redirigez l’utilisateur vers le point de terminaison de déconnexion Auth0. Vous trouverez plus d’informations à ce sujet dans la [documentation sur la déconnexion](https://auth0.com/docs/logout).

      Créez un fichier nommé `logout.go` dans le dossier `web/app/logout`, et ajoutez la fonction `Handler` pour rediriger l’utilisateur vers le point de terminaison de déconnexion Auth0.

      L’URL `returnTo` doit figurer dans la liste des URL de déconnexion autorisées de la section des paramètres de l’application. Pour plus d’informations, consultez [Rediriger les utilisateurs après la déconnexion](https://auth0.com/docs/logout/guides/redirect-users-after-logout).

      Créez un fichier nommé `user.js` dans le dossier `web/static/js`, et ajoutez le code pour supprimer le témoin d’un utilisateur connecté.
      </Section>

      <Section id={sections[9].id} title={sections[9].title} stepNumber="10">
      La pratique recommandée veut que certaines routes ne soient accessibles qu’aux utilisateurs authentifiés. Lorsque des utilisateurs non authentifiés essaient d’accéder à des routes protégées, votre application devrait les rediriger.

      Dans ce cas, vous devez mettre en œuvre un intergiciel pour accéder à la requête HTTP. La fonction d’intergiciel détermine si la requête doit être dirigée vers le gestionnaire de point de terminaison ou si elle doit être bloquée.

      Créez un fichier nommé `isAuthenticated.go` dans `platform/middleware` et ajoutez une fonction qui vérifie si l’utilisateur est authentifié ou non, en fonction de la clé de session de `profile`. Si l’utilisateur n’est pas authentifié, l’intergiciel le redirigera vers la racine de l’application.

      L’intergiciel créé, nous pouvons le configurer pour toute route nécessitant une authentification en l’ajoutant au routeur.
      </Section>

      <Section id={sections[10].id} title={sections[10].title} stepNumber="11">
      L’authentificateur et le routeur configurés, nous pouvons connecter les éléments à l’aide du point d’entrée de notre application. Dans `main.go`, créez une instance de l’authentificateur et du routeur, qui reçoit l’instance de l’authentificateur.

      Si vous utilisez un fichier `.env` , vous devez appeler `godotenv.Load()` au tout début de la fonction `main()`.

      Lancez votre application en utilisant la commande suivante dans votre terminal :

      `go run main.go`
      </Section>

    ## Étapes suivantes

    Beau travail! Si vous en êtes arrivé là, vous devriez avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Cela conclut notre tutoriel de démarrage rapide, mais il y a tellement plus à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    *   [Auth0 Dashboard](https://manage.auth0.com/#) : apprenez à configurer et gérer votre locataire et vos applications Auth0
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) : découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <CodeGroup>
          <User/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Main/>
          <Router/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <CodeGroup>
          <Env/>
          <Auth/>
          <Callback/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Main/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[3].id}>
        <CodeGroup>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Main/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[4].id}>
        <CodeGroup>
          <Router/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Main/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[5].id}>
        <CodeGroup>
          <Login/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Logout/>
          <Main/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[6].id}>
        <CodeGroup>
          <Callback/>
          <Auth/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Main/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[7].id}>
        <CodeGroup>
          <User/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Main/>
          <Router/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[8].id}>
        <CodeGroup>
          <Logout/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Main/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[9].id}>
        <CodeGroup>
          <Isauthenticated/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Login/>
          <Logout/>
          <Main/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[10].id}>
        <CodeGroup>
          <Main/>
          <Auth/>
          <Callback/>
          <Env/>
          <Go/>
          <Isauthenticated/>
          <Login/>
          <Logout/>
          <Router/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

    </SideMenu>
</Recipe>
