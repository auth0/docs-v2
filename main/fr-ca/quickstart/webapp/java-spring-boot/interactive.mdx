---
title: "Ajouter une fonctionnalité de connexion à votre application Spring Web"
permalink: "interactive"
'description': "Ce guide explique comment intégrer Auth0 à une application Spring Boot à l’aide de la trousse SDK Spring Boot Auth0."
'og:title': "Ajouter une fonctionnalité de connexion à votre application Spring Web"
'og:description': "Ce guide explique comment intégrer Auth0 à une application Spring Boot à l’aide de la trousse SDK Spring Boot Auth0."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/spring.png"
'twitter:title': "Ajouter une fonctionnalité de connexion à votre application Spring Web"
'twitter:description': "Ce guide explique comment intégrer Auth0 à une application Spring Boot à l’aide de la trousse SDK Spring Boot Auth0."
sidebarTitle: Java Spring Boot
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Application from "/snippets/quickstart/webapp/java-spring-boot/application.yml.mdx";
import Securityconfig from "/snippets/quickstart/webapp/java-spring-boot/SecurityConfig.java.mdx";
import Index from "/snippets/quickstart/webapp/java-spring-boot/index.html.mdx";
import Homecontroller from "/snippets/quickstart/webapp/java-spring-boot/HomeController.java.mdx";
import Securityconfigwithlogout from "/snippets/quickstart/webapp/java-spring-boot/SecurityConfigWithLogout.java.mdx";

export const sections = [
  { id: "configuration-d-auth0", title: "Configuration d’Auth0" },
  { id: "configurer-l-application-sprint-boot", title: "Configurer l’application Sprint Boot" },
  { id: "configurer-spring-security", title: "Configurer Spring Security" },
  { id: "ajouter-une-fonctionnalité-de-connexion-à-votre-application", title: "Ajouter une fonctionnalité de connexion à votre application" }
]

<Recipe>
  <Content>
    ### Vous utilisez Spring WebFlux?

    Ce tutoriel utilise [Spring MVC](https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html). Si vous utilisez [Spring WebFlux](https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#spring-web-reactive), les étapes pour ajouter l’authentification sont similaires, mais certains détails d’implémentation sont différents. Reportez-vous au [Code d’exemple Spring Boot WebFlux](https://github.com/auth0-samples/auth0-spring-boot-login-samples/tree/master/webflux-login) pour voir comment intégrer Auth0 à votre application Spring Boot WebFlux.

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Pour utiliser les services Auth0, vous devez avoir une application installée dans Auth0 Dashboard. L’application Auth0 est l’endroit où vous allez configurer le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet avec lequel vous souhaitez effectuer l’intégration. Dans Auth0, chaque application se voit attribuer un identifiant client unique alphanumérique que votre code d’application utilisera pour appeler les API Auth0 via la trousse SDK.

      Tous les paramètres que vous configurez à l’aide de ce guide de démarrage rapide seront automatiquement mis à jour pour votre application dans le [Tableau de bord](https://manage.auth0.com/#/), qui est l’endroit où vous pourrez gérer vos applications à l’avenir.

      Si vous préférez explorer une configuration complète, consultez plutôt un exemple d’application.

      ### Configuration des URL de rappel

      Une URL de rappel est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas redirigés vers votre application après s’être connectés.

      <Info>
      Si vous suivez notre projet à titre d’exemple, définissez ceci sur
      `http://localhost:3000/login/oauth2/code/okta`.
      </Info>

      ### Configuration des URL de déconnexion

      Une URL de déconnexion est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront un message d’erreur.

      <Info>
      Si vous suivez notre projet à titre d’exemple, définissez ceci sur
      `http://localhost:3000`.
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      ### Ajouter les dépendances Spring

      Pour intégrer votre application Spring Boot avec Auth0, incluez [Okta Spring Boot Starter](https://github.com/okta/okta-spring-boot/) dans les dépendances de votre application.

      <Info>
      Ce guide utilise [Thymeleaf](https://www.thymeleaf.org/) et le [module d’intégration Spring Security](https://github.com/thymeleaf/thymeleaf-extras-springsecurity) pour la couche d’affichage. Si vous utilisez une technologie d’affichage différente, la configuration et les composants de Spring Security restent les mêmes.
      </Info>

      Si vous utilisez Gradle, vous pouvez inclure ces dépendances comme indiqué ci-dessous.

      <AuthCodeBlock icon="file-code">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      Si vous utilisez Maven :

      <AuthCodeBlock icon="file-code" language="html">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Okta Spring Boot Starter facilite la configuration de votre application avec Auth0. L’exemple ci-dessous utilise un fichier `application.yml`, mais vous pouvez également utiliser des fichiers de propriétés ou tout autre [mécanisme d’externalisation pris en charge](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config).

      <AuthCodeBlock icon="file-code">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
      </Section>

      <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      Pour permettre aux utilisateurs de se connecter avec Auth0, créez une classe qui enregistrera une [SecurityFilterChain](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/SecurityFilterChain.html) et ajoutez l’annotation `@Configuration`.

      <Info>
      Vous pouvez configurer l’instance [HttpSecurity](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html) pour qu’elle exige une authentification sur tous les chemins ou seulement sur certains d’entre eux. Par exemple, pour exiger l’authentification sur tous les chemins à l’exception de la page d’accueil :
      
      `http`

      <AuthCodeBlock icon="file-code" language="http">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      ## Ajouter une page d’accueil

      Okta Spring Boot Starter utilisera la configuration client que vous avez définie précédemment pour gérer la connexion lorsqu’un utilisateur visite le chemin `//oauth2/authorization/okta` de votre application. Vous pouvez l’utiliser pour créer un lien de connexion dans votre application.

      Cette page renvoie les attributs de l’utilisateur lorsque celui-ci s’authentifie. Vous utiliserez le lien `/logout` dans le modèle pour mettre en œuvre la fonctionnalité de déconnexion.

      ## Ajouter un contrôleur

      Créez un contrôleur pour traiter la demande entrante. Ce contrôleur crée la page `index.html`. Lorsque l’utilisateur s’authentifie, l’application récupère les attributs d’information du profil utilisateur pour créer la page.

      <Note>
        ##### Point de contrôle

        Lorsque vous cliquez sur le lien de connexion, vérifiez que l’application vous redirige vers la page [Connexion universelle Auth0](https://auth0.com/universal-login) et que vous pouvez maintenant vous connecter ou vous inscrire en utilisant un nom d’utilisateur et un mot de passe, ou un réseau social.
      </Note>

      <Frame>![null](/images/fr-ca/cdy7uua7fh8z/7L6lZ6xCi1L7sJBFZUPb9g/215ad0b724c138290b0b217edb5ddf96/Login_Screen_-_French.png)</Frame>

      Auth0 active le fournisseur social Google par défaut sur les nouveaux locataires et vous offre des clés de développeur pour tester la connexion avec des [fournisseurs d’identité sociale](https://auth0.com/docs/connections/identity-providers-social). Toutefois, ces clés de développeur présentent certaines limitations qui peuvent entraîner un comportement différent de votre application. Pour plus de détails sur ce comportement et comment le résoudre, consultez le document [Tester les connexions sociales avec des clés de développeur Auth0](https://auth0.com/docs/connections/social/devkeys#limitations-of-developer-keys).

      ## Ajouter une fonctionnalité de déconnexion à votre application

      Maintenant que les utilisateurs peuvent se connecter à votre application, ils ont besoin d’un [moyen de se déconnecter](https://auth0.com/docs/logout/guides/logout-auth0). Par défaut, lorsque la déconnexion est activée, Spring Security déconnecte l’utilisateur de votre application et efface la session. Pour permettre une déconnexion réussie de Auth0, vous pouvez fournir un `LogoutHandler` pour rediriger les utilisateurs vers votre [point de terminaison de déconnexion Auth0](https://auth0.com/docs/api/authentication?javascript#logout) (`https://{yourDomain}/v2/logout`) et ensuite les rediriger immédiatement vers votre application.

      Dans la classe `SecurityConfig`, fournissez un `LogoutHandler` qui redirige vers le point de terminaison de déconnexion Auth0, et configurez `HTTPSecurity` pour ajouter le gestionnaire de déconnexion.

      <Note>
      ##### Point de contrôle
      Lorsque vous cliquez sur le lien de déconnexion, l’application doit vous rediriger vers l’adresse que vous avez spécifiée comme l’une des « URL de déconnexion autorisées » dans les « Paramètres d’application » et vous n’êtes plus connecté à votre application.
      </Note>
      </Info>
      </Section>


    ## Étapes suivantes

    Beau travail! Si vous en êtes arrivé là, vous devriez avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Cela conclut notre tutoriel de démarrage rapide, mais il y a tellement plus à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    *   [Auth0 Dashboard](https://manage.auth0.com/#) : apprenez à configurer et gérer votre locataire et vos applications Auth0
    *   [Trousse SDK Okta Spring Boot Starter](https://github.com/okta/okta-spring-boot/) : explorez en détail la trousse SDK utilisée dans ce tutoriel
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) : découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <CodeGroup>
          <Application/>
          <Securityconfig/>
          <Index/>
          <Homecontroller/>
          <Securityconfigwithlogout/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[3].id}>
        <CodeGroup>
          <Securityconfig/>
          <Application/>
          <Index/>
          <Homecontroller/>
          <Securityconfigwithlogout/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[4].id}>
        <CodeGroup>
          <Index/>
          <Application/>
          <Securityconfig/>
          <Homecontroller/>
          <Securityconfigwithlogout/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[5].id}>
        <CodeGroup>
          <Homecontroller/>
          <Application/>
          <Securityconfig/>
          <Index/>
          <Securityconfigwithlogout/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[6].id}>
        <CodeGroup>
          <Securityconfigwithlogout/>
          <Application/>
          <Securityconfig/>
          <Index/>
          <Homecontroller/>
        </CodeGroup>
      </SideMenuSectionItem>

    </SideMenu>
</Recipe>
