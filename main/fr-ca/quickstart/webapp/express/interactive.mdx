---
title: "Ajouter une fonctionnalité de connexion à votre application Express"
permalink: "interactive"
'description': "Ce guide explique comment intégrer Auth0, ajouter la connexion utilisateur, la déconnexion et un profil à une application Node.js Express en utilisant la trousse SDK Express OpenID Connect."
'og:title': "Ajouter une fonctionnalité de connexion à votre application Express"
'og:description': "Ce guide explique comment intégrer Auth0, ajouter la connexion utilisateur, la déconnexion et un profil à une application Node.js Express en utilisant la trousse SDK Express OpenID Connect."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/node.png"
'twitter:title': "Ajouter une fonctionnalité de connexion à votre application Express"
'twitter:description': "Ce guide explique comment intégrer Auth0, ajouter la connexion utilisateur, la déconnexion et un profil à une application Node.js Express en utilisant la trousse SDK Express OpenID Connect."
sidebarTitle: Express
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Server from "/snippets/quickstart/webapp/express/server.js.mdx";
import Server2 from "/snippets/quickstart/webapp/express/server.js2.mdx";

export const sections = [
  { id: "configuration-d-auth0", title: "Configuration d’Auth0" },
  { id: "installer-la-trousse-sdk-express-openid-connect", title: "Installer la trousse SDK Express OpenID Connect" },
  { id: "afficher-le-profil-utilisateur", title: "Afficher le profil utilisateur" }
]

<Recipe>
  <Content>
    Auth0 vous permet d’ajouter rapidement l’authentification à presque tous les types d’application. Ce guide explique comment intégrer Auth0, ajouter la connexion utilisateur, la déconnexion et un profil à une application Node.js Express en utilisant la trousse SDK Express OpenID Connect.

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Pour utiliser les services Auth0, vous devez avoir une application installée dans Auth0 Dashboard. L’application Auth0 est l’endroit où vous allez configurer le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet avec lequel vous souhaitez effectuer l’intégration. Dans Auth0, chaque application se voit attribuer un identifiant client unique alphanumérique que votre code d’application utilisera pour appeler les API Auth0 via la trousse SDK.

      Tous les paramètres que vous configurez à l’aide de ce guide de démarrage rapide seront automatiquement mis à jour pour votre application dans le [Tableau de bord](https://manage.auth0.com/#/), qui est l’endroit où vous pourrez gérer vos applications à l’avenir.

      Si vous préférez explorer une configuration complète, consultez plutôt un exemple d’application.

      ### Configurer les URL de rappel

      Une URL de rappel est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas redirigés vers votre application après s’être connectés.

      <Info>
      Si vous suivez notre exemple de projet, définissez cette URL comme suit : `http://localhost:3000``/callback`.
      </Info>

      ### Configuration des URL de déconnexion

      Une URL de déconnexion est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront un message d’erreur.

      <Info>
      Si vous suivez notre exemple de projet, définissez cette URL comme suit : `http://localhost:3000/logout`.
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Votre application aura besoin du package [`express-openid-connect`](https://github.com/auth0/express-openid-connect), qui est une trousse SDK conforme à l’OIDC maintenue par Auth0 pour Express.

      Installez la trousse SDK Express OpenID Connect en exécutant les commandes suivantes dans votre terminal :

      <AuthCodeBlock icon="file-code">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      ### Configurer le routeur

      La bibliothèque Express OpenID Connect fournit le routeur `auth` afin de joindre des routes d’authentification à votre application. Vous devez configurer le routeur avec les clés de configuration suivantes :

      - `authRequired` - Vérifie si l’authentification est requise pour toutes les routes.
      - `auth0Logout` - Utilise la fonctionnalité de déconnexion d’Auth0.
      - `baseURL` - L’URL où l’application est hébergée.
      - `secret` - Une chaîne longue et aléatoire.
      - `issuerBaseURL` - Le domaine sous forme d’URL sécurisée trouvé dans vos [Paramètres d’application](https://manage.auth0.com/#/applications/%7ByourClientId%7D/settings).
      - `clientID` - L’ID client trouvé dans vos [Paramètres d’application](https://manage.auth0.com/#/applications/%7ByourClientId%7D/settings).

      Pour des options de configuration supplémentaires, consultez la [documentation API](https://auth0.github.io/express-openid-connect).

      <Info>
      Vous pouvez générer une chaîne appropriée pour`LONG\_RANDOM\_STRING` en utilisant `openssl rand -hex 32` dans la ligne de commande.
      </Info>

      <Note>
      ##### Point de contrôle
      Un utilisateur peut désormais se connecter à votre application en visitant la route `/login` fournie par la bibliothèque. Si vous exécutez votre projet sur `localhost:3000`, ce lien sera [`http://localhost:3000/login`](http://localhost:3000/login).
      </Note>
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Pour afficher le profil utilisateur, votre application doit fournir une route protégée.

      Ajoutez le logiciel médiateur `requiresAuth` pour les routes qui nécessitent une authentification. Toute route utilisant ce logiciel médiateur vérifiera s’il existe une session utilisateur valide et, si ce n’est pas le cas, redirigera l’utilisateur vers la page de connexion.

      <Note>
      ##### Point de contrôle
      Un utilisateur peut se déconnecter de votre application en visitant la route `/logout` fournie par la bibliothèque. Si vous exécutez votre projet sur `localhost:3000`, ce lien sera [`http://localhost:3000/logout`](http://localhost:3000/logout).
      </Note>
      </Section>

    ## Étapes suivantes

    Beau travail! Si vous en êtes arrivé là, vous devriez avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Cela conclut notre tutoriel de démarrage rapide, mais il y a tellement plus à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    *   [Auth0 Dashboard](https://manage.auth0.com/#) : apprenez à configurer et gérer votre locataire et vos applications Auth0
    *   [Trousse SDK express-openid-connect](https://github.com/auth0/express-openid-connect) : explorez en détail la trousse SDK utilisée dans ce tutoriel
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) : découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <Server />
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <Server2 />
      </SideMenuSectionItem>

    </SideMenu>
</Recipe>
