---
title: "Configurer un fournisseur de téléphonie personnalisé avec Twilio Verify"
permalink: "configure-a-custom-phone-provider-with-twilio-verify"
'description': "Découvrez comment configurer un fournisseur de téléphonie personnalisé avec Twilio Verify"
'og:title': "Configurer un fournisseur de téléphonie personnalisé avec Twilio Verify"
'og:description': "Découvrez comment configurer un fournisseur de téléphonie personnalisé avec Twilio Verify"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Configurer un fournisseur de téléphonie personnalisé avec Twilio Verify"
'twitter:description': "Découvrez comment configurer un fournisseur de téléphonie personnalisé avec Twilio Verify"
---

Vous pouvez configurer un fournisseur de téléphonie personnalisé avec [Twilio Verify](https://www.twilio.com/docs/verify), qui permet de lutter contre la fraude et de protéger les comptes utilisateurs. Cela permet de configurer Twilio Verify comme votre fournisseur de téléphonie personnalisé.

## Conditions préalables

Vous devez disposer d’un compte [Twilio](https://twilio.com/).

## Configurez le service Twilio Verify

Vous pouvez créer un service Twilio Verify via la [Console Twilio](https://www.twilio.com/console/verify/services) ou [Verify REST API](https://www.twilio.com/docs/verify/api/service#create-a-verification-service). Vous aurez besoin des éléments suivants pour connecter votre fournisseur de téléphonie personnalisé Auth0 à Twilio Verify :

* TWILIO_ACCOUNT_SID
* TWILIO_AUTH_TOKEN
* TWILIO_VERIFY_SID

## Connectez votre fournisseur de téléphonie personnalisé avec Twilio Verify

1. Dans Auth0 Dashboard, accédez à [Branding > Phone Provider (Marque > Fournisseur de téléphonie)](https://manage.auth0.com/dashboard/#/phone/templates/phone/provider). Cela vous amènera à la page **Phone Message Provider (Fournisseur de messages téléphoniques)**.
2. Sélectionnez **Custom (Personnalisé)** comme votre **Phone Provider (Fournisseur de téléphonie)**.
3. Sous **Provider Configuration (Configuration du fournisseur)**, ajoutez l’exemple de code suivant pour permettre à l’API Twilio d’envoyer des messages téléphoniques au numéro de téléphone d’un utilisateur :

```javascript lines
/**
* Handler to be executed while sending a phone notification
* @param {Event} event - Details about the user and the context in which they are logging in.
* @param {CustomPhoneProviderAPI} api - Methods and utilities to help change the behavior of sending a phone notification.
*/
exports.onExecuteCustomPhoneProvider = async (event, api) => {
 const { TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN, TWILIO_VERIFY_SID } = event.secrets;

  const client = require('twilio')(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN);

  // map auth0 voice value to call
  const messageType = event.notification.delivery_method === 'voice' ? 'call' : 'sms';

  const { recipient, code } = event.notification;

  // add this to fix " 1333444999  "
  // "333 444 5555"
  const sanitizedNumber = recipient.replace(/\s/g, '').trim();

  await client.verify.v2.services(TWILIO_VERIFY_SID)
    .verifications.create({
      to: sanitizedNumber,
      channel: messageType,
      customCode: code
    })

};
```

3. Cliquez sur l’icône **Key (Clé)** pour ouvrir le menu **Secrets**. Ajoutez les valeurs suivantes à partir de la configuration de votre service Twilio Verify :

* TWILIO_ACCOUNT_SID
* TWILIO_AUTH_TOKEN
* TWILIO_VERIFY_SID

4. Pour charger la bibliothèque d’aide Twilio, cliquez sur l’icône **Dependency (Dépendance)**. Cliquez ensuite sur le bouton **Add Dependency (Ajouter une dépendance)**. Lorsque la fenêtre contextuelle **Add Dependency (Ajouter une dépendance)** apparaît, saisissez ce qui suit :

* **Nom :** Twilio
* **Version :** la plus récente (devrait se remplir automatiquement)

Lorsque vous cliquez sur **Create (Créer)**, Auth0 recherchera la bibliothèque d’aide Twilio et chargera la dernière version.

5. Cliquez sur **Save (Sauvegarder)**. Lorsque vous cliquez sur **Save (Sauvegarder)**, l’action est automatiquement enregistrée et déployée. Pour tester la configuration personnalisée du fournisseur de téléphonie avant de l’utiliser dans un environnement de production, cliquez sur **Send Test Message (Envoyer un message de test)**.