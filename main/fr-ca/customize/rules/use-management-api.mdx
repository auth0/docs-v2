---
title: "Utiliser Management API à partir des règles"
permalink: "use-management-api"
'description': "Découvrez comment utiliser Management API à partir des règles."
'og:title': "Utiliser Management API à partir des règles"
'og:description': "Découvrez comment utiliser Management API à partir des règles."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Utiliser Management API à partir des règles"
'twitter:description': "Découvrez comment utiliser Management API à partir des règles."
---

<Warning>

La date de fin de vie (EOL) des Règles et des Appels sera le **18 novembre 2026**. Ils ne sont plus disponibles pour les nouveaux locataires créés à partir du **16 octobre 2023**. Les locataires actuels ayant des hooks actifs conserveront l’accès aux produit Hooks jusqu’à la fin de leur durée de vie.

Nous vous conseillons vivement d’utiliser les Actions pour étendre Auth0. Avec les Actions, vous avez accès à des informations de type enrichies, à une documentation intégrée et à des packages `npm` publics, et vous pouvez connecter des intégrations externes qui optimisent votre expérience d’extensibilité globale. Pour en savoir plus sur ce que les Actions proposent, consultez [Comprendre comment fonctionnent Auth0 Actions](/docs/fr-ca/customize/actions/actions-overview).

Pour vous aider dans votre migration, nous proposons des guides qui vous aideront à [migrer des Règles vers les Actions](/docs/fr-ca/customize/actions/migrate/migrate-from-rules-to-actions) et à [migrer des Hooks vers les Actions](/docs/fr-ca/customize/actions/migrate/migrate-from-hooks-to-actions). Nous avons également une page dédiée à la [Migration vers les Actions](https://auth0.com/extensibility/movetoactions) qui met en évidence les comparaisons de fonctionnalités, [une démo des Actions](https://www.youtube.com/watch?v=UesFSY1klrI)  et d’autres ressources pour vous aider dans votre parcours de migration.

Pour en savoir plus sur l’obsolescence des Règles et des Appels, consultez notre article de blog : [Preparing for Rules and Hooks End of Life (Préparation à la fin de vie des règles et des crochets)](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/).

</Warning>

Depuis n’importe quelle [Règle Auth0](/docs/fr-ca/customize/rules) que vous créez, vous pouvez mettre à jour les `app_metadata` ou `user_metadata` d’un utilisateur à l’aide de l’objet `auth0`, qui est une instance spécialement restreinte de `ManagementClient` (définie dans la bibliothèque client Node.js [node-auth0](https://github.com/auth0/node-auth0)) et qui fournit un accès limité à [Management API Auth0](/docs/fr-ca/api/management/v2). Pour en savoir plus, veuillez consulter [Meilleures pratiques d’exécution des règles](/docs/fr-ca/rules-best-practices/rules-execution-best-practices).

Pour accéder à des points de terminaison de <Tooltip href="/docs/fr-ca/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip> supplémentaires depuis les règles, vous devez utiliser une version différente de la bibliothèque.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Le jeton d’accès à Management API, disponible via `auth0.accessToken`, est limité aux permissions `read:users` et `update:users`. Si vous avez besoin d’un éventail plus large de permissions, vous pouvez demander un jeton à l’aide du Flux des identifiants client. Voir [Obtenir des jetons d’accès à Management API pour la production](/docs/fr-ca/secure/tokens/access-tokens/management-api-access-tokens/get-management-api-access-tokens-for-production).

</Callout>

## Accéder à une version plus récente de la bibliothèque

Vous pouvez charger une version plus récente de la bibliothèque cliente Auth0 Node.js en exigeant la version spécifique de la bibliothèque. Pour obtenir des informations sur la version à jour, veuillez consulter le [Référentiel Auth0 Node](https://github.com/auth0/node-auth0) dans Github.

Dans cet exemple, nous chargeons la version `2.9.1` de la bibliothèque, puis interrogeons la liste des utilisateurs et enregistrons les utilisateurs sur la console (à inspecter avec [Extension des journaux WebTask en temps réel](/docs/fr-ca/customize/extensions/real-time-webtask-logs)).

<Warning>

[Rechercher des utilisateurs](/docs/fr-ca/manage-users/user-search/user-search-best-practices) à l’intérieur des règles peut affecter les performances de vos connexions. Nous vous le déconseillons.

</Warning>

```javascript lines
function (user, context, callback) {
  var ManagementClient = require('auth0@2.9.1').ManagementClient;
  var management = new ManagementClient({
    token: auth0.accessToken,
    domain: auth0.domain
  });

  management.getUsers(function (err, users) {
    console.log(users);
    callback(null, user, context);
  });
}
```

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Pour obtenir une liste filtrée des bibliothèques disponibles qui peuvent être paramétrées en fonction des besoins, consultez les [versions de bibliothèque offertes](https://auth0-extensions.github.io/canirequire/#auth0).

</Callout>

