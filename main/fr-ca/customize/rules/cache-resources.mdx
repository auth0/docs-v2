---
title: "Mettre en cache les ressources volumineuses dans les règles"
permalink: "cache-resources"
'description': "Comment mettre en cache les ressources volumineuses dans votre code de règles."
'og:title': "Mettre en cache les ressources volumineuses dans les règles"
'og:description': "Comment mettre en cache les ressources volumineuses dans votre code de règles."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Mettre en cache les ressources volumineuses dans les règles"
'twitter:description': "Comment mettre en cache les ressources volumineuses dans votre code de règles."
---

<Warning>

La date de fin de vie (EOL) des Règles et des Appels sera le **18 novembre 2026**. Ils ne sont plus disponibles pour les nouveaux locataires créés à partir du **16 octobre 2023**. Les locataires actuels ayant des hooks actifs conserveront l’accès aux produit Hooks jusqu’à la fin de leur durée de vie.

Nous vous conseillons vivement d’utiliser les Actions pour étendre Auth0. Avec les Actions, vous avez accès à des informations de type enrichies, à une documentation intégrée et à des packages `npm` publics, et vous pouvez connecter des intégrations externes qui optimisent votre expérience d’extensibilité globale. Pour en savoir plus sur ce que les Actions proposent, consultez [Comprendre comment fonctionnent Auth0 Actions](/docs/fr-ca/customize/actions/actions-overview).

Pour vous aider dans votre migration, nous proposons des guides qui vous aideront à [migrer des Règles vers les Actions](/docs/fr-ca/customize/actions/migrate/migrate-from-rules-to-actions) et à [migrer des Hooks vers les Actions](/docs/fr-ca/customize/actions/migrate/migrate-from-hooks-to-actions). Nous avons également une page dédiée à la [Migration vers les Actions](https://auth0.com/extensibility/movetoactions) qui met en évidence les comparaisons de fonctionnalités, [une démo des Actions](https://www.youtube.com/watch?v=UesFSY1klrI)  et d’autres ressources pour vous aider dans votre parcours de migration.

Pour en savoir plus sur l’obsolescence des Règles et des Appels, consultez notre article de blog : [Preparing for Rules and Hooks End of Life (Préparation à la fin de vie des règles et des crochets)](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/).

</Warning>

Dans les règles, vous pouvez mettre en cache les ressources volumineuses en utilisant l’objet `global`. L’objet `global` persiste après une exécution individuelle, vous pouvez donc réutiliser ce que vous y stockez plutôt que de le créer à chaque fois qu’une règle est exécutée. Toutefois, l’environnement des règles peut être recyclé à tout moment, votre code **doit** donc toujours vérifier que `global` contient ce que vous souhaitez.

Cet exemple montre comment utiliser l’objet `global` pour conserver une connexion MongoDB :

```javascript lines
//If the db object is there, use it.
if (global.db){
  return query(global.db, callback);
}

//If not, get the db (mongodb in this case)
mongo('mongodb://user:pass@mymongoserver.com/my-db',  function (db){
  global.db = db;
  return query(db, callback);
});

//Do the actual work
function query(db, cb){
  // Do something with db
  ...
  return cb(null, user, context);
}
```

Pour en apprendre davantage sur la façon d’utiliser MongoDB, consultez le [Manuel MongoDB](https://docs.mongodb.com/manual/).