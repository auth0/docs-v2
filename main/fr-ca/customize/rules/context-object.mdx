---
title: "Propriétés de l’objet contexte dans les règles"
permalink: "context-object"
'description': "Apprenez-en davantage à propos des propriétés de l’objet « context » des règles, qui stocke les informations à propos des adresses IP, des applications et de la localisation des utilisateurs."
'og:title': "Propriétés de l’objet contexte dans les règles"
'og:description': "Apprenez-en davantage à propos des propriétés de l’objet « context » des règles, qui stocke les informations à propos des adresses IP, des applications et de la localisation des utilisateurs."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Propriétés de l’objet contexte dans les règles"
'twitter:description': "Apprenez-en davantage à propos des propriétés de l’objet « context » des règles, qui stocke les informations à propos des adresses IP, des applications et de la localisation des utilisateurs."
---

<Warning>

La date de fin de vie (EOL) des Règles et des Appels sera le **18 novembre 2026**. Ils ne sont plus disponibles pour les nouveaux locataires créés à partir du **16 octobre 2023**. Les locataires actuels ayant des hooks actifs conserveront l’accès aux produit Hooks jusqu’à la fin de leur durée de vie.

Nous vous conseillons vivement d’utiliser les Actions pour étendre Auth0. Avec les Actions, vous avez accès à des informations de type enrichies, à une documentation intégrée et à des packages `npm` publics, et vous pouvez connecter des intégrations externes qui optimisent votre expérience d’extensibilité globale. Pour en savoir plus sur ce que les Actions proposent, consultez [Comprendre comment fonctionnent Auth0 Actions](/docs/fr-ca/customize/actions/actions-overview).

Pour vous aider dans votre migration, nous proposons des guides qui vous aideront à [migrer des Règles vers les Actions](/docs/fr-ca/customize/actions/migrate/migrate-from-rules-to-actions) et à [migrer des Hooks vers les Actions](/docs/fr-ca/customize/actions/migrate/migrate-from-hooks-to-actions). Nous avons également une page dédiée à la [Migration vers les Actions](https://auth0.com/extensibility/movetoactions) qui met en évidence les comparaisons de fonctionnalités, [une démo des Actions](https://www.youtube.com/watch?v=UesFSY1klrI)  et d’autres ressources pour vous aider dans votre parcours de migration.

Pour en savoir plus sur l’obsolescence des Règles et des Appels, consultez notre article de blog : [Preparing for Rules and Hooks End of Life (Préparation à la fin de vie des règles et des crochets)](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/).

</Warning>

L’objet `context` stocke des informations contextuelles sur la transaction d’authentification en cours, telles que l’adresse IP, l’application ou la localisation de l’utilisateur.

Si vous changez le contenu du jeton en utilisant l’objet « context » au sein d’une règle, vos modifications seront disponibles sous forme de jetons une fois que toutes les règles auront été exécutées. Si votre application nécessite également une authentification multifacteur (<Tooltip href="/docs/fr-ca/glossary?term=multifactor-authentication" tip="Authentification multifacteur (MFA)
Processus d’authentification de l’utilisateur qui utilise un facteur en plus du nom d’utilisateur et du mot de passe, tel qu’un code par SMS." cta="Voir le glossaire">MFA</Tooltip>) ou le consentement de l’utilisateur, ce dernier sera invité à le faire avant que les modifications du jeton ne soient disponibles.

## Propriétés

Les propriétés suivantes sont disponibles pour l’objet `context` dans les règles.

<table class="table">
<thead>
<tr>
<th>Propriété</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`context.tenant`</td>
<td>Une chaîne contenant le nom du locataire</td>
</tr>
<tr>
<td>`context.clientID`</td>
<td>L’identifiant client de l’application dans laquelle l’utilisateur se connecte.</td>
</tr>
<tr>
<td>`context.clientName`</td>
<td>Le nom de l’application (tel que défini dans le tableau de bord).</td>
</tr>
<tr>
<td>`context.clientMetadata`</td>
<td>Un objet qui contient les autres propriétés d’une application. Ses clés et ses valeurs sont des chaînes.</td>
</tr>
<tr>
<td>`context.connectionID`</td>
<td>Une chaîne contenant l’identifiant unique de la connexion.</td>
</tr>
<tr>
<td>`context.connection`</td>
<td>Le nom de la connexion utilisée pour authentifier l’utilisateur (par exemple `twitter` ou `some-g-suite-domain`)</td>
</tr>
<tr>
<td>`context.connectionStrategy`</td>
<td>Le type de connexion. Pour la connexion sociale `connectionStrategy` === `connection`. Pour les connexions d’entreprise, la stratégie sera `waad` (Windows Entra ID), `ad` (Active Directory/LDAP), `auth0` (connexions de base de données), etc.</td>
</tr>
<tr>
<td>`context.connectionOptions`</td>
<td>Un objet représentant les options définies sur la connexion. `connectionOptions.tenant_domain` est une chaîne contenant le domaine utilisé pour l’authentification lors de l’utilisation d’une connexion Entreprise.<br/> `connectionOptions.domain_aliases` est un tableau contenant les domaines optionnels enregistrés comme alias en plus du domaine primaire (spécifié dans la propriété `connectionOptions.tenant_domain`).</td>
</tr>
<tr>
<td>`context.connectionMetadata`</td>
<td>Un objet représentant les métadonnées définies sur la connexion. Ses clés et ses valeurs sont des chaînes.</td>
</tr>
<tr>
<td>`context.samlConfiguration`</td>
<td>Un objet qui contrôle le comportement des points de terminaison <dfn id="react-containers-DefinitionTooltip-1"><span class="tooltip-portal-underlined-word" data-react-universal-portal="">SAML</span></dfn> et WS-Fed. Utile pour le mappage avancé des réclamations et l’enrichissement des jetons (disponible uniquement pour les protocoles `samlp` et `wsfed`)</td>
</tr>
<tr>
<td>`context.protocol`</td>
<td>Le protocole d’authentification. Valeurs possibles :<ul>
<li>`oidc-basic-profile` : le plus utilisé, connexion web</li>
<li>`oidc-implicit-profile` : utilisé sur les appareils mobiles et applications monopages</li>
<li>`oauth2-device-code` : transaction utilisant le <a href="/docs/fr-ca/authorization/flows/device-authorization-flow">flux d’autorisation d’appareil</a></li>
<li> `oauth2-resource-owner` : connexion par nom d’utilisateur/mot de passe (typique pour les connexions à la base de données)</li>
<li>`oauth2-resource-owner-jwt-bearer` : connexion utilisant un JWT porteur signé avec la clé privée de l’utilisateur</li>
<li>`oauth2-password` : connexion utilisant l’échange de mot de passe</li>
<li>`oauth2-refresh-token` : actualisation d’un jeton via l’échange de jeton d’actualisation</li>
<li>`samlp` : Protocole SAML utilisé sur les applications SaaS</li>
<li>`wsfed` : WS-Federation utilisé sur les produits Microsoft comme Office 365</li>
<li>`wstrust-usernamemixed` : Authentification WS-Trust par identifiant/mot de passe (utilisée dans les CRM et Office 365)</li>
<li>`delegation` : lors de l’appel au <a href="/docs/fr-ca/api/authentication#delegation">point de terminaison de délégation</a></li>
<li>`redirect-callback` : lors de la reprise d’une règle de redirection</li></ul></td>
</tr>
<tr>
<td>`context.riskAssessment`</td>
<td>Objet contenant des scores spécifiques (faible, moyen, élevé, neutre) pour les évaluateurs de tentatives de connexion à risque élevé. Voir <a href="/docs/fr-ca/login/mfa/adaptive-mfa/adaptive-mfa-rule-actions">Personnaliser l’authentification multifacteur (MFA) adaptative avec des règles</a>.</td>
</tr>
<tr>
<td>`context.stats`</td>
<td>Un objet contenant des statistiques spécifiques sur l’utilisateur, comme `stats.loginsCount`. Notez que les variables de compteur renvoyées dans le cadre de l’objet `stats` n’augmentent pas pendant <a href="/docs/fr-ca/login/configure-silent-authentication">l’authentification silencieuse</a> (comme lorsque `prompt=none`). Il existe également des scénarios dans lesquels les variables du compteur peuvent augmenter alors qu’une règle ou un ensemble de règles n’est pas exécuté, comme dans le cas d’une authentification cross-origin réussie suivie d’une demande de jeton qui échoue.</td>
</tr>
<tr>
<td>`context.sso`</td>
<td>Cet objet contiendra des informations sur la transaction <dfn id="react-containers-DefinitionTooltip-2"><span class="tooltip-portal-underlined-word" data-react-universal-portal="">d’authentification unique (SSO)</span></dfn>, si disponibles <ul>
<li>`with_auth0` : lorsqu’un utilisateur se connecte via SSO à une application où le paramètre `Use Auth0 instead of the IdP to do Single Sign-On` est activé (uniquement pour les locataires hérités).</li>
<li>`with_dbconn` : une connexion SSO pour un utilisateur qui s’est connecté via une connexion à la base de données.</li>
<li>`current_clients` : ID clients utilisant le SSO.</li></ul></td>
</tr>
<tr>
<td>`context.accessToken`</td>
<td>Un objet représentant les options définies sur le <dfn id="react-containers-DefinitionTooltip-3"><span class="tooltip-portal-underlined-word" data-react-universal-portal="">jeton d’accès </span></dfn>. Vous pouvez utiliser cet objet pour <a href="/docs/fr-ca/get-started/apis/scopes/sample-use-cases-scopes-and-claims#add-custom-claims-to-a-token">ajouter des demandes personnalisées d’espace de noms </a> au jeton d’accès. `context.accessToken.scope` peut être utilisé pour <a href="/docs/fr-ca/rules/examples#modify-scope-of-access-token">modifier les permissions renvoyées par le jeton d’accès</a>. Lorsqu’il est fourni, il s’agit d’un tableau contenant les autorisations au format chaîne de caractères. Les demandes personnalisées seront incluses dans le jeton d’accès une fois que toutes les règles auront été exécutées.</td>
</tr>
<tr>
<td>`context.idToken`</td>
<td>Un objet représentant les options définies sur le <a href="/docs/fr-ca/security/tokens/id-tokens">jeton d’ID</a>. Utilisé pour ajouter des demandes personnalisées <a href="/docs/fr-ca/security/tokens/json-web-tokens/create-namespaced-custom-claims">avec espace de noms</a> au jeton d’ID. Les demandes personnalisées seront incluses dans le jeton d’ID une fois que toutes les règles auront été exécutées.</td>
</tr>
<tr>
<td>`context.multifactor`</td>
<td>Objet représentant les paramètres multifacteurs utilisés <a href="/docs/fr-ca/mfa">pour la mise en œuvre de MFA contextuelle</a>.</td>
</tr>
<tr>
<td>`context.redirect`</td>
<td>L’objet utilisé pour <a href="/docs/fr-ca/rules/redirect-users#how-to-implement-a-redirect">mettre en œuvre la redirection d’un utilisateur à partir d’une règle</a>.</td>
</tr>
<tr>
<td>`context.sessionID`</td>
<td>Identification interne de la session d’authentification. La valeur n’est conservée que si `prompt=none` est utilisé dans la demande d’autorisation. Notez que l’ID de session peut changer <strong>après</strong> l’exécution de la règle sur d’autres flux, de sorte que la valeur disponible dans `context.sessionID` peut ne pas correspondre au nouvel ID de session que l’utilisateur recevra. Cette valeur n’a de sens que lorsque `prompt=none` est utilisé.</td>
</tr>
<tr>
<td>`context.request`</td>
<td>Un objet contenant des informations utiles sur la demande. Il peut également être défini comme suit :   `undefined`. Il possède les propriétés suivantes :<ul>
<li>`userAgent` : l’agent utilisateur de l’application qui tente de se connecter.</li>
<li>`ip` : l’adresse IP source de l’utilisateur tentant de se connecter. Nous exposons les adresses IPv6 sur nos points de terminaison publics (p. ex., travel0.us.auth0.com). Si une demande provient d’une machine qui prend en charge IPv6, elle contiendra une adresse IPv6. Si vous manipulez manuellement des adresses IP, nous vous suggérons d’utiliser la bibliothèque <a href="https://www.npmjs.com/package/ipaddr.js/v/1.9.0">ipaddr.js@1.9.0</a>.</li>
<li>`hostname` : le nom d’hôte utilisé pour le flux d’authentification.</li>
<li>`query` : un objet contenant les propriétés de la chaîne de requête de la transaction de connexion envoyée par l’application.</li>
<li>`body` : le corps de la requête POST pour les transactions de connexion utilisant les protocoles `oauth2-resource-owner`, `oauth2-resource-owner-jwt-bearer` ou `wstrust-usernamemixed`.</li>
<li>`geoip` : objet contenant des informations géographiques sur l’IP. Il possède les propriétés suivantes :<ul>
<li>`country_code` : un code à deux caractères pour le pays associé à l’adresse IP.</li>
<li>`country_code3` : un code à trois caractères pour le pays associé à l’adresse IP.</li>
<li>`country_name` : le nom du pays associé à l’adresse IP.</li>
<li>`city_name` : le nom de la ville associé à l’adresse IP.</li>
<li>`latitude` : la latitude associée à l’adresse IP.</li>
<li>`longitude` : la longitude associée à l’adresse IP.</li>
<li>`time_zone` : le fuseau horaire associé à l’adresse IP.</li>
<li>`continent_code` : un code à deux caractères pour le continent associé à l’adresse IP.</li>
<li>`subdivision_code` : le code ISO 3166-2 de la subdivision/région de premier niveau.</li>
<li>`subdivision_name` : Le nom anglais de cette subdivision/région.</li></ul></li></ul></td>
</tr>
<tr>
<td>`context.primaryUser`</td>
<td>L’identifiant unique du compte principal de l’utilisateur. Utilisé pour <a href="/docs/fr-ca/users/user-account-linking#automatic-account-linking">relier les comptes d’utilisateurs</a> de différents fournisseurs d’identité.</td>
</tr>
<tr>
<td>`context.authentication`</td>
<td>
Un objet contenant des informations relatives à la transaction d’authentification avec les propriétés suivantes :<br/><br/>
`methods` : un tableau des objets contenant les méthodes d’authentification utilisées par un utilisateur au cours de sa session. Par exemple, un utilisateur qui a effectué une authentification par mot de passe suivie d’une authentification multifacteur peut disposer des méthodes suivantes :<br/>
```
[
  {
    "name": "pwd",
    "timestamp": 1434454643024
  },
  {
    "name": "mfa",
    "timestamp": 1534454643881
  }
]
```
<br/>
Les objets de méthode contiendront les propriétés suivantes :
<ul>
<li>
`name` : une chaîne de caractères représentant le nom de la méthode d’authentification qui a été complétée. Il peut s’agir de l’une des valeurs suivantes (d’autres valeurs pourront être prises en charge à l’avenir) :
<br/>
<ul>
<li>
`federated` : une connexion sociale ou d’entreprise a été utilisée pour authentifier l’utilisateur
</li>
<li>
`pwd` : une connexion à une base de données a été utilisée pour authentifier l’utilisateur
</li>
<li>`sms` : une connexion <dfn id="react-containers-DefinitionTooltip-4"><span class="tooltip-portal-underlined-word" data-react-universal-portal="">sans mot de passe</span></dfn> par SMS a été utilisée pour authentifier l’utilisateur</li>
<li>`email` : une connexion sans mot de passe par courriel a été utilisée pour authentifier l’utilisateur</li>
<li>`mfa` : l’utilisateur a complété une authentification multifacteur</li>
</ul>
</li>
<li>`timestamp` : un entier indiquant le moment (en secondes) où la méthode d’authentification a eu lieu, en époque Unix</li>
</ul>
<p>Vous pouvez voir un exemple d’utilisation de la propriété `context.authentication.methods` dans la règle <a href="https://github.com/auth0/rules/blob/master/src/rules/require-mfa-once-per-session.js">Exiger une authentification multifacteur une fois par session</a>.</p>
</td>
</tr>
<tr>
<td>`context.authorization`</td>
<td>Un objet contenant des informations relatives à la transaction d’autorisation avec les propriétés suivantes :<ul>
<li>`roles` : un tableau de chaînes contenant les noms des <dfn id="react-containers-DefinitionTooltip-5"><span class="tooltip-portal-underlined-word" data-react-universal-portal="">rôles</span></dfn> attribués à un utilisateur. Vous pouvez voir un exemple de cas d’utilisation utilisant la propriété `context.authorization.roles` pour ajouter des rôles aux jetons dans <a href="/docs/fr-ca/authorization/authorization-policies/sample-use-cases-rules-with-authorization#add-user-roles-to-tokens">exemples de cas d’utilisation : Règles avec autorisation</a>.</li></ul></td>
</tr>
<tr>
<td>`context.organization`</td>
<td>Objet contenant des informations relatives à l’organisation. Comprend les propriétés suivantes :<ul>
<li>`id` : Chaîne contenant l’ID de l’organisation avec laquelle l’utilisateur se connecte.</li><li>`name` : Chaîne contenant le nom de l’organisation (tel que défini dans <dfn id="react-containers-DefinitionTooltip-6"><span class="tooltip-portal-underlined-word" data-react-universal-portal="">Auth0 Dashboard</span></dfn>).</li><li>`metadata` : Dictionnaire de paires clé/valeur de chaînes contenant d’autres propriétés de l’organisation.</li></ul></td>
</tr>
</tbody>
</table>

## En savoir plus

* [Règles de débogage](/docs/fr-ca/customize/rules/debug-rules)
* [Propriétés de l’objet utilisateur dans les règles](/docs/fr-ca/customize/rules/user-object-in-rules)
* [Exemples de cas d’utilisation : permissions et demandes](/docs/fr-ca/get-started/apis/scopes/sample-use-cases-scopes-and-claims)