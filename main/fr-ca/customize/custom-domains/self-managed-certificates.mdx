---
title: "Configurer des domaines personnalisés avec des certificats autogérés"
permalink: "self-managed-certificates"
'description': "Apprenez à configurer des domaines personnalisés où vous êtes responsable des certificats TSL (SSL), du serveur mandataire inverse pour gérer la terminaison SSL et du transfert des requêtes vers Auth0."
'og:title': "Configurer des domaines personnalisés avec des certificats autogérés"
'og:description': "Apprenez à configurer des domaines personnalisés où vous êtes responsable des certificats TSL (SSL), du serveur mandataire inverse pour gérer la terminaison SSL et du transfert des requêtes vers Auth0."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Configurer des domaines personnalisés avec des certificats autogérés"
'twitter:description': "Apprenez à configurer des domaines personnalisés où vous êtes responsable des certificats TSL (SSL), du serveur mandataire inverse pour gérer la terminaison SSL et du transfert des requêtes vers Auth0."
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Vous devez avoir un abonnement Enterprise pour gérer les certificats dans votre domaine personnalisé. Pour en savoir plus, lisez [Tarification](https://auth0.com/pricing/) et [connexion](/docs/fr-ca/authenticate/login) Auth0.

</Callout>

Si vous choisissez de gérer les certificats pour vos domaines personnalisés sans assistance d’Auth0, vous devez savoir comment gérer votre propre serveur mandataire et vos certificats pour les connexions entrantes nécessitant plusieurs enregistrements DNS sur le domaine. Vous devez acheter ou fournir les certificats et gérer vous-même les renouvellements. Vous aurez également besoin d’un serveur mandataire inverse où le certificat sera installé. Nous accepterons le trafic en provenance du serveur mandataire après la vérification du domaine.

Choisissez cette option pour :

* Avoir plus de contrôle sur vos certificats (comme le choix de votre propre autorité de certification ou l’expiration des certificats).
* Activer une surveillance supplémentaire de vos appels API vers Auth0.

Pour configurer votre domaine personnalisé à l’aide de certificats autogérés, vous devez fournir votre nom de domaine à Auth0, confirmer que vous êtes le propriétaire de ce domaine et configurer le serveur mandataire inverse. Vous devrez configurer les fonctions d’Auth0 afin de commencer à utiliser votre domaine personnalisé suite à sa mise en œuvre.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Votre proxy vers Auth0 doit utiliser TLS (SSL) version 1.2 ou ultérieure.

</Callout>

## Indiquez votre nom de domaine à Auth0

1. Accédez à [Dashboard > Settings (Configurations) > Custom Domains (Domaines personnalisés)](https://manage.auth0.com/#/tenant/custom_domains) ou [Dashboard > Branding (Image de marque) > Custom Domains (Domaines personnalisés)](https://manage.auth0.com/#/custom_domains). Saisissez votre domaine personnalisé dans la zone prévue à cet effet et sélectionnez **Self-managed Certificates (Certificats autogérés)** dans le menu déroulant.
2. Cliquez sur **Add Domain (Ajouter un domaine)**.
   Vous ne pouvez ajouter qu’un seul domaine par locataire, même si le bouton **Add Domain (Ajouter un domaine)** est toujours affiché après l’ajout d’un domaine.

## Vérifier la propriété

Avant de pouvoir utiliser le domaine avec Auth0, vous devez vérifier que vous en êtes le propriétaire.

1. Rendez-vous à [Tableau de bord > Image de marque > Domaines personnalisés](https://manage.auth0.com/#/branding/custom_domains).

   <Frame>![Auth0 Branding Custom Domains Self-Managed Certificate Verify Domain](/images/fr-ca/cdy7uua7fh8z/4XhEmQwKfoqydOldfHnnud/c63a58c72f79b4d19cd417f70ba262cc/Custom_Domains_-_Self_-_English.png)</Frame>

2. Ajoutez les informations de vérification TXT à l’enregistrement DNS de votre domaine.
   Ces étapes peuvent varier en fonction de votre hébergeur de domaine.

   1. Gardez la page de domaine personnalisé Auth0 ouverte dans votre navigateur afin de pouvoir copier les valeurs.
   2. Connectez-vous à votre service de gestion de domaine.
   3. Créez un nouvel enregistrement et enregistrez-le avec ces paramètres

      <table class="table"><thead>
      <tr>
      <th><strong>Paramètre</strong></th>
      <th><strong>Valeur</strong></th>
      </tr>
      </thead>
      <tbody>
      <tr>
      <td>Type d’enregistrement</td>
      <td>TXT</td>
      </tr>
      <tr>
      <td>Nom</td>
      <td>Copiez et collez la valeur de l’<strong>enregistrement TXT</strong> de votre domaine depuis Auth0.</td>
      </tr>
      <tr>
      <td>Time to Live (TTL)</td>
      <td>Utiliser la valeur par défaut.</td>
      </tr>
      <tr>
      <td>Valeur</td>
      <td>Copiez et collez la valeur du <strong>contenu TXT</strong> de votre domaine depuis Auth0.</td>
      </tr>
      </tbody>
      </table>

       :
3. Cliquez sur **Vérify (Vérifier)** pour continuer.<br/><br/>

   En fonction de vos paramètres DNS, il peut s’écouler quelques minutes avant qu’Auth0 puisse vérifier votre domaine.<br/><br/>

   Si Auth0 a vérifié avec succès votre nom de domaine, une fenêtre de confirmation s’affiche. Enregistrez les informations fournies dans cette fenêtre, en particulier la valeur `cname-api-key`, puisque c’est la **seule** fois que vous verrez cette valeur.

   <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

   Pour des raisons de sécurité, cette valeur est hachée lorsqu’elle est stockée, de sorte qu’elle ne peut pas être récupérée. Si vous ne parvenez pas à capturer `cname-api-key` à ce stade, vous devrez recréer les domaines personnalisés.

   </Callout>

   Le processus de vérification est terminé et votre domaine personnalisé devrait être prêt à être utilisé dans un délai de 1 à 2 minutes. Si vous ne parvenez pas à terminer le processus de vérification dans un délai de trois jours, répétez ces étapes.

## Configurer le serveur mandataire inverse

Le serveur mandataire inverse récupère des ressources au nom de votre application à partir d’un ou de plusieurs serveurs. Ces ressources sont ensuite renvoyées à l’application, donnant l’impression qu’elles proviennent du serveur mandataire lui-même.

Vous pouvez utiliser un service tel que [Cloudflare](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-cloudflare-for-use-as-reverse-proxy), [Azure CDN](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-azure-cdn-for-use-as-reverse-proxy), [Google Cloud Platform](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-gcp-as-reverse-proxy), ou [AWS Cloudfront](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-aws-cloudfront-for-use-as-reverse-proxy) et configurer les paramètres de votre domaine personnalisé. Vous ajouterez la nouvelle valeur CNAME à votre DNS pour votre domaine personnalisé, pointant vers le nom de domaine du serveur mandataire inverse pour la distribution.

1. Après avoir créé les paramètres de serveur mandataire inverse sur votre service, rendez-vous à l’onglet [Auth0 Dashboard > Image de marque > Domaines personnalisés](https://manage.auth0.com/#/branding/custom_domains).
2. Ajoutez un nouvel enregistrement CNAME à votre DNS pour votre domaine personnalisé pointant vers le nom de domaine de service pour votre distribution. Vous pouvez le trouver en cherchant **Distribution ID (Identifiant de distribution)** dans la configuration de votre serveur mandataire inverse.
   Une fois ajouté, l’enregistrement CNAME doit être présent à tout moment pour éviter un éventuel problème lors du renouvellement du certificat.
3. La manière dont vous configurez le serveur mandataire varie en fonction du service que vous utilisez. Vous devrez probablement configurer les types de paramètres suivants :

* [Distribution](#distribution-settings)
* [En-têtes personnalisés d’origine](#origin-custom-header-settings)
* [Nom d’hôte d’origine](#origin-hostname-settings)
* [Comportement du cache par défaut](#default-cache-behavior-settings)

### Paramètres de distribution

<table class="table"><thead>
<tr>
<th><strong>Paramètre</strong></th>
<th><strong>Valeur</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Nom du domaine d’origine</td>
<td>Définissez ceci sur la valeur <strong>Nom du domaine d’origine</strong> obtenue à partir du Auth0 Dashboard au cours du processus de configuration des domaines personnalisés.</td>
</tr>
<tr>
<td>ID de l’origine</td>
<td>Une description pour l’origine. Cette valeur vous permet de distinguer plusieurs origines dans la même distribution et doit donc être unique.</td>
</tr>
<tr>
<td>Politique de protocole d’origine</td>
<td>Définir à `HTTPS Only`.</td>
</tr>
<tr>
<td>Noms de domaine alternatifs (CNAMEs)</td>
<td>Définissez votre nom de domaine personnalisé (le même que celui que vous avez configuré dans le Auth0 Dashboard.</td>
</tr>
</tbody>
</table>

### Paramètres d’en-têtes personnalisés d’origine

<table class="table"><thead>
<tr>
<th><strong>Paramètre</strong></th>
<th><strong>Valeur</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Nom de l’en-tête</td>
<td>Défini sur `cname-api-key`.</td>
</tr>
<tr>
<td>Valeur</td>
<td>Définie sur la valeur de clé API CNAME que vous avez reçue immédiatement suite à la vérification de propriété de votre nom de domaine avec Auth0.</td>
</tr>
</tbody>
</table>

### Paramètres de nom d’hôte d’origine

<table class="table"><thead>
<tr>
<th><strong>Paramètre</strong></th>
<th><strong>Valeur</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Nom d’hôte d’origine</td>
<td>Saisissez le `{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.us.auth0.com`, en vous assurant de remplacer `&lt;CUSTOM_DOMAIN_ID&gt;` par la valeur du nom de domaine d’origine (identifiant de domaine personnalisé) que vous avez reçu d’Auth0 lors de la configuration du nouveau domaine personnalisé. Si vos locataires ne se trouvent pas dans la région des États-Unis, utilisez l’une des options suivantes : <ul><li>EU: `{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.eu.auth0.com`</li><li>AU: `{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.au.auth0.com`</li><li>JP: `{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.jp.auth0.com`</li></ul> Par exemple, si votre identifiant de domaine personnalisé CUSTOM_DOMAIN_ID est :<br/><br/> `cd_TXIdNgQ07HrAFVmz` <br/><br/>Pour un locataire des E.-U., le nom d’hôte d’origine devrait être :<br/><br/>`E.-U. : {yourTenant}-cd-txIdngq07hrafvmz.edge.tenants.us.auth0.com`</td>
</tr>
<tr>
<td>En-tête de l’hôte</td>
<td>Utilisez le nom que vous avez fourni comme nom d’hôte d’origine.</td>
</tr>
</tbody>
</table>

Pour plus d’informations sur la récupération des détails de votre domaine personnalisé, consultez [Obtenir des configurations de domaine personnalisées](https://auth0.com/docs/api/management/v2/custom-domains/get-custom-domains).

### Paramètres du comportement du cache par défaut

<table>
  <thead>
    <tr>
      <th><strong>Setting</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Politique de protocole de visualisation</td>
      <td>Sélectionner <strong>Rediriger HTTP vers HTTPS</strong>.</td>
    </tr>
    <tr>
      <td>Méthodes HTTP autorisées</td>
      <td>Sélectionnez <strong>GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE</strong>.</td>
    </tr>
    <tr>
      <td>Cache basé sur les en-têtes de requête sélectionnés</td>
      <td>Sélectionnez <strong><em>Allow list</em> (Autoriser la liste)</strong>.</td>
    </tr>
    <tr>
      <td>Autoriser les en-têtes de liste</td>
      <td>Les en-têtes suivants devraient être autorisées : <code>User-Agent</code>, <code>Origin</code>, <code>Referer</code>, <code>Authorization</code>, <code>Accept</code>, et <code>Accept-Language</code>.</td>
    </tr>
    <tr>
      <td>Faire suivre les témoins</td>
      <td>Sélectionner <strong>Tous</strong>.</td>
    </tr>
    <tr>
      <td>Transfert et mise en cache de la chaîne de requête</td>
      <td>Sélectionnez <strong><em>Forward all, cache based on all</em> (Transférer tout, mettre en cache sur la base du tout)</strong>.</td>
    </tr>
  </tbody>
</table>

## Étapes supplémentaires pour les fonctions spécifiques d’Auth0

Il y a des étapes de configuration supplémentaires à suivre en fonction des fonctionnalités Auth0 que vous utilisez. Pour en savoir plus, veuillez consulter [Configure Features to Use Custom Domains (Configurer les fonctionnalités pour utiliser les domaines personnalisés)](/docs/fr-ca/customize/custom-domains/configure-features-to-use-custom-domains).

Cloudflare utilise une fonctionnalité appelée CNAME Flattening, qui affecte la vérification Auth0 et le renouvellement des certificats dans la manière dont elle traite les enregistrements DNS. Nous vous recommandons de désactiver CNAME Flattening, sauf en cas d’absolue nécessité. Pour en savoir plus, consultez[Documentation Cloudflare](https://support.cloudflare.com/hc/en-us/articles/200169056-Understand-and-configure-CNAME-Flattening).

## En savoir plus

* [Configurer des fonctionnalités pour utiliser des Domaines personnalisés](/docs/fr-ca/customize/custom-domains/configure-features-to-use-custom-domains)
* [Configurer Google Cloud Platform avec un équilibrage de charge en tant que proxy inverse](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-gcp-as-reverse-proxy)
* [Configurer Cloudflare en tant que proxy inverse](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-cloudflare-for-use-as-reverse-proxy)
* [Configurer AWS CloudFront en tant que proxy inverse](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-aws-cloudfront-for-use-as-reverse-proxy)
* [Configurer CDN en tant que proxy inverse](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-azure-cdn-for-use-as-reverse-proxy)
* [Configurer Akamai en tant que proxy inverse.](/docs/fr-ca/customize/custom-domains/self-managed-certificates/configure-akamai-for-use-as-reverse-proxy)