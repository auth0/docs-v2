---
title: "Déclencheurs de notification MFA"
permalink: "mfa-notifications-trigger"
'description': "Découvrez l’action du flux d’envoi de message téléphonique et le déclencheur d’action envoi-message-téléphonique, qui s’exécute pour le processus d’inscription et de contestation si vous avez utilisé SMS comme facteur d’authentification multifacteur (MFA)."
'og:title': "Déclencheurs de notification MFA"
'og:description': "Découvrez l’action du flux d’envoi de message téléphonique et le déclencheur d’action envoi-message-téléphonique, qui s’exécute pour le processus d’inscription et de contestation si vous avez utilisé SMS comme facteur d’authentification multifacteur (MFA)."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Déclencheurs de notification MFA"
'twitter:description': "Découvrez l’action du flux d’envoi de message téléphonique et le déclencheur d’action envoi-message-téléphonique, qui s’exécute pour le processus d’inscription et de contestation si vous avez utilisé SMS comme facteur d’authentification multifacteur (MFA)."
---

Le Flux d’envoi de message téléphonique vous permet d’exécuter le code lorsque vous utilisez un SMS/Voix comme facteur d’[authentification multifacteur (MFA)](/docs/fr-ca/secure/multi-factor-authentication). Lorsque vous utilisez un [fournisseur personnalisé](/docs/fr-ca/secure/multi-factor-authentication/multi-factor-authentication-factors/configure-sms-voice-notifications-mfa#custom-phone-messaging-providers) pour envoyer des messages, ce déclencheur de Flux `d’envoi de message téléphonique` est nécessaire à la configuration de votre fournisseur personnalisé.

<Frame>![Diagram of the Actions Send Phone Message Flow.](/images/fr-ca/cdy7uua7fh8z/FSkVXDdknDJq1hsK08EYu/e031ec0067a5460afae8d9ed5d462288/send-phone-message-flow.png)</Frame>

Les actions de ce flux bloquent (synchrones), ce qui signifie qu’elles s’exécutent dans le cadre du processus d’un déclencheur et qu’elles empêcheront le reste du pipeline Auth0 de s’exécuter jusqu’à ce que l’action soit complétée.

## Déclencheurs

### Envoi de message téléphonique

Le déclencheur d’`send-phone-message` s’exécutera pour le processus d’inscription et de contestation (`event.message_options.action`). Il exécutera également pour le message de type `vocal` lorsque vous utilisez la Nouvelle expérience pour la connexion universelle (`event.message_options.message_type === 'voice'`).

#### Références

* [Objet Event](/docs/fr-ca/customize/actions/explore-triggers/mfa-notifications-trigger/send-phone-message-event-object) : Fournit des renseignements contextuels à propos du message à envoyer et de l’utilisateur à mettre au défi ou à inscrire.
* [Objet API](/docs/fr-ca/customize/actions/explore-triggers/mfa-notifications-trigger/send-phone-message-api-object) : fournit des méthodes permettant de modifier le comportement du flux.

## Cas d’utilisation courants

### Utilisez un fournisseur de SMS personnalisé

```javascript lines
const AWS = require("aws-sdk");

/**
 * Handler that will be called during the execution of a SendPhoneMessage flow.
 *
 * @param {Event} event - Details about the user and the context in which they are logging in.
 */
exports.onExecuteSendPhoneMessage = async (event) => {
  const text = event.message_options.text;
  const recipient = event.message_options.recipient;

  const awsSNS = new AWS.SNS({
    apiVersion: "2010-03-31",
    region: event.secrets.AWS_REGION,
    credentials: new AWS.Credentials(event.secrets.AWS_ACCESS_KEY_ID, event.secrets.AWS_SECRET_ACCESS_KEY)
  });

  const params = { Message: text, PhoneNumber: recipient };

  return awsSNS
    .publish(params)
    .promise();
};
```

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Pour que cette action s’exécute correctement, l’action doit contenir des secrets nommés `AWS_REGION`, `AWS_ACCESS_KEY_ID` et `AWS_SECRET_ACCESS_KEY` et doit avoir une dépendance à l’égard du package NPM `aws-sdk`.

</Callout>

