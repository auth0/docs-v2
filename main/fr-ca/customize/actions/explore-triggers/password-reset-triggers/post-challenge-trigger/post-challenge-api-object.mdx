---
title: "Déclencheurs d’actions : après le défi-réponse - Objet API"
permalink: "post-challenge-api-object"
'description': "En savoir plus sur l’objet API comme déclencheur de l’Action post défi-réponse de la réinitialisation du mot de passe."
'og:title': "Déclencheurs d’actions : après le défi-réponse - Objet API"
'og:description': "En savoir plus sur l’objet API comme déclencheur de l’Action post défi-réponse de la réinitialisation du mot de passe."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Déclencheurs d’actions : après le défi-réponse - Objet API"
'twitter:description': "En savoir plus sur l’objet API comme déclencheur de l’Action post défi-réponse de la réinitialisation du mot de passe."
---

L’objet API pour le déclencheur d’Actions `post-challenge` comprend :

## `api.access`

Modifiez l’accès à la connexion de l’utilisateur, par exemple en rejetant la tentative de connexion.

### `api.access.deny(reason)`

Marquez la tentative de connexion en cours comme refusée. Cela empêche l’utilisateur final
de terminer le processus de connexion. Cela n’annule **pas** les autres effets secondaires liés à l’utilisateur demandés par cette action, tels que les changements de métadonnées. Le flux de connexion s’arrête immédiatement après l’exécution de
cette action et aucune autre action ne sera exécutée.

Renvoie une référence à l’objet `api`.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`reason`</td>
<td>
<p>
<em>Chaîne</em>. Une explication lisible par l’homme du rejet de la
            connexion. Peut être présentée directement dans les interfaces des utilisateurs finaux.
          </p>
</td>
</tr>
</tbody>
</table>

## `api.authentication`

Demande de modifications de l’état d’authentification de la session de l’utilisateur actuel.

### `api.authentication.challengeWith(factor, [options])`

Demander un défi pour l’authentification multifacteur à l’aide du facteur fourni et de facteurs supplémentaires facultatifs.

Lorsqu’un défi multifacteur est demandé, les actions suivantes ne seront pas exécutées tant que l’utilisateur n’aura pas répondu à ce défi. Un utilisateur peut relever ce défi en :

* Ayant déjà réalisé un défi pour un facteur de correspondance dans cette transaction.
* Complétant avec succès la vérification du facteur par défaut.
* Complétant avec succès la vérification pour l’un des facteurs optionnels décrits dans `additionalFactors`.

**Remarque :** Si l’utilisateur n’a pas encore satisfait aux exigences du défi, un écran de défi lui est présenté. Si `additionalFactors` sont fournis, l’utilisateur peut choisir de s’authentifier avec un facteur différent du défi par défaut.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`factor`</td>
<td>
<p>
<em>FactorSelector</em>. Objet décrivant le type de facteur (et ses options) à utiliser pour l’épreuve initiale.
          </p>
</td>
</tr>
<tr>
<td>`options`</td>
<td>
<p>
            Objet facultatif. Options supplémentaires qui peuvent également spécifier `additionalFactors` en tant que propriété.
          </p>
</td>
</tr>
</tbody>
</table>

### `api.authentication.challengeWithAny([factors])`

Demander un défi pour l’authentification multifacteur à l’aide de l’un des facteurs fournis ou de facteurs supplémentaires facultatifs.

Lorsqu’un défi multifacteur est demandé, les actions suivantes ne seront pas exécutées tant que l’utilisateur n’aura pas répondu à ce défi. Un utilisateur peut relever ce défi en :

* Ayant déjà réalisé un défi pour un facteur de correspondance dans cette transaction.
* Complétant avec succès la vérification du facteur par défaut.

**Remarque :** Si l’utilisateur n’a pas encore satisfait aux exigences du défi, un écran de défi lui est présenté. S’il existe un facteur spécifique préféré, la `api.authentication.challengeWith()` méthode est privilégiée.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`factor`</td>
<td>
<p>
<em>FactorSelector[]</em>. Un tableau de facteurs.
          </p>
</td>
</tr>
</tbody>
</table>

## `api.cache`

Stockez et récupérez des données qui persistent entre les exécutions.

### `api.cache.delete(key)`

Supprime un enregistrement décrivant une valeur mise en cache à la clé fournie, si elle existe.

Renvoie un objet `CacheWriteResult` avec  `type: "success"` si une valeur a été supprimée du cache. Une opération échouée renvoie `type: "error"`.

En cas d’erreur, l’objet renvoyé comprend une propriété `code` qui indique la nature de l’échec.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p><em>Chaîne</em>. La clé de l’enregistrement est stockée dans le cache.</p>
</td>
</tr>
</tbody>
</table>

### `api.cache.get(key)`

Récupère un enregistrement décrivant une valeur mise en cache à la
`key`fournie, si elle existe. Si un enregistrement est trouvé, la valeur mise en cache peut être
trouvée dans la propriété `value` de l’objet retourné.

Renvoie un enregistrement de cache si un élément est trouvé dans le cache pour la
`key`. Les enregistrements du cache sont des objets contenant les propriétés suivantes :

* `value` Valeur mise en cache
* `expires_at` Date d’expiration maximale de l’enregistrement en millisecondes depuis l’époque Unix.

**Important :**
Ce cache est conçu pour des données de courte durée et éphémères. Les éléments peuvent ne pas être disponibles lors de transactions ultérieures, même s’ils sont dans la limite de leur durée de vie.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p><em>Chaîne</em>. La clé de l’enregistrement est stockée dans le cache.</p>
</td>
</tr>
</tbody>
</table>

### `api.cache.set(key, value, [options])`

Stockez ou mettez à jour une valeur de chaîne dans le cache à la clé spécifiée.

Les valeurs stockées dans ce cache sont limitées au déclencheur dans lequel elles sont définies.
Elles sont soumises aux
[Limites de cache des actions](/docs/fr-ca/customize/actions/limitations).

Les valeurs stockées de cette manière peuvent avoir des durées de vie allant jusqu’aux valeurs spécifiées
`ttl` ou `expires_at`. Si aucune durée de vie
n’est spécifiée, une durée de vie de 15 minutes est utilisée par défaut. Les durées de vie ne peuvent pas dépasser la durée maximale indiquée dans les
[Limites de cache des actions](/docs/fr-ca/customize/actions/limitations).

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p><em>Chaîne</em>. La clé de l’enregistrement est stockée dans le cache.</p>
</td>
</tr>
<tr>
<td>`value`</td>
<td>
<p><em>Chaîne</em>. La valeur de l’enregistrement à stocker.</p>
</td>
</tr>
<tr>
<td>`options`</td>
<td>
<p><em>Objet facultatif</em>. Options permettant d’ajuster le comportement du cache.</p>
</td>
</tr>
<tr>
<td>`options.expires_at`</td>
<td>
<p>
<em>Numéro facultatif</em>. Le temps d’expiration absolu en millisecondes
            depuis l’époque Unix. Bien que les enregistrements mis en cache puissent être expulsés plus tôt, ils ne resteront jamais au-delà du             `expires_at`.
          </p>
<p>
<strong>Remarque :</strong> Cette valeur ne doit pas être fournie si la valeur `ttl` est fournie. Si des valeurs sont fournies pour les deux options, c’est l’échéance la plus ancienne qui est retenue.
          </p>
</td>
</tr>
<tr>
<td>`options.ttl`</td>
<td>
<p>
<em>Numéro facultatif</em>. Valeur de la durée de vie de cette entrée de cache
            en millisecondes. Bien que les valeurs mises en cache puissent être expulsées plus tôt, elles ne resteront jamais au-delà de la durée de validité `ttl`.
          </p>
<p>
<strong>Remarque :</strong> Cette valeur ne doit pas être fournie si la valeur `expires_at` est fournie. Si des valeurs sont fournies pour les deux options, c’est l’échéance la plus ancienne qui est retenue.
          </p>
</td>
</tr>
</tbody>
</table>

## `api.redirect`

### `api.redirect.encodeToken(options)`

Créer un jeton de session utilisable comme paramètre de chaîne de requête pour la redirection vers la cible (via `sendUserTo`) et contenant des données dont l’authenticité doit pouvoir être prouvée par le point de terminaison cible. Le point de terminaison cible
peut vérifier l’authenticité et l’intégrité des données en contrôlant la signature du jeton
JWT à l’aide d’un secret partagé.

Renvoie une chaîne JWT.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`options`</td>
<td>
<p>
<em>Options</em>. Configurer la manière dont les données sensibles sont encodées dans les
              paramètres de requête de l’URL résultante.
            </p>
</td>
</tr>
<tr>
<td>`options.expiresInSeconds`</td>
<td>
<p>
<em>Numéro</em>. Nombre de secondes avant l’expiration du jeton. La valeur par défaut est 900. 
            </p>
</td>
</tr>
<tr>
<td>`options.payload`</td>
<td>
<p>
<em>Options</em>. Données destinées à être transmises à la cible de
              la redirection et dont l’authenticité et l’intégrité doivent pouvoir être
              prouvées.
            </p>
</td>
</tr>
<tr>
<td>`options.secret`</td>
<td>
<p>
<em>Chaîne</em>. Un secret qui sera utilisé pour signer un JWT partagé avec la cible de la redirection. Cette valeur doit être stockée
              en tant que secret et récupérée à l’aide de
              `event.secrets['SECRET_NAME']`.
            </p>
</td>
</tr>
</tbody>
</table>

### `api.redirect.sendUserTo(url, options)`

Déclenchez une redirection du navigateur vers `url` cible immédiatement
après la fin de l’action.

Renvoie une référence à l’objet `api`.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`url`</td>
<td>
<p><em>Chaîne</em>. L’URL cible de la redirection.</p>
</td>
</tr>
<tr>
<td>`options`</td>
<td>
<p>
<em>Options</em>. Un objet représentant tout paramètre de chaîne de requête supplémentaire ajouté à l’URL de redirection.
            </p>
</td>
</tr>
<tr>
<td>`options.query`</td>
<td>
<p>
<em>Options</em>. Paramètres supplémentaires de la chaîne de requête à ajouter à l’URL de redirection.
            </p>
</td>
</tr>
</tbody>
</table>

### `api.redirect.validateToken(options)`

Récupérer les données encodées dans un jeton JWT transmis au point de terminaison
`/continue` tout en vérifiant l’authenticité et l’intégrité de ces données de façon simultanée.

Renvoie la charge utile du jeton JWT.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`options`</td>
<td>
<p>
<em>Options</em>. Options pour récupérer les données encodées dans un jeton JWT
              transmis au point de terminaison `/continue` à la suite d’une 
              redirection.
            </p>
</td>
</tr>
<tr>
<td>`options.secret`</td>
<td>
<p><em>Chaîne</em>. Secret utilisé pour encoder le jeton.</p>
</td>
</tr>
<tr>
<td>`options.tokenParameterName`</td>
<td>
<p>
<em>Chaîne</em>. Le nom du paramètre de la requête ou du corps qui a été
              envoyé au point de terminaison `/continue`. La valeur par défaut est
              `session_token`.
            </p>
</td>
</tr>
</tbody>
</table>

## `api.transaction`

### `api.transaction.setResultUrl(url, options)`

Déclenchez une redirection du navigateur vers l’`url` cible après que l’utilisateur a réinitialisé son mot de passe.

<table class="table">
<thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`url`</td>
<td>
<p>
<em>Chaîne</em>. L’URL vers laquelle un utilisateur est dirigé après avoir mis à jour son mot de passe. Validez cette URL et assurez-vous qu’elle est sécurisée pour les utilisateurs finaux. 
            </p>
</td>
</tr>
<tr>
<td>`options`</td>
<td>
<p>
<em>Options</em>. Un objet représentant tout paramètre de chaîne de requête supplémentaire ajouté à l’URL cible. 
            </p>
</td>
</tr>
<tr>
<td>`options.query`</td>
<td>
<p>
<em>Options</em>. Paramètres supplémentaires de la chaîne de requête à ajouter à l’URL cible. 
            </p>
</td>
</tr>
</tbody>
</table>