---
title: "Déclencheurs d’actions : pre-user-registration - Objet API"
permalink: "pre-user-registration-api-object"
'description': "En savoir plus sur l’objet API du déclencheur d’action de pré-enregistrement de l’utilisateur."
'og:title': "Déclencheurs d’actions : pre-user-registration - Objet API"
'og:description': "En savoir plus sur l’objet API du déclencheur d’action de pré-enregistrement de l’utilisateur."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Déclencheurs d’actions : pre-user-registration - Objet API"
'twitter:description': "En savoir plus sur l’objet API du déclencheur d’action de pré-enregistrement de l’utilisateur."
---

L’objet API pour le déclencheur d’actions de pré-enregistrement de l’utilisateur inclut :

### api.access

Modifier l’accès de l’utilisateur qui se connecte, par exemple en rejetant la tentative d’enregistrement.

### api.access.deny(reason, userMessage)

Refuser à l’utilisateur la possibilité de s’inscrire. Le processus d’inscription s’arrêtera immédiatement après la réalisation de cette Action et aucune autre Action ne sera exécutée.

Renvoie une référence à l’objet `api`.

### api.cache

Stockez et récupérez des données qui persistent entre les exécutions.

### api.cache.delete(key)

Supprime un enregistrement décrivant une valeur mise en cache à la clé fournie, si elle existe.

Renvoie un objet `CacheWriteResul` avec `type: "success"` si une valeur a été supprimée du cache. Une opération échouée renvoie `type: "error"`. Pour les erreurs, l’objet renvoyé aura une propriété `code` qui indique la nature de la défaillance.

### api.cache.get(key)

Récupérez un enregistrement décrivant une valeur mise en cache à la `key` fournie, le cas échéant. Si un enregistrement est trouvé, la valeur mise en cache peut être trouvée à la propriété de `value` de l’objet renvoyé.

Renvoie un enregistrement de cache si un élément est trouvé dans le cache pour la `key` fournie. Les enregistrements de cache sont des objets avec une propriété `value` contenant la valeur mise en cache ainsi qu’une propriété `expires_at` indiquant l’expiration maximale de l’enregistrement, en millisecondes, depuis l’époque Unix.

**Important :** Ce cache est conçu pour des données éphémères à courte durée de vie. Les éléments peuvent ne pas être disponibles lors de transactions ultérieures, même s’ils sont dans la limite de leur durée de vie.

### api.cache.set(key, value, [options])

Stockez ou mettez à jour une valeur de chaîne de caractères dans le cache à la clé spécifiée.

Les valeurs stockées dans ce cache sont limitées au déclencheur dans lequel elles sont définies. Elles sont assujetties aux [Limites du cache des Actions](https://auth0.com/docs/customize/actions/limitations).

Les valeurs stockées de cette manière auront une durée de vie allant jusqu’aux valeurs `ttl` ou `expires_at` spécifiées. Si aucune durée de vie n’est spécifiée, une durée de vie par défaut de 15 minutes sera utilisée. Les durées de vie ne peuvent pas dépasser la durée maximale indiquée à [Limites du cache des Actions](https://auth0.com/docs/customize/actions/limitations).

### api.user

Modifiez les métadonnées de l’utilisateur qui s’enregistre.

### api.user.setUserMetadata(name, value)

Définissez les métadonnées pour l’utilisateur qui s’inscrit. Les données stockées dans user_metadata sont visibles et modifiables par l’utilisateur.

Remarque : ce déclencheur effectue un appel à <Tooltip href="/docs/fr-ca/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip>, consommant la limite anti-attaques de Management API. Si cette demande atteint la limite anti-attaques et échoue dans sa nouvelle tentative dans la fenêtre de délai d’expiration, l’API renvoie une erreur `Deadline Exceeded`.

### api.user.setAppMetaData(name, value)

Définissez les métadonnées de l’application pour l’utilisateur qui est entrain de s’inscrire. Les données stockées dans app_metadata sont visibles et modifiables par l’utilisateur.

Remarque : ce déclencheur effectue un appel à Management API, consommant la limite anti-attaques de Management API. Si cette demande atteint la limite anti-attaques et échoue dans sa nouvelle tentative dans la fenêtre de délai d’expiration, l’API renvoie une erreur `Deadline Exceeded`.

Renvoie une référence à l’objet `api`.

### api.valdation

Configurez des messages d’erreur personnalisés pour les enregistrements d’utilisateurs refusés.

### api.valdation.error(errorCode, errorMessage)

Définissez des codes d’erreur personnalisés et des messages pour les utilisateurs en cas de tentatives d’enregistrement refusées.

Lorsqu’une tentative d’enregistrement d’un utilisateur est refusée, le processus d’inscription s’arrête immédiatement après l’achèvement de l’action en cours et aucune action supplémentaire n’est exécutée.