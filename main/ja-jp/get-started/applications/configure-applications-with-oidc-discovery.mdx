---
title: "OIDC Discoveryを使ってアプリケーションを構成する"
permalink: "configure-applications-with-oidc-discovery"
'description': "OpenID Connect（OIDC）Discoveryを使用して、Auth0でSDKを用いてアプリケーションを構成する方法について説明します。"
'og:title': "OIDC Discoveryを使ってアプリケーションを構成する"
'og:description': "OpenID Connect（OIDC）Discoveryを使用して、Auth0でSDKを用いてアプリケーションを構成する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "OIDC Discoveryを使ってアプリケーションを構成する"
'twitter:description': "OpenID Connect（OIDC）Discoveryを使用して、Auth0でSDKを用いてアプリケーションを構成する方法について説明します。"
---

[OpenID Connect（OIDC）Discovery](https://openid.net/specs/openid-connect-discovery-1_0-final.html#RFC5785)ドキュメントは、IDプロバイダー（<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-2" href="/ja-jp/glossary?term=idp" tip="IDプロバイダー（IdP）: デジタルIDを保存および管理するサービス。" cta="用語集の表示">IdP</Tooltip>）についてのメタデータを含みます。SDKにディスカバリーを追加して、アプリケーションを`./wellknown`エンドポイントにポイントし、IdPに関する情報を取得することで、IdPとの統合構成に役立てることができます。

OIDC DiscoveryをSDKに統合すると以下が得られます。

* IdPの公開されているエンドポイント
* 標準の[OIDCがサポートするクレームとスコープ](/ja-jp/get-started/apis/scopes/openid-connect-scopes)（これにはテナントで定義された[カスタムクレーム](/ja-jp/secure/tokens/json-web-tokens/create-custom-claims)とスコープは含まれません）
* IdPがサポートする機能

次の<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=openid" tip="OpenID: アプリケーションがログイン情報を収集および保存することなくにユーザーのIDを検証できるようにする認証用のオープン標準。" cta="用語集の表示">OpenID</Tooltip> Connect（OIDC）Discoveryドキュメントを使ってアプリケーションを構成することができます：`https://{yourDomain}/.well-known/openid-configuration`

### 応答例

```json lines
{
  "issuer": "https://{yourDomain}.us.auth0.com/",
  "authorization_endpoint": "https://{yourDomain}.us.auth0.com/authorize",
  "token_endpoint": "https://{yourDomain}.us.auth0.com/oauth/token",
  "device_authorization_endpoint": "https://{yourDomain}.us.auth0.com/oauth/device/code",
  "userinfo_endpoint": "https://{yourDomain}.us.auth0.com/userinfo",
  "mfa_challenge_endpoint": "https://{yourDomain}.us.auth0.com/mfa/challenge",
  "jwks_uri": "https://{yourDomain}.us.auth0.com/.well-known/jwks.json",
  "registration_endpoint": "https://{yourDomain}.us.auth0.com/oidc/register",
  "revocation_endpoint": "https://{yourDomain}.us.auth0.com/oauth/revoke",
  "scopes_supported": [
    "openid",
    "profile",
    "offline_access",
    "name",
    "given_name",
    "family_name",
    "nickname",
    "email",
    "email_verified",
    "picture",
    "created_at",
    "identities",
    "phone",
    "address"
  ],
  "response_types_supported": [
    "code",
    "token",
    "id_token",
    "code token",
    "code id_token",
    "token id_token",
    "code token id_token"
  ],
  "code_challenge_methods_supported": [
    "S256",
    "plain"
  ],
  "response_modes_supported": [
    "query",
    "fragment",
    "form_post"
  ],
  "subject_types_supported": [
    "public"
  ],
  "id_token_signing_alg_values_supported": [
    "HS256",
    "RS256",
    "PS256"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_basic",
    "client_secret_post",
    "private_key_jwt"
  ],
  "claims_supported": [
    "aud",
    "auth_time",
    "created_at",
    "email",
    "email_verified",
    "exp",
    "family_name",
    "given_name",
    "iat",
    "identities",
    "iss",
    "name",
    "nickname",
    "phone_number",
    "picture",
    "sub"
  ],
  "request_uri_parameter_supported": false,
  "request_parameter_supported": false,
  "token_endpoint_auth_signing_alg_values_supported": [
    "RS256",
    "RS384",
    "PS256"
  ]
}
```

### 実装例

たとえば、以下の方法でKatana v3（OWIN）に対するOIDCミドルウェアを構成します。

1. NuGetのパッケージをインストールします：**Microsoft.Owin.Security.OpenIdConnect** （v3.x.x）
2. `App_Start\Startup.Auth.cs`に移動し、実装を以下に置き換えます。

   codeblockOld.header.login.logInButton codeblockOld.header.login.configureSnippet

   ``` lines
   app.UseCookieAuthentication(new CookieAuthenticationOptions
   {
       AuthenticationType = CookieAuthenticationDefaults.AuthenticationType
   });

   app.UseOpenIdConnectAuthentication(new OpenIdConnectAuthenticationOptions
   {
       Authority = "https://{yourDomain}/",
       ClientId = "{yourClientId}",
       SignInAsAuthenticationType = CookieAuthenticationDefaults.AuthenticationType,
       ResponseType = "token",
       Notifications = new OpenIdConnectAuthenticationNotifications
       {
           // OPTIONAL: you can read/modify the claims that are populated based on the JWT
           SecurityTokenValidated = context =>
           {
               // add Auth0 Access Token as claim
               var accessToken = context.ProtocolMessage.AccessToken;
               if (!string.IsNullOrEmpty(accessToken))
               {
                   context.AuthenticationTicket.Identity.AddClaim(new Claim("access_token", accessToken));
               }
               return Task.FromResult(0);
           }
       }
   });
   ```

   

   

## JWTのRSAアルゴリズム

OIDCミドルウェアは対称鍵で署名された<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-3" href="/ja-jp/glossary?term=json-web-token" tip="JSON Web Token（JWT）: 二者間のクレームを安全に表現するために使用される標準IDトークン形式（および多くの場合、アクセストークン形式）。" cta="用語集の表示">JWT</Tooltip>をサポートしていません。必ず、公開鍵/秘密鍵を使用して、RSAアルゴリズムを使用するようにアプリを構成してください。

1. [［Dashboard］>［Settings（設定）］](https://manage.auth0.com/#/applications/%7BYOUR_AUTH0_CLIENT_ID%7D/settings)に移動します。
2. **［Advanced Settings（高度な設定）］** までスクロールします。
3. **［OAuth］** タブで、`RS256`を **［Json Web Token (JWT) Signature Algorithm（JSON Web Token署名アルゴリズム）］** に設定し、**［Save（保存）］** をクリックします。

この設定により、Auth0は秘密署名鍵で署名されたJWTを発行します。アプリはそれらを公開署名鍵で検証します。

## もっと詳しく

* [JSON Webトークン](/ja-jp/secure/tokens/json-web-tokens)
* [カスタムクレームを作成する](/ja-jp/secure/tokens/json-web-tokens/create-custom-claims)