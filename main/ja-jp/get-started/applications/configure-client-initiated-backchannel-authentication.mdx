---
title: "クライアントが開始するバックチャネル認証を設定する"
permalink: "configure-client-initiated-backchannel-authentication"
'description': "テナントに対してクライアントが開始するバックチャネル認証を構成する方法について説明します。"
'og:title': "クライアントが開始するバックチャネル認証を設定する"
'og:description': "テナントに対してクライアントが開始するバックチャネル認証を構成する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "クライアントが開始するバックチャネル認証を設定する"
'twitter:description': "テナントに対してクライアントが開始するバックチャネル認証を構成する方法について説明します。"
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

現在、クライアントが開始するバックチャネル認証は早期アクセスで利用できます。CIBAを有効化するには、テクニカルアカウントマネージャーまでお問い合わせください。

</Callout>

アプリケーションに対してクライアントが開始するバックチャネル認証を構成する方法について説明します。詳細については、「[クライアントが開始するバックチャネル認証フロー](/ja-jp/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow)」をお読みください。

## 前提条件

アプリケーションに対してCIBAを構成する前に、以下の前提条件をすべて満たしていることを確認してください。

* [Guardian SDKをアプリケーションに統合する](#integrate-guardian-sdk-into-your-application)
* [テナントに対してAuth0 Guardianのプッシュ通知を有効にする](#enable-auth0-guardian-push-notifications-for-your-tenant)

### Guardian SDKをアプリケーションに統合する

プッシュ通知機能付きのCIBAフローを使用するには、Guardian SDKを統合したモバイルアプリケーションが必要です。これを用意することで、認証を受けるユーザーは、CIBAフローが開始したプッシュ通知のチャレンジを承認できます。

アプリケーションにGuardian SDKをインストールする方法については、「[Auth0 Guardian](https://auth0.com/docs/secure/multi-factor-authentication/auth0-guardian#guardian-sdks)」と、お使いのモバイルデバイスプラットフォームに関連するセクションをお読みください。

### テナントに対してAuth0 Guardianのプッシュ通知を有効にする

CIBAのプッシュ通知を送信するには、テナントに対して[Auth0 Guardianのプッシュ通知](/ja-jp/secure/multi-factor-authentication/auth0-guardian#enroll-in-push-notifications)を有効にする必要があります。CIBAのプッシュ通知チャレンジを承認するには、認証を受けるユーザーもAuth0 Guardianのプッシュ通知要素に登録されている必要があります。詳細については、「[CIBAを使ったユーザー認証](/ja-jp/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow/user-authentication-with-ciba)」をお読みください。

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>を使用して、テナントに対してAuth0 Guardianのプッシュ通知を有効にします。

Auth0 Dashboardで以下を行います。

1. ［**Security（セキュリティ）>Multi-factor Auth（多要素認証）** ］を選択します。

2.［**Push Notification using Auth0 Guardian（Auth0 Guardianを使ったプッシュ通知）** ］を有効にします。このために<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=multifactor-authentication" tip="多要素認証（MFA）: ユーザー名とパスワードに加えて、SMS経由のコードなどの要素を使用するユーザー認証プロセス。" cta="用語集の表示">MFA</Tooltip>の構成設定が必要になる場合があります。詳細については、「[MFAにプッシュ通知を構成する](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-factors/configure-push-notifications-for-mfa)」を参照してください。

<Frame>![](/images/ja-jp/cdy7uua7fh8z/7JKyznvsjTupJpTU7NwdSA/5777f67204239c1890e4bc8b99ed7a1e/MFA_-_Guardian_Setting_-_Japanese.png)</Frame>

## アプリケーションに対してCIBAを構成する

アプリケーションに対してCIBAを構成するには、[Auth0 Dashboard](https://manage.auth0.com/)または[Management API](https://auth0.com/docs/api/management/v2)を使用できます。

<Tabs><Tab title="Auth0ダッシュボード">

Auth0 Dashboardでアプリケーションに対してCIBAを構成するには、次の手順に従ってください。

1. Auth0 Dashboardで［**Applications（アプリケーション） > Applications（アプリケーション）** ］に移動します。
2. アプリケーションを作成し、［**Grant Types（（付与タイプ））** ］タブで［**Client Initiated Backchannel Authentication (CIBA)（クライアントが開始するバックチャネル認証、CIBA）** ］を有効にします。

<Frame>![](/images/ja-jp/cdy7uua7fh8z/54TD5VRQVAOWxBdnFEpvTT/dbe91746a2e4ff1d448718e59946878e/CIBA_grant_-_Japanese.png)</Frame>

3.**［Save Changes（変更を保存）］** をクリックします。

</Tab><Tab title="Management API">

Management APIを使用してアプリケーションにCIBAを構成するには、[クライアント更新](https://auth0.com/docs/api/management/v2/clients/patch-clients-by-id)エンドポイントを使って`urn:openid:params:grant-type:ciba`付与タイプをクライアントオブジェクトの付与タイプリストに追加します。

```bash lines
curl --location --request PATCH 'https://[YOUR TENANT].auth0.com/api/v2/clients/[CLIENT ID]' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer [MANAGEMENT ACCESS TOKEN]' \
--data '{
    "grant_types": [
        "authorization_code",
        "refresh_token",
        "urn:openid:params:grant-type:ciba"
    ]
}'
```

Auth0のGo Management API SDKライブラリーを使用することもできます。詳細については、「[SDK](/ja-jp/libraries)」をお読みください:

```go lines
myClient := &Client{
		Name:        auth0.Stringf("CIBA-enabled-client"),
		Description: auth0.String("This is a CIBA enabled client."),
		GrantTypes:  &[]string{"urn:openid:params:grant-type:ciba"},
	}

	err := api.Client.Create(context.Background(), myClient)
```

CIBAの付与タイプについては、使用できるクライアントの種類に制約があります。CIBAの付与タイプを使用するには、以下の条件を満たす必要があります。

* クライアントがファーストパーティクライアント、すなわち`is_first_party`プロパティが`true`でなければなりません。
* クライアントは認証メカニズムのある非公開のクライアント、すなわち`token_endpoint_auth_method`プロパティの値が`none`以外でなければなりません。
* クライアントがOIDC準拠、すなわち`oidc_conformant`が`true`でなければなりません。これは、すべての新規クライアントのデフォルトです。

</Tab></Tabs>

