---
title: "Deploy CLIツール"
permalink: "deploy-cli-tool"
'description': "Auth0 Deploy CLIツールとその仕組みについて説明します。"
'og:title': "Deploy CLIツール"
'og:description': "Auth0 Deploy CLIツールとその仕組みについて説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Deploy CLIツール"
'twitter:description': "Auth0 Deploy CLIツールとその仕組みについて説明します。"
---

<Card title="Before you start">

[Auth0テナント](https://manage.auth0.com/)をセットアップします。

</Card>

Auth0 Deploy CLIは、Auth0テナントの設定管理をサポートするツールです。スタンドアロンのCLIとして、あるいはノードモジュールとして開発ワークフローに組み込むことができます。

対応しているリソースタイプ：`actions`、`branding`、`client grants`、`clients (applications)`、`connections`、`custom domains`、`email templates`、`emails`、`grants`、`guardian`、`hook secrets`、`log streams`、`migrations`、`organizations`、`pages`、`prompts`、`resource servers (APIs)`、`roles`、`tenant settings`、`themes`

## 特長

* **複数環境を重視：** アプリケーションのAuth0統合を、フィーチャーブランチから運用までテストできるように設計されています。
* **キーワードの置換：** 動的なキーワード置換で、すべての環境でリソース設定を共有できます。
* **幅広い用途：** CLIまたはノードモジュールとしてCI/CDワークフローに統合できます。

## はじめに

このガイドでは、スタンドアロンのCLIとして使用するDeploy CLIツールを正しく実装する方法を解説します。Deploy CLIを正しく実装するには、3つの主なステップがあります。

1. [専用のAuth0アプリケーションを作成する](#create-a-dedicated-auth0-application)
2. [Deploy CLIを構成する](#configure-the-deploy-cli)
3. [Deploy CLIを呼び出す](#call-the-deploy-cli)

<Warning>

このツールは、Auth0テナントに破壊的な影響を与える可能性があります。[AUTH0_ALLOW_DELETE構成](https://auth0.com/docs/deploy-monitor/deploy-cli-tool/configuring-the-deploy-cli#auth0_allow_delete)をよく理解して、運用環境で使用する前に開発テナントでテストすることをお勧めします。

</Warning>

### Deploy CLIをインストールする

スタンドアロンのコマンドラインツールとして実行するには：

`npm install -g auth0-deploy-cli`

### 専用のAuth0アプリケーションを作成する

Deploy CLIが<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip>を呼び出すためには、ツールの代理として呼び出しを行う、専用のAuth0アプリケーションが作成されなければなりません。

1. **［Auth0 Dashboard］>［Applications（アプリケーション）］>［Application（アプリケーション）］** に移動します。
2. **［+ Create Application（アプリケーションの作成）］** を選択します。

   1. 内容を説明する名前を付けます（「Deploy CLI」など）。
   2. **［Machine to Machine Applications（マシンツーマシンアプリケーション）］** を **［Application Type（アプリケーションの種類）］** として選択します。
   3. **［Create（作成）］** を選択します。
3. **［Authorize Machine to Machine Application（マシンツーマシンアプリケーションの認可）］** ビューに切り替えます。

   1. **［Auth0 Management API］** を選択します。
   2. 管理したいリソースに適した権限を選択します。詳細については、「[クライアントスコープ](#client-scopes)」セクションを参照してください。
   3. **［Authorize（認可）］** を選択します。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

[破壊的な変更が加えられることを防ぐ](https://auth0.com/docs/deploy-monitor/deploy-cli-tool/resource-specific-documentation#client-grants)目的で、Deploy CLI独自のクライアントそのものは構成不可能になっています。

</Callout>

#### クライアントスコープ

Deploy CLIに管理操作を実行させるためには、指定のアプリケーションにスコープが付与される必要があります。

アプリケーションは、最小権限の原則に従って、付与された権限セットの範囲で操作を行います。選択が必要なのは`read:clients`ですが、管理範囲内にあるすべてのリソースタイプについて`read:*`、`create:*`、および`update:*`権限の選択をお勧めします。削除できるようにするには、`delete:*`スコープを選択します。

### Deploy CLIを構成する

Deploy CLIを設定する方法は2つあります。

1. 構成ファイル（`config.json`）を使用する。
2. 環境変数を設定する。

どちらを選ぶか、あるいは両方を選ぶかは、ユースケースや優先事項に左右されます。詳細については、「[Deploy CLIを構成する](/ja-jp/deploy-monitor/deploy-cli-tool/configure-the-deploy-cli)」をお読みください。

この例では、環境変数を次のように設定します。

* `AUTH0_DOMAIN`
* `AUTH0_CLIENT_ID`
* `AUTH0_CLIENT_SECRET`

これらの値は、以前に作成した専用のAuth0アプリケーションの **［Settings（設定）］** タブにあります。

### Deploy CLIを呼び出す

Deploy CLIの`export`コマンドは、次のコマンドと同時に実行することができます：

`a0deploy export --format=yaml --output_folder=local`

プロセスが完了したら、ローカルディレクトリにリソース設定ファイルが生成されていることを確認しましょう。その後、`import`コマンドを実行して、設定をローカルマシンからAuth0テナントへプッシュします：

`a0deploy import --config_file=config.json --input_file local/tenant.yaml`

フラグとオプションをまとめたリストについては、「[CLIとして使用する](/ja-jp/deploy-monitor/deploy-cli-tool/use-as-a-cli)」をお読みください。