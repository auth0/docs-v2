---
title: "ログインとログアウトの問題を確認する"
permalink: "check-login-and-logout-issues"
'description': "問題を解決するために、ログインとログアウトを確認する方法について説明します。"
'og:title': "ログインとログアウトの問題を確認する"
'og:description': "問題を解決するために、ログインとログアウトを確認する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ログインとログアウトの問題を確認する"
'twitter:description': "問題を解決するために、ログインとログアウトを確認する方法について説明します。"
---

ログインやログアウトで問題が発生した場合には、以下を確認して原因を絞り込みます。

## ログインの問題

### ユーザーがログイン資格情報を求められたのか

* 認可サーバー（`/authorize`エンドポイント）への呼び出しがHARファイルに記録されているかを確認します。

  <Warning>

  HARファイルを（Auth0を含む）誰かと共有するときは、必ず事前に以下を含むすべての機密データを削除または難読化してください。

  + ユーザーの機密情報
  + 個人を特定できる情報（PII）
  + アプリケーションの機密情報

  詳細については、[Auth0コミュニティ](https://community.auth0.com)の以下の記事をお読みください。

  + [HTTPトレースのサニタイズ](https://community.auth0.com/t/sanitizing-http-traces/119488)
  + [HTTPトレースファイルを自動的にサニタイズする方法](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
  + [機密情報を手動で編集する方法](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
  + [HARファイルが大きすぎてサポートケースにアップロードできない場合](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
  </Warning>

* 接続がアプリケーションに有効化されているかを確認します。
* リモート認可サーバーが使用できるかを確認します。
* [Auth0のユニバーサルログインページ](/ja-jp/authenticate/login/auth0-universal-login)を使用している場合には、カスタマイズをオフにして、認証が動作するかを確認します。カスタマイズがなければログインが動作する場合には、ユニバーサルログインページのカスタマイズコードを見直します。

### 資格情報の入力後にエラーメッセージが表示される

* 別の方法でログインをテストして、資格情報が正しいことを確認します。
* 1つの可能性としてはパスワードの有効期限が考えられます。パスワードが失効していないかを確認してください。
* ブラウザーの開発者ツールやWeb検査コンソールを使用して、Auth0に戻る前のフローにエラーがないかを確認します。
* HARファイルでAuth0（`/login/callback`エンドポイント）に戻ったことが記録されているかを確認します。

  <Warning>

  HARファイルを（Auth0を含む）誰かと共有するときは、必ず事前に以下を含むすべての機密データを削除または難読化してください。

  + ユーザーの機密情報
  + 個人を特定できる情報（PII）
  + アプリケーションの機密情報

  詳細については、[Auth0コミュニティ](https://community.auth0.com)の以下の記事をお読みください。

  + [HTTPトレースのサニタイズ](https://community.auth0.com/t/sanitizing-http-traces/119488)
  + [HTTPトレースファイルを自動的にサニタイズする方法](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
  + [機密情報を手動で編集する方法](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
  + [HARファイルが大きすぎてサポートケースにアップロードできない場合](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
  </Warning>

  + 記録がない場合には、IDプロバイダーがAuth0の正しいコールバックURLを待機しているかを確認します。

### 認可サーバーでユーザーにログインセッションが確立されているのか

* これをテストするには、同じブラウザーで別のタブを開いて、同じURLのページを表示します。ログインが再度求められるかを確認します。

  + ログインが求められなかった場合には、セッションが存在します。

### Auth0ログにログエントリが作成されているのか

* ログエントリが作成されなかった場合には、認証トランザクションが未完了で、Auth0にも戻されません。
* 認可サーバーからの応答でエラーメッセージを確認します。
* （可能であれば）認可サーバーのログでエラーを確認します。

### Auth0ユーザーの画面にすべての正しいプロファイル情報でエントリが作成されているのか

* 作成されていない場合には、HARファイルで認可サーバーからの応答を確認します。ユーザーについての情報が返されていない可能性があります。

  <Warning>

  HARファイルを（Auth0を含む）誰かと共有するときは、必ず事前に以下を含むすべての機密データを削除または難読化してください。

  + ユーザーの機密情報
  + 個人を特定できる情報（PII）
  + アプリケーションの機密情報

  詳細については、[Auth0コミュニティ](https://community.auth0.com)の以下の記事をお読みください。

  + [HTTPトレースのサニタイズ](https://community.auth0.com/t/sanitizing-http-traces/119488)
  + [HTTPトレースファイルを自動的にサニタイズする方法](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
  + [機密情報を手動で編集する方法](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
  + [HARファイルが大きすぎてサポートケースにアップロードできない場合](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
  </Warning>

* ルールを使用している場合には、ルールのスクリプトで問題を確認します。
* カスタムデータベース接続を使用している場合には、データベースのアクションスクリプトで問題を確認します。
* LDAPを使用している場合には、プロファイルのマッピングスクリプト（`profileMapper.js`）で問題を確認します。
* ソーシャル接続の構成で、どのプロファイル情報が要求されているのかを確認します。

### トークンやアサーションがアプリケーションに返されたことがHARファイルに記録されているのか

* [HARファイル](/ja-jp/troubleshoot/troubleshooting-tools/generate-and-analyze-har-files)でアプリケーションのコールバックURLへの呼び出しを確認します。

  <Warning>

  HARファイルを（Auth0を含む）誰かと共有するときは、必ず事前に以下を含むすべての機密データを削除または難読化してください。

  + ユーザーの機密情報
  + 個人を特定できる情報（PII）
  + アプリケーションの機密情報

  詳細については、[Auth0コミュニティ](https://community.auth0.com)の以下の記事をお読みください。

  + [HTTPトレースのサニタイズ](https://community.auth0.com/t/sanitizing-http-traces/119488)
  + [HTTPトレースファイルを自動的にサニタイズする方法](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
  + [機密情報を手動で編集する方法](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
  + [HARファイルが大きすぎてサポートケースにアップロードできない場合](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
  </Warning>

* IDトークン（`id_token`）を見つけて、アプリケーションに必要な情報があることを確認します。

### 期待する情報が復号化したトークンやアサーションに含まれているのか

* [JWT.io](http://jwt.io)を使用して<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-3" href="/ja-jp/glossary?term=json-web-token" tip="JSON Web Token（JWT）: 二者間のクレームを安全に表現するために使用される標準IDトークン形式（および多くの場合、アクセストークン形式）。" cta="用語集の表示">JWT</Tooltip>を表示します。
* [SAMLTool.io](http://samltool.io)を使用して<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-1" href="/ja-jp/glossary?term=security-assertion-markup-language" tip="Security Assertion Markup Language（SAML）: パスワードなしに二者間で認証情報を交換できる標準化プロトコル。" cta="用語集の表示">SAML</Tooltip>アサーションを表示します。

### ログインしたユーザーがシングルサインオンで別のアプリケーションにアクセスできるのか

1. ユーザーが当初のログインで使用したのと同じブラウザーを使って、2つ目のアプリケーションにログインしようとしたかを確認します。
2. [［Tenant Settings（テナントの設定）］>［Advanced Settings（詳細設定）］」](https://manage.auth0.com/#/tenant/advanced)に移動して、**［Log In Session Management（ログインセッションの管理）］** の設定を確認します。2つ目のログイン試行がタイムアウト制限内であったかを確認します。
3. `prompt`パラメーターを使って`/authorize`呼び出しで渡された値を確認します。
4. 当初のアプリケーションへのログインに使用された接続が、2つ目のアプリケーションにも有効かを確認します。
5. 必要なすべてのユーザープロファイル情報を2つ目のアプリケーションが受け取ったかを確認します。
6. モバイルデバイスの場合には、ブラウザーベースのフローを使用する必要があります。詳細については、「ベストプラクティス」を参照してください。

### アプリケーションのログを確認する

* アプリケーションのログにエラーが記録されているかを確認します。
* グループやユーザーのプロファイル属性など、必要なすべての情報をアプリケーションが受け取ったかを確認します。

## ログアウトの問題

* ログアウトのリダイレクトURLが許可リストに追加されているかを確認します。ログアウト呼び出しにリダイレクトURLを使用している場合には、テナントまたはアプリケーションの設定に登録する必要があります。
* フェデレーションログアウトが必要な場合には、ログアウト呼び出しに`?federated`パラメーターが追加されているかを確認します。
* ログアウトのリダイレクトURLがログインのコールバックURLと異なることを確認します。
* ユーザーが混乱しないように、ログアウトのリダイレクトURLを無名ページ（ログインでは保護されない）にして、ログアウトのリダイレクトURLへのリダイレクトが即座にログインをトリガーしないようにします。