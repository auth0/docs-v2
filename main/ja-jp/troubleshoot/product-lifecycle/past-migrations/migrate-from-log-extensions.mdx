---
title: "ログ拡張機能から移行する"
permalink: "migrate-from-log-extensions"
'description': "ログ拡張機能からログストリームまたはAuth0 Marketplace統合に移行します。"
'og:title': "ログ拡張機能から移行する"
'og:description': "ログ拡張機能からログストリームまたはAuth0 Marketplace統合に移行します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ログ拡張機能から移行する"
'twitter:description': "ログ拡張機能からログストリームまたはAuth0 Marketplace統合に移行します。"
---

現在、以下のAuth0ログ拡張機能は廃止され、サポートの終了（EOL）を迎えています。このリストにある廃止されたログ拡張機能から新しい拡張機能を作成することはできません。同等の機能性はログストリームや[Auth0 Marketplace](https://marketplace.auth0.com/)統合を使用してセットアップできます。

* Auth0 Authentication API Webhooks
* Auth0 <Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip> Webhooks
* Logs to Cloudwatch
* Logs to Logentries
* Logs to Loggly
* Logs to Logstash
* Logs to Papertrail
* Logs to Splunk
* Logs to Sumo Logic
* Logs to Segment
* Logs to Mixpanel
* Logs to AppInsights
* Logs to Azure Blob Storage

このページでは特定のログ拡張機能から移行する手順を説明します。

## Auth0 Authentication API Webhooks

移行先であらゆるログオブジェクトの配列が処理できることを確認してください。

1. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
2. **［Extensions（拡張機能）］** に移動して、使用している**Auth0 Authentication API webhook** を **［Installed Extensions（インストール済みの拡張機能）］** タブで選択します。
3. **Webhook URL** と **Authorizationヘッダー** （存在する場合）をコピーします。
4. 次に、**［Monitoring（モニタリング）］>［Streams（ストリーム）］>［New Event Stream（新しいイベントストリーム）］** に移動します。
5. [**［Custom Webhook（カスタムWebhook）］** ](https://auth0.com/docs/customize/log-streams/custom-log-streams)を選択し、名前を入力してから、**［Create（作成）］** をクリックします。
6. Webhookを構成します。

   * 拡張機能からコピーしたWebhook URLを **［Payload URL（ペイロードURL）］** に入力します。
   * **認可トークン** がある場合は、それを拡張機能からコピーしたAuthorizationヘッダーに設定します。
   * **［Content Format（コンテンツ形式）］** をJSON配列に設定します。
7. **［Save（保存）］** をクリックします。
8. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に戻って、**Auth0 Authentication API webhooks** 拡張機能を無効にします。

## Auth0 Management API Webhooks

移行先であらゆるログオブジェクトの配列が処理できることを確認してください。

1. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
2. **［Extensions（拡張機能）］** に移動して、使用している**Auth0 Management API webhook** を **［Installed Extensions（インストール済みの拡張機能）］** タブで選択します。
3. **Webhook URL** と **Authorizationヘッダー** （存在する場合）をコピーします。
4. **［Monitoring（モニタリング）］>［Streams（ストリーム）］>［New Event Stream（新しいイベントストリーム）］** に移動します。
5. [**［Custom Webhook（カスタムWebhook）］** ](https://auth0.com/docs/customize/log-streams/custom-log-streams)を選択し、名前を入力してから、**［Create（作成）］** をクリックします。
6. Webhookを構成します。

   * 拡張機能からコピーしたWebhook URLを **［Payload URL（ペイロードURL）］** に入力します。
   * **認可トークン** がある場合は、それを拡張機能からコピーしたAuthorizationヘッダーに設定します。
   * **［Content Format（コンテンツ形式）］** をJSON配列に設定します。
7. **［Save（保存）］** をクリックします。
8. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に戻って、**Auth0 Management API webhooks** 拡張機能を無効にします。

## CloudWatch

Auth0 Marketplaceで提供されている[Amazon EventBridge統合](https://marketplace.auth0.com/integrations/amazon-log-streaming)をセットアップします。イベントがイベントバスで利用可能になったら、[ルールを作成](https://docs.aws.amazon.com/eventbridge/latest/userguide/create-event-bus.html)して、それらのイベントをAWS CloudWatchにマッピングします。必ず、Auth0 Logs to CloudWatch拡張機能が無効であることを確認してください。

1. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
2. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動します。
3. **Auth0 Logs to CloudWatch** 拡張機能を無効にします。

## Loggly

1. [Logglyアカウントにログインします](https://www.loggly.com/login/)。
2. **［Logs（ログ）］** メニューから **［Source Setup（ソースのセットアップ）］** を選択します。
3. **［Customer Tokens（カスタマートークン）］** タブに移動します。
4. トークンをコピーします。
5. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
6. **［Monitoring（モニタリング）］>［Streams（ストリーム）］>［New Event Stream（新しいイベントストリーム）］** に移動します。
7. [**［Custom Webhook（カスタムWebhook）］** ](https://auth0.com/docs/customize/log-streams/custom-log-streams)を選択し、名前を入力してから、**［Create（作成）］** をクリックします。
8. Webhookを構成します。

   * **［Payload URL（ペイロードURL）］** で、`LOGGLY_TOKEN`をLogglyアカウントからコピーしたトークンに置き換えます：`https://logs-01.loggly.com/bulk/{LOGGLY_TOKEN}/tag/auth0-{TENANT_NAME}/`
   * **［Authorization Token（認可トークン）］** は空のままにしておきます。
   * **［Content Type（コンテンツタイプ）］** を`application/json`に設定します。
   * **［Content Format（コンテンツ形式）］** をJSON行に設定します。
9. **［Save（保存）］** をクリックします。
10. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動して、**Auth0 Logs to Loggly** 拡張機能を無効にします。

## Logstash

1. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
2. **［Monitoring（モニタリング）］>［Streams（ストリーム）］>［New Event Stream（新しいイベントストリーム）］** に移動します。
3. [**［Custom Webhook（カスタムWebhook）］** ](https://auth0.com/docs/customize/log-streams/custom-log-streams)を選択し、名前を入力してから、**［Create（作成）］** をクリックします。
4. Webhookを構成します。

   * 使用しているLogstashサーバーからコピーしたURLを **［Payload URL（ペイロードURL）］** に入力します。
   * **［Authorization Token（認可トークン）］** を`Basic <CREDENTIALS>`に設定し、`CREDENTIALS`をカンマ区切りのLogstashユーザーとパスワードのBase64エンコード（`<USER:PASSWORD>`）に置き換えます。Logstash HTTP資格情報はLogstash構成ファイルにあります。
5. **［Save（保存）］** をクリックします。
6. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動して、**Auth0 Logs to Logstash** 拡張機能を無効にします。

## Papertrail

1. Papertrailにログインします。
2. [［Log Destinations（ログ出力先）］](https://papertrailapp.com/account/destinations)に移動して、[［Create Log Destination（ログ出力先を作成）］](https://papertrailapp.com/destinations/new)をクリックします。
3. 説明を入力し、出力先の設定を構成します。
4. **［Accept Connections via ...（接続の受け入れ）］** ペインで、**［Token（トークン）］** を選択します。
5. **［Create（作成）］** をクリックします。
6. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
7. **［Monitoring（モニタリング）］>［Streams（ストリーム）］>［New Event Stream（新しいイベントストリーム）］** に移動します。
8. [**［Custom Webhook（カスタムWebhook）］** ](https://auth0.com/docs/customize/log-streams/custom-log-streams)を選択し、名前を入力してから、**［Create（作成）］** をクリックします。
9. Webhookを構成します。

   * **［Payload URL（ペイロードURL）］** を`https://logs.collector.solarwinds.com/v1/logs`に設定します。
   * **［Authorization Token（認可トークン）］** を`Basic <CREDENTIALS>`に設定し、`CREDENTIALS`をPapertrailの出力先設定から取得したPapertrailトークンのBase64エンコードに置き換えます。
   * **［Content Format（コンテンツ形式）］** をJSON行に設定します。
10. **［Save（保存）］** をクリックします。
11. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動して、**Auth0 Logs to Papertrail** 拡張機能を無効にします。

## Splunk

Auth0 Marketplaceで提供されている[Splunk統合](https://marketplace.auth0.com/integrations/splunk-log-streaming)を使用します。必ず、Auth0 Logs to Splunk拡張機能が無効であることを確認してください。

1. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
2. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動します。
3. **Auth0 Logs to Splunk** 拡張機能を無効にします。

## Sumo Logic

Auth0 Marketplaceで提供されている[Sumo Logic統合](https://marketplace.auth0.com/integrations/sumo-logic-log-streaming)を使用します。必ず、Auth0 Logs to Sumo Logic拡張機能が無効であることを確認してください。

1. [Auth0 Dashboardにログインします](https://manage.auth0.com/)。
2. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動します。
3. **Auth0 Logs to Sumo Logic** 拡張機能を無効にします。

## Logentries

現時点では、Logs to Logentries拡張機能からログストリームに移行する手順はありません。

## Segment

1. Auth0 Dashboardにログインします。
2. **［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動して、Segment拡張機能を見つけます。
3. **Writeキー** をメモしておきます。これはSegmentへの新しいログストリームで必要になります。
4. Segment拡張機能を無効にします。
5. Segmentで受信した最後のログのUTCタイムスタンプをメモします。そのタイムスタンプを知っていれば、Segmentでログの重複を避けながら新しいストリームを作成できます。
6. **［Monitoring（モニタリング）］>［Log Streams（ログストリーム）］** に移動して、新しいSegmentログストリームを作成します。所定のフィールドに**Writeキー** を入力し、**［Start From（開始）］** セクションにメモしたタイムスタンプを入力します。
7. ストリームを作成します。

## Mixpanel

1. Mixpanelアカウントにログインして、**［Project Settings（プロジェクト設定）］** を開きます。**［Project ID（プロジェクトID）］** と **［Data Residency（データ所在地 ）］** （リージョン）をメモします。
2. Mixpanelはイベントのインポートにプロジェクトトークンの使用を推奨しなくなり、サービスアカウントメカニズムの使用を推奨するようになりました。**［Project Settings（プロジェクト設定）］** ページ内で **［Service Accounts（サービスアカウント）］** を選択し、管理者または所有者の権限で新しいサービスアカウントを作成します。資格情報をメモしておきます。
3. Auth0 Dashboardにログインします。
4. **［Monitoring（モニタリング）］>［Log Streams（ログストリーム）］** に移動して、新しいMixpanelログストリームを作成します。プロジェクトID、リージョン、サービスアカウントの資格情報を入力し、ストリームを作成します。
5. 古い拡張機能を忘れずに無効にしてください。**［Extensions（拡張機能）］>［Installed Extensions（インストール済みの拡張機能）］** に移動して、**Auth0 Logs to Mixpanel** 拡張機能を無効にします。

## AppInsights

1. [Azure EventGridログストリーム](https://marketplace.auth0.com/integrations/azure-log-streaming)をセットアップするか、既存のEventGridストリームを活用します。
2. [Azureが提供する指示](https://urldefense.com/v3/__https://learn.microsoft.com/en-us/azure/event-grid/auth0-log-stream-app-insights__;!!PwKahg!9T9C3qhBRgQQHChQkQqnmHDDnX99yWJ4W8F4rLVs6qrwwbnFCY3JcCfF486d1DLqRFEghVnJZ9gJnronDv0%24)に従ってログイベントの出力先を設定します。
3. ログストリーミングでは、ログが異なる記録に変換されることがあります。詳細については、廃止された[ログ拡張機能のコード](https://github.com/auth0-extensions/auth0-logs-to-provider/blob/master/server/lib/senders/appinsights.js)を参照してください。

ログに対して行われる顕著な変換には以下が含まれます。

* AppInsightクライアントが上書きされます。

  + ログタイムと等しいカスタムタイムを設定する
  + OSとOSのバージョンがログ情報と同等になる
  + デバイスタイプのタグがモバイルソースからのログかを示す情報を保持する
  + IPアドレスのタグがログ情報と同等になる
  + ユーザーID、アカウントID、ユーザーエージェント、認証ユーザーIDのタグがログと同等になる
* レコードが整理され、以下のプロパティが空の場合は削除されます。

  + ip
  + user_id
  + user_name
  + connection
  + client_name
  + description
* レコードのisMobileプロパティが「yes」または「no」の文字列を含むように変更されます
* レコードのdetailsプロパティが1つの文字列に変更されます
* レコードのdetailsプロパティが8185文字に切り詰められます

## Azure Blob Storage

1. [Azure EventGridログストリーム](https://marketplace.auth0.com/integrations/azure-log-streaming)をセットアップするか、既存のEventGridストリームを活用します。
2. [Azureが提供する指示](https://urldefense.com/v3/__https://learn.microsoft.com/en-us/azure/event-grid/auth0-log-stream-blob-storage__;!!PwKahg!9T9C3qhBRgQQHChQkQqnmHDDnX99yWJ4W8F4rLVs6qrwwbnFCY3JcCfF486d1DLqRFEghVnJZ9gJ5k9lKMM%24)に従ってログイベントの出力先を設定します。
3. ログストリーミングでは、ログが異なる記録に変換されることがあります。詳細については、廃止された[ログ拡張機能のコード](https://github.com/auth0-extensions/auth0-logs-to-provider/blob/master/server/lib/senders/blobstorage.js)を参照してください。

ログに対して行われる顕著な変換には以下が含まれます。

* レコードの`type_code`と`type`が調整されます。‌‌`Type`は`type_code`を人間に読める形式で記述したものです‌。‌
* レコードの`os`、`os_version`、`device`、`device_version`は`user_agent`情報がレコードに含まれている場合に調整されます。