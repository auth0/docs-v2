---
title: "Yahoo APIの変更"
permalink: "yahoo-api-changes"
'description': "ユーザープロファイルの構造に影響を与えるYahoo APIの変更について説明します。"
'og:title': "Yahoo APIの変更"
'og:description': "ユーザープロファイルの構造に影響を与えるYahoo APIの変更について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Yahoo APIの変更"
'twitter:description': "ユーザープロファイルの構造に影響を与えるYahoo APIの変更について説明します。"
---

Yahooは、アプリケーションが[Social Directory API](https://developer.yahoo.com/oauth/social-directory-eol/)からユーザープロファイルを取得するために使用する必要があるAPIを、Yahooの`/userinfo`エンドポイントに変更しました。この変更は、Auth0でのYahooユーザーのユーザープロファイルの構造が変わることを意味します。

以前は、Auth0ではYahooから返されたすべてのプロファイルデータを読み込み、Yahooのプロファイルからマッピングされたこれらのフィールドを追加していました。

ですがYahooは、`url`、`profileUrl`、`isConnected`および[Yahooのドキュメント](https://developer.yahoo.com/oauth/social-directory-eol/)に記載されていたその他のフィールドを返さなくなりました（「List Of Attributes Deprecated in Social Directory Profile Api（Social Directory Profile APIで廃止された属性一覧）」を参照）。それらの他のフィールドもプロファイルの一部には含まれなくなります。

Yahooの`/userinfo`エンドポイントは、[Yahooアプリケーション](https://developer.yahoo.com/apps/)定義で構成したAPI権限に応じて、異なるフィールドを返します。Yahooでは、**［Profile（Social Directory）（プロファイル（ソーシャルディレクトリ））］** 権限セクションで、4つの権限のいずれかを付与できます。

* Read Public Basic（公開されている基本情報を読み取る権限）
* Read Public Extended（公開されている詳細情報を読み取る権限）
* Read Write Public（公開情報の読み取り/書き込み権限）
* Read Write Public and Private（公開および非公開情報の読み取り/書き込み権限）

## アクション

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>でYahoo接続を構成する際は、Yahooのセットアップで付与した権限に対応している属性を選択します。Yahooで指定した権限と一致しない属性を選択すると、ログイントランザクションは失敗します。

Auth0接続設定で権限を選択しないと、Auth0はデフォルトで`openid`スコープを要求し、これによりYahooアプリケーションで指定されたAPI権限に対応するプロファイルフィールドが返されます。たとえば、Yahooアプリケーションが**Read Public Extended** 権限で構成されている場合、Yahooは以下のフィールドを返します。

* `sub, name`
* `given_name`
* `family_name`
* `locale`
* `email`
* `email_verified`
* `birthdate`
* `profile_images`
* `picture`
* `preferred_username`
* `phone_number`
* `nickname`

Yahoo接続を使用してユーザーを認証し、基本情報を取得する場合、アプリケーションは変更することなく動作を続けます。

アプリケーションが利用できなくなったユーザープロファイルのフィールドにアクセスしている場合、Auth0 Dashboardで正しい**接続属性** を有効にし、アプリケーションコードを調整して適切なフィールド名を使用する必要があります。