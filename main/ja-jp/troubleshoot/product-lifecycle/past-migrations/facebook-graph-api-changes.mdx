---
title: "Facebook Graph APIの変更"
permalink: "facebook-graph-api-changes"
'description': "最新バージョンのFacebook Graph APIでは、要求できるアクセス許可とフィールドが変更されています。"
'og:title': "Facebook Graph APIの変更"
'og:description': "最新バージョンのFacebook Graph APIでは、要求できるアクセス許可とフィールドが変更されています。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Facebook Graph APIの変更"
'twitter:description': "最新バージョンのFacebook Graph APIでは、要求できるアクセス許可とフィールドが変更されています。"
---

2018年8月1日時点で、Facebookは要求できるFacebook Graph APIのアクセス許可とフィールドを変更しました。Auth0は、これらの変更を反映するためにFacebook接続を更新し、明確にするために接続インターフェイスを変更しました。完全な詳細と主な日付については、「[Facebook Login Changelog:Recent Changes to Facebook Login](https://developers.facebook.com/docs/facebook-login/changelog#2018-07-02)」を参照してください。

## 影響のある機能

この更新では、コードや構成を変更する必要はありませんが、既存のアクセス許可で該当する場合には、アプリケーションが追加のプロファイルデータを受け取ることがあります。以下の点に留意してください。

* 削除されたいずれかのアクセス許可を要求するようにFacebook接続が構成されている場合、アクセストークンはスコープでアクセス許可を取得できません。
* Facebookアプリケーションが「開発」とマークされている場合は、引き続き、一時的に接続試行でエラーが表示されることがあります。
* 新しいアクセス許可を接続に追加すると、エンドユーザーの次回ログイン時に同意を求めるメッセージが表示されます。特定のアクセス許可を持たないユーザーのアクションを処理する方法については、Facebookドキュメントを参照してください。

### Facebookログインのアクセス許可

[Facebookログインのアクセス許可](https://developers.facebook.com/docs/facebook-login/permissions)は、ユーザーがFacebookを使用してログインするときにアプリケーションによって要求されます。ユーザーが初めてログインする場合やアクセス許可が変更された場合は、新しいアクセス許可が要求されたことを示す同意ウィンドウがFacebookに表示されます。アクセス許可が付与されたら、そのユーザーに代わって、アプリケーションがFacebookのアクセストークンを使って処理を行うことができます。

Facebook接続インターフェイスは、表示されるすべてのアクセス許可について、通常の名前とマシン名の両方を表示するように更新されています。そのため、必要なアクセス許可を見つけて、これらのアクセス許可名で実行中のコードにマッピングすることが容易になっています。

#### 追加されたアクセス許可

以下のアクセス許可はFacebook接続インターフェイスに追加されました。

* business_management
* groups_access_member_info
* leads_retrieval
* pages_manage_instant_articles
* publish_to_groups
* publish_to_groups
* user_age_range
* user_gender
* user_link

#### 削除されたアクセス許可

以下のアクセス許可はFacebook接続インターフェイスから削除されました。

* read_custom_friendlists
* rsvp_event
* user_about_me
* user_actions-books
* user_actions-fitness
* user_actions-music
* user_actions-news
* user_actions-video
* user_education_history
* user_games_activity
* user_relationship_details
* user_relationships
* user_religion_politics
* user_website
* user_work_history

#### 廃止セクションに移動されたアクセス許可

以下のアクセス許可は **Deprecated（廃止）］** セクションに移動されたため、最新バージョンのGraph APIでは使用できません。

* publish_actions
* user_managed_groups

### Facebook Graph APIフィールド

[Facebook Graph API](https://developers.facebook.com/docs/graph-api/reference/v3.2/user)はユーザーのログイン後に使用され、Auth0ユーザーのプロファイルデータが取得されます。要求されたユーザーデータのアクセス許可によって、Graph APIからどの情報が取得されるかが決まります。返されるフィールドは、要求されたアクセス許可と、Facebookユーザープロファイルにこれらのフィールドが存在するかによって異なります。

この変更によって、Graph APIはv2.8からv3.2にアップグレードされ、ログインでは以下のユーザーデータフィールドが求められます。

* address（追加されました）
* age_range
* birthday
* context
* cover
* currency（追加されました）
* devices
* email
* favorite_athletes
* favorite_teams
* first_name
* gender
* hometown
* id
* inspirational_people
* install_type（追加されました）
* installed
* is_verified
* languages
* last_name
* link
* locale
* location
* meeting_for（追加されました）
* middle_name
* name
* name_format
* picture
* public_key（追加されました）
* quotes
* security_settings（追加されました）
* short_name（追加されました）
* significant_other
* sports（追加されました）
* third_party_id
* timezone
* updated_time
* verified
* video_upload_limits（追加されました）
* viewer_can_send_gift（追加されました）