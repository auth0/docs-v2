---
title: "Auth0 Guardian"
permalink: "auth0-guardian"
'description': "Guardianの仕組みと、Guardian SDKを使用して独自の認証システムやGuardianのようなアプリケーションを構築する方法について説明します。"
'og:title': "Auth0 Guardian"
'og:description': "Guardianの仕組みと、Guardian SDKを使用して独自の認証システムやGuardianのようなアプリケーションを構築する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Auth0 Guardian"
'twitter:description': "Guardianの仕組みと、Guardian SDKを使用して独自の認証システムやGuardianのようなアプリケーションを構築する方法について説明します。"
---

Auth0 Guardianは、iOSおよびAndroidデバイス用のモバイルアプリケーションで、ユーザーはプッシュ通知または一時的なワンタイムパスワードを使用して[多要素認証（MFA）](/ja-jp/secure/multi-factor-authentication)を完了できます。

Auth Guardianは、ユーザーの登録済みデバイス（通常は携帯電話またはタブレット）にプッシュ通知を配信したり、アプリ内で直接ワンタイムパスワードを生成したりできます。ユーザーは、これらのプッシュ通知にすばやく応答したり、ワンタイムパスワードを取得してログインを完了したりできます。

ユーザーは、[Apple App Store](https://apps.apple.com/us/app/auth0-guardian/id1093447833)または[Google Play Store](https://play.google.com/store/apps/details?id=com.auth0.guardian)からAuth0 Guardianアプリをダウンロードできます。または、Guardian SDKを使用して、Auth0 Guardian機能を独自のカスタムアプリに埋め込むこともできます。

## プッシュ通知

プッシュ通知を使用するには、ユーザーのデバイスにAuth0 GuardianアプリまたはGuardian SDKで構築されたカスタムアプリがインストールされている必要があります。ユーザーが認証を試みると、インストールされたアプリにプッシュ通知が送信されます。ユーザーは、ログイン情報を知っていることと、<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=multifactor-authentication" tip="多要素認証（MFA）: ユーザー名とパスワードに加えて、SMS経由のコードなどの要素を使用するユーザー認証プロセス。" cta="用語集の表示">MFA</Tooltip>用に設定されたデバイスを所有していることを証明して、ログインを完了するために通知に応答する必要があります。

Auth0プッシュ通知は、AWS Simple Notification Service （SNS）または次のベンダー直結サービスのうち1つ以上を使用して実装し、ベンダー固有の統合を構成できます。

* Firebase Cloud Messaging（FCM）
* Apple Push Notification（APN）

<Frame>![Auth0 Guardian flow diagram](/images/ja-jp/cdy7uua7fh8z/TdN0nXfYs0mqHpi9U3JQ9/e1018ba751dc3dc147c09d1e511c0d0a/diagram.png)</Frame>

### プッシュ通知に登録する

Auth0 Guardianを使用してプッシュ通知を構成すると、ユーザーは最初にサインアップまたはアプリケーションにログインするときに、モバイルアプリをダウンロードするように求められます。Guardian SDKを使用してカスタムアプリにプッシュ通知を実装する場合、ユーザーは登録中にアプリケーションをダウンロードするように求められません。

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>の[［Security（セキュリティ）］>［Multi-factor Auth（多要素認証）］>［Push Notification using Auth0 Guardian（Auth0 Guardianを使ったプッシュ通知）］](https://manage.auth0.com/#/security/mfa/guardian)から、プッシュ通知を有効にすることができます。

<Frame>![Auth0 Dashboard > Security > Multi-factor Auth > Push Notification using Auth0 Guardian](/images/ja-jp/cdy7uua7fh8z/fwjSKFNhsvObzdPDiA79N/bb3b226023807be99c2249ff4d8c0465/Auth0_Guardian_-_Dashboard_setting.png)</Frame>

ユーザーが初めてアプリケーションにサインアップまたはログインすると、Auth0 GuardianアプリまたはカスタムのGuardian SDKアプリを第二認証要素として登録できるQRコードを[ユニバーサルログイン](/ja-jp/authenticate/login/auth0-universal-login)が提供します。ユーザーは、指定されたアプリでこのコードをスキャンして登録を完了するまでの時間が短くなります。

ユーザーが登録すると、プッシュ通知を認証要素として使用できます。ユーザーがアプリケーションにログインしようとするたびに、Auth0 GuardianまたはカスタムGuardian SDKアプリを介してデバイスにプッシュ通知が届きます。ユーザーは、アプリケーションに正常にログインするために、この要求を承認する必要があります。

デバイスや回復コードを失くしてしまったユーザーのためにMFAをリセットする方法については、「[多要素認証と回復コードをリセットする](/ja-jp/secure/multi-factor-authentication/reset-user-mfa)」を参照してください。さらにサポートが必要な場合は、「[多要素認証のトラブルシューティング](/ja-jp/troubleshoot/authentication-issues/troubleshoot-mfa-issues)」を参照してください。

## 一時的なワンタイムパスワード

Auth0 GuardianアプリとGuardian SDKは、二次認証要素として一時的なワンタイムパスワード（OTP）の使用もサポートしています。アプリとSDKはどちらも、ユーザーがユニバーサルログインMFAチャレンジを完了するために使用できる一時的なOTPを生成できます。

デフォルトでは、Auth0 Guardianアプリには、ユーザーが登録したアプリケーションが一覧表示されます。アプリケーションを選択すると、そのアプリケーションに対応するOTPが表示されます。6桁の各OTPは30秒間有効です。有効期限が近づいているOTPは赤で表示されます。有効期限が切れると、アプリはすぐに新しいOTPを生成します。認証の失敗を回避するために、ユーザーは赤のOTPを使用しないでください。

カスタムGuardian SDKアプリでは、OTPの外観が異なる場合があります。

### 一時的なワンタイムパスワードを使用する

OTPは、主に次の2つの方法で活用できます。

* Auth0 Guardianアプリまたはその他のカスタムアプリがプッシュ要求を受信しなかった場合に、プッシュ通知のフォールバックオプションとして。
* [テナント](https://manage.auth0.com/#/security/mfa)で要素にワンタイムパスワードを有効化した場合の[MFAチャレンジ](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-factors)として。

accordion.expand_all/accordion.collapse_all

<Accordion title="フォールバック方法 通知をプッシュするフォールバックオプションとしてOTPを使用する">

Auth0 Guardianや他のカスタムアプリを介してプッシュ通知を受信しないユーザーは、代わりに一時的なOTPを使用してMFAチャレンジを完了できます。

**ユーザーフロー例** ：

1. ユーザーがアプリケーションへのログインを試行する。ユニバーサルログインMFAプロンプトが表示されるが、プッシュ通知を受信しない。
2. MFAプロンプトで、ユーザーが**［Manuallay Enter Code（手動でコードを入力する）］** ボタンを選択する。OTPを使用して認証するには、このオプションを選択する必要がある。

   <Frame>![［Manuallay Enter Code（手動でコードを入力する）］ボタンを表示するMFAプロンプトの例](/images/ja-jp/cdy7uua7fh8z/7reEOLI5CWxbpRzgZY7gxg/5cea15c9d8586a68df32c42d292c7478/MFA_-_Push_-_Japanese.png)</Frame>

3. ユーザーがAuth0 GuardianまたはカスタムGuardian SDKアプリを開き、アクセスしようとしているアプリケーションを選択する。
4. ユーザーが、［Account Detail（アカウント詳細）］ページの下部に表示されるOTPをコピーする。
5. ユーザーがMFAプロンプトにOTPを入力してチャレンジを完了する。

</Accordion>

<Accordion title="MFAチャレンジ OTPをMFAチャレンジとして使用する">

ユーザーがOTPで認証できるようにするには、**ワンタイムパスワード** をテナントの[MFA要素](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-factors)として有効化する必要があります。有効化すると、ユーザーがユニバーサルログインを通してログインするときに、OTPを使ってMFAプロンプトを完了することができます。MFA要素を有効化するには、[［Auth0 Dashboard］>［Security（セキュリティ）］>［Multi-factor Auth（多要素認証）］](https://manage.auth0.com/#/security/mfa)に移動します。

ユーザーはアプリケーションに初めてサインアップやログインするときに、MFA要素としてOTPを登録することができます。使用するデバイスの種類に応じて、[ユニバーサルログイン](/ja-jp/authenticate/login/auth0-universal-login)が以下のいずれかを表示します。

* **携帯電話以外のデバイス** ：ユニバーサルログインはQRコードを表示し、ユーザーがスキャンして登録を続けられるようにします。

<Frame>![Trouble Scanning?（スキャンできませんか？）リンクを表示するOTP登録プロンプトの例](/images/ja-jp/cdy7uua7fh8z/3kbyOBiLOpJiY8vI0kUqwg/8dba996a91cf3a66a9c7e4bd6ffd0b90/OTP_Challenge_3_-_Japanese.png)</Frame>

* **携帯電話** ：ユニバーサルログインはQRコードではなく、登録コードを直接表示します。

<Frame>![The temporary one-time password enrollment screen as displayed on a mobile device. ](/images/ja-jp/cdy7uua7fh8z/5QvQ9FLYnVZXINFAeLkIr9/e244b935a012172d8ce64f26d85f07b3/OTP_prompt_-_Japanese.png)</Frame>

どちらの方法でも、ユーザーは画面に表示された手順に従って、Auth0 GuardianアプリまたはカスタムのGuardian SDKアプリを認証の第2要素として登録できます。一般的に、このプロセスではユーザーがアプリケーションを適切なアプリに追加して、そのアプリケーション用のOTPを取得します。そして、ユーザーはOTPをユニバーサルログインのプロンプトに入力し、登録プロセスを完了させます。

登録を完了してから次回にユーザーがアプリケーションにログインするときには、チャレンジでAuth0 GuardianアプリまたはカスタムのGuardian SDKアプリからのOTPを入力して認証できます。

</Accordion>

## Auth0 Guardianアプリの設定

### ユーザーセキュリティ設定

Auth0 Guardianアプリでは、ユーザーはiOSおよびAndroidでパスコードと生体認証をアプリセキュリティのレイヤーとして有効にできます。ユーザーがこれらのオプションの1つ以上を有効にすると、プッシュ通知に応答したりワンタイムパスワードを取得したりする前に、これらのチャレンジを完了する必要があります。

iOSまたはAndroidデバイスでこれらのオプションを有効にするには、ユーザーは次の手順に従います。

<Tabs><Tab title="iOS">

iOSでAuth0 Guardianアプリのセキュリティ設定を有効にする方法：

1. アプリで、**ギアアイコン** を選択すると、設定メニューが開きます。
2. **［Passcode（パスコード）］** を選択し、パスコード保護を有効にします。
3. 6桁のパスコードを設定し、確認します。

これで、アプリはパスコードによって守られます。このパスコードを入力しないと、ユーザーはプッシュ通知への応答またはOTPの取得を行うことができません。

パスコード保護を有効にしたあと、ユーザーはセキュリティ対策の代わりにデバイスの生体認証を構成することができます。デバイスの生体認証を有効にする方法：

1. アプリで、**ギアアイコン** を選択すると、設定メニューが開きます。
2. **Face ID** や**Touch ID** といった利用可能なオプションの一つを選択し、デバイスの生体認証を有効にします。

</Tab><Tab title="Android">

AndroidでAuth0 Guardianアプリのセキュリティ設定を有効にする方法：

1. アプリで、**3点リーダーメニュー** を選択すると、設定メニューが開きます。
2. **［Always Ask for Passphrase（パスフレーズを常に聞く）］** オプションの切り替えを有効にしてください。
3. Auth0 Guardianアプリを設定している間に設定されたパスフレーズを入力します。

これで、アプリはAuth0 Guardianパスフレーズによって保護されました。このパスフレーズを入力しないと、ユーザーはプッシュ通知への応答またはOTPの取得を行うことができません。

パスフレーズ保護を有効にしたあと、ユーザーはセキュリティ対策の代わりにデバイスの生体認証を構成することができます。デバイスの生体認証を有効にする方法：

1. アプリで、**3点リーダーメニュー** を選択すると、設定メニューが開きます。
2. **［Use Biometrics to unlock（ロック解除に生体認証を使用する）］** オプションの切り替えを有効にします。

</Tab></Tabs>

### ローカリゼーションオプション

Auth0 Guardianアプリは、iOSおよびAndroidで複数の言語と方言のローカリゼーションをサポートしています。

設定メニューの言語セクションで、ユーザーは希望する言語を選択できます。デフォルトでは、アプリはデバイスシステムと同じ言語を使用します。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

プッシュ通知のコンテンツのほとんどは、ユーザーが選択した言語で表示されます。ただし、プッシュ通知のタイトルは翻訳されません。これはタイトルの入力後に言語設定が取得されるためです。

</Callout>

Auth0 Guardianアプリは、次の言語と方言をサポートしています。

<table class="table"><thead>
<tr>
<th><strong>言語</strong></th>
<th><strong>コード</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>アルバニア語</td>
<td>`sq`</td>
</tr>
<tr>
<td>アムハラ語</td>
<td>`am`</td>
</tr>
<tr>
<td>アルメニア語</td>
<td>`hy`</td>
</tr>
<tr>
<td>アゼルバイジャン語</td>
<td>`az`</td>
</tr>
<tr>
<td>バスク語</td>
<td>`eu-ES`</td>
</tr>
<tr>
<td>ベンガル語</td>
<td>`bn`</td>
</tr>
<tr>
<td>ボスニア語</td>
<td>`bs`</td>
</tr>
<tr>
<td>ブルガリア語</td>
<td>`bg`</td>
</tr>
<tr>
<td>カタルニア語</td>
<td>`ca-ES`</td>
</tr>
<tr>
<td>中国語 - 香港特別行政区</td>
<td>`zh-HK`</td>
</tr>
<tr>
<td>中国語 - 簡体</td>
<td>`zh-CN`</td>
</tr>
<tr>
<td>中国語 - 繁体</td>
<td>`zh-TW`</td>
</tr>
<tr>
<td>クロアチア語</td>
<td>`hr`</td>
</tr>
<tr>
<td>チェコ語</td>
<td>`cs`</td>
</tr>
<tr>
<td>デンマーク語</td>
<td>`da`</td>
</tr>
<tr>
<td>オランダ語</td>
<td>`nl`</td>
</tr>
<tr>
<td>英語</td>
<td>`en`</td>
</tr>
<tr>
<td>英語 - カナダ</td>
<td>`en-CA`</td>
</tr>
<tr>
<td>エストニア語</td>
<td>`et`</td>
</tr>
<tr>
<td>フィンランド語</td>
<td>`fi`</td>
</tr>
<tr>
<td>フランス語</td>
<td>`fr-FR`</td>
</tr>
<tr>
<td>フランス語 - カナダ</td>
<td>`fr-CA`</td>
</tr>
<tr>
<td>ガリシア語</td>
<td>`gl-ES`</td>
</tr>
<tr>
<td>ジョージア語</td>
<td>`ka`</td>
</tr>
<tr>
<td>ドイツ語</td>
<td>`de`</td>
</tr>
<tr>
<td>ギリシャ語</td>
<td>`el`</td>
</tr>
<tr>
<td>グジャラート語</td>
<td>`gu`</td>
</tr>
<tr>
<td>ヒンディー語</td>
<td>`hi`</td>
</tr>
<tr>
<td>ハンガリー語</td>
<td>`hu`</td>
</tr>
<tr>
<td>アイスランド語</td>
<td>`is`</td>
</tr>
<tr>
<td>インドネシア語</td>
<td>`id`</td>
</tr>
<tr>
<td>イタリア語</td>
<td>`it`</td>
</tr>
<tr>
<td>日本語</td>
<td>`ja`</td>
</tr>
<tr>
<td>カンナダ語</td>
<td>`kn`</td>
</tr>
<tr>
<td>韓国語</td>
<td>`ko`</td>
</tr>
<tr>
<td>ラトビア語</td>
<td>`lv`</td>
</tr>
<tr>
<td>リトアニア語</td>
<td>`lt`</td>
</tr>
<tr>
<td>マケドニア語</td>
<td>`mk`</td>
</tr>
<tr>
<td>マレー語</td>
<td>`ms`</td>
</tr>
<tr>
<td>マラヤーラム語</td>
<td>`ml`</td>
</tr>
<tr>
<td>マラーティー語</td>
<td>`mr`</td>
</tr>
<tr>
<td>モンゴル語</td>
<td>`mn`</td>
</tr>
<tr>
<td>モンテネグロ語</td>
<td>`cnr`</td>
</tr>
<tr>
<td>ミャンマー語</td>
<td>`my`</td>
</tr>
<tr>
<td>ノルウェー語</td>
<td>`no`</td>
</tr>
<tr>
<td>ノルウェー語 - ブークモール</td>
<td>`nb`</td>
</tr>
<tr>
<td>ノルウェー語 - ニーノシュク</td>
<td>`nn`</td>
</tr>
<tr>
<td>ポーランド語</td>
<td>`pl`</td>
</tr>
<tr>
<td>ポルトガル語 - ブラジル</td>
<td>`pt-BR`</td>
</tr>
<tr>
<td>ポルトガル語 - ポルトガル</td>
<td>`pt-PT`</td>
</tr>
<tr>
<td>パンジャブ語</td>
<td>`pa`</td>
</tr>
<tr>
<td>ルーマニア語</td>
<td>`ro`</td>
</tr>
<tr>
<td>ロシア語</td>
<td>`ru`</td>
</tr>
<tr>
<td>セルビア語</td>
<td>`sr`</td>
</tr>
<tr>
<td>スロバキア語</td>
<td>`sk`</td>
</tr>
<tr>
<td>スロベニア語</td>
<td>`sl`</td>
</tr>
<tr>
<td>ソマリ語</td>
<td>`so`</td>
</tr>
<tr>
<td>スペイン語</td>
<td>`es`</td>
</tr>
<tr>
<td>スペイン語 - アルゼンチン</td>
<td>`es-AR`</td>
</tr>
<tr>
<td>スペイン語 - ラテン アメリカ</td>
<td>`es-419`</td>
</tr>
<tr>
<td>スペイン語 - メキシコ</td>
<td>`es-MX`</td>
</tr>
<tr>
<td>スワヒリ語</td>
<td>`sw`</td>
</tr>
<tr>
<td>スウェーデン語</td>
<td>`sv`</td>
</tr>
<tr>
<td>タガログ語</td>
<td>`tl`</td>
</tr>
<tr>
<td>タマジット語</td>
<td>`zgh`</td>
</tr>
<tr>
<td>タミール語</td>
<td>`ta`</td>
</tr>
<tr>
<td>テルグ語</td>
<td>`te`</td>
</tr>
<tr>
<td>タイ語</td>
<td>`th`</td>
</tr>
<tr>
<td>トルコ語</td>
<td>`tr`</td>
</tr>
<tr>
<td>ウクライナ語</td>
<td>`uk`</td>
</tr>
<tr>
<td>ベトナム語</td>
<td>`vi`</td>
</tr>
<tr>
<td>ウェールズ語</td>
<td>`cy`</td>
</tr>
</tbody>
</table>

### Guardianアプリのテーマ

iOSとAndroidの両方のAuth0 Guardianアプリは、ライトモードとダークモードのテーマをサポートしています。

設定メニューのテーマセクションで、ユーザーは次のオプションを選択できます。

* **System（システム）** ：デフォルトのシステムテーマを使用します
* **Light（ライト）** ：ライトモードのテーマを有効にします
* **Dark（ダーク）** ：ダークモードのテーマを有効にします

### 保護されたアプリケーションのカスタマイズオプション

ユーザーがAuth0 Guardianアプリで保護されたアプリケーションを区別しやすくするために、各アプリケーションを個別の名前、アクセントカラー、アイコンでカスタマイズできます。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0 Guardianアプリでアプリケーションに割り当てられるデフォルトの名前は、使用している[テナント名](/ja-jp/get-started/tenant-settings/find-your-tenant-name-or-tenant-id)または[テナント設定](/ja-jp/get-started/tenant-settings)で指定されているフレンドリー名によって決まります。同様に、デフォルトのロゴには、テナント設定で指定されているロゴのURLが使用されます。

テナント設定を変更するには、[［Auth0 Dashboard］>［Settings（設定）］>［General（一般）］](https://manage.auth0.com/dashboard/#/tenant/general)に移動します。

</Callout>

保護されたアプリケーションをカスタマイズするには：

1. リストからアプリケーションを選択します。

   * **ヒント** ：アプリケーションを左にスワイプして、編集と削除のオプションを表示することもできます。
2. アカウントの詳細ページで **［Edit（編集）］** を選択します。
3. 必要に応じて、アプリケーションの名前、色、アイコンを更新します。
4. **［Save（保存）］** を選択します。

## Guardian SDK

[Guardian SDK](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-developer-resources/install-guardian-sdk)（[iOS](/ja-jp/secure/multi-factor-authentication/auth0-guardian/guardian-for-ios-sdk)と[Android](/ja-jp/secure/multi-factor-authentication/auth0-guardian/guardian-for-android-sdk)の両方で利用可能）を使用すると、ブランディングだけでなく、外観や操作性を完全に制御した独自の多要素認証アプリケーションが構築できます。Guardian SDKを使用すると、Guardianのように動作する独自のカスタムモバイルアプリケーションを構築したり、既存のモバイルアプリケーションでプッシュ通知を受信するなどのGuardian機能を統合したりできます。典型的なシナリオは、銀行アプリです。既存のモバイルアプリでGuardian SDKを使用して、誰かがATM取引を実行したときにプッシュ通知を受信して​​確認できます。

## アクションを使用してAuth0 Guardianで多要素認証を有効にする

アクション内でAuth0 Guardianを有効化するには、多要素認証を有効にする際に`provider`パラメーターとして`guardian`を渡します。

```javascript lines
exports.onExecutePostLogin = async (event, api) => {
  api.multifactor.enable('guardian', { allowRememberBrowser: false });
};
```

ユーザーが毎回Auth0 Guardianを使ってログインすることを強制するには、`allowRememberBrowser: false`を使ってアクションを作成します。

## Auth0 GuardianとAuthorization Extensionによる多要素認証

このテンプレートは例として条件が満たされた場合にプッシュ通知用にAuth0 Guardianで多要素認証をトリガーする始点を提供します。

初めてログインした後、ユーザーはデバイスを登録することができます。Mの詳細については、「多要素認証を有効にする」を参照してください。

```javascript lines
exports.onExecutePostLogin = async (event, api) => {
const groups = event.user.app_metadata.authorization.groups;
const GROUPS_WITH_MFA = {
// Add groups that need MFA here
// Example
admins: true
};

const needsMFA = !!groups.find(function (group) {
return GROUPS_WITH_MFA[group];
});

if (needsMFA) {
// optional, defaults to true. Set to false to force Guardian authentication every time.
// See https://auth0.com/docs/secure/multi-factor-authentication/customize-mfa#change-frequency-of-mfa-prompts for details
api.multifactor.enable('guardian', { allowRememberBrowser: false });
}

};
```

## もっと詳しく

* [Guardian SDKをインストールする](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-developer-resources/install-guardian-sdk)
* [Guardian.swift iOS SDK](/ja-jp/secure/multi-factor-authentication/auth0-guardian/guardian-for-ios-sdk)
* [Guardian for Android SDK](/ja-jp/secure/multi-factor-authentication/auth0-guardian/guardian-for-android-sdk)
* [MFA用プッシュ通知を構成する](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-factors/configure-push-notifications-for-mfa)
* [ユーザーの多要素認証のリセットと復旧コード](/ja-jp/secure/multi-factor-authentication/reset-user-mfa)
* [Guardianエラーコードのリファレンス](/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-developer-resources/guardian-error-code-reference)