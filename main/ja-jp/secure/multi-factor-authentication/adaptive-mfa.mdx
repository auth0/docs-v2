---
title: "Adaptive MFA"
permalink: "adaptive-mfa"
'description': "Adaptive MFAの仕組み、カスタマイズ方法、対応するフローなどについて説明します。"
'og:title': "Adaptive MFA"
'og:description': "Adaptive MFAの仕組み、カスタマイズ方法、対応するフローなどについて説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Adaptive MFA"
'twitter:description': "Adaptive MFAの仕組み、カスタマイズ方法、対応するフローなどについて説明します。"
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Adaptive MFAを使用するには、エンタープライズプランとAdaptive MFAアドオンが必要です。詳細については、「[Auth0の価格設定](https://auth0.com/pricing/)」を参照してください。

</Callout>

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-4" href="/ja-jp/glossary?term=adaptive-multi-factor-authentication" tip="Adaptive Multifactor Authentication: ログイン試行が信頼性の低いログインであると判断された場合にのみ、ユーザーに対してトリガーされる多要素認証（MFA）。" cta="用語集の表示">Adaptive MFA</Tooltip>は、実ユーザーの負担を増やさずに、不正者からテナントを保護する柔軟性と拡張性を備えた<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=multifactor-authentication" tip="多要素認証（MFA）: ユーザー名とパスワードに加えて、SMS経由のコードなどの要素を使用するユーザー認証プロセス。" cta="用語集の表示">MFA</Tooltip>ポリシーです。Adaptive MFAは、ログイントランザクションごとに潜在リスクを評価し、必要な場合は、さらなる検証をユーザーに求めます。

## 仕組み

ログイントランザクション中に、Adaptive MFAは以下の3つのリスク評価の分析に基づいて、 全体的な信頼スコアを計算します。

<table class="table"><thead>
<tr>
<th><strong>評価子</strong></th>
<th><strong>危険信号</strong></th>
<th><strong>判定方法</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>`NewDevice`</td>
<td>ユーザーがアカウントを使って過去30日以内に使用していないデバイスからサインインしようとしました。</td>
<td>ユーザーエージェントとブラウザーのクッキーを基にデバイスを特定します。ログイン時にデバイス情報をアカウントのデバイス一覧と照らし合わせます。</td>
</tr>
<tr>
<td>`ImpossibleTravel`</td>
<td>ユーザーがログインしようとしている地理的な位置が、最後にログインした場所から移動不可能な場所を示しています。</td>
<td>最後の有効な場所からサインインの場所までの距離を算出し、2つのサインイン間の経過時間から推定される移動速度を算出します。その速度を合理的に可能な移動速度と比較します。</td>
</tr>
<tr>
<td>`UntrustedIP`</td>
<td>疑わしい動作のあるIPアドレスからユーザーがサインインしようとしています。</td>
<td>Auth0はトラフィックイベントから情報を収集し、IPアドレスが悪意のある行為者によって高速攻撃に利用されている可能性を判断します。</td>
</tr>
<tr>
<td>`PhoneNumber`</td>
<td>ログインやサインアップ時に入力された電話番号が無効か、信頼できない出所からのものであると判断されました。</td>
<td>Auth0は電話番号の構造と出所の情報を収集し、正しいユーザーに使用されているかを判断します。</td>
</tr>
<tr>
<td>Overall Risk Score（総リスクスコア）</td>
<td>上記の`NewDevice`、`ImpossibleTravel`、`UntrustedIP` の要素を組み合わせたものです。`PhoneNumber`は総リスクスコアに影響しません。</td>
<td>Auth0は3つのスコアから総スコアを評価します。独自のビジネスロジックを実装したい場合には、<a href="https://auth0.com/docs/ja-jp/secure/multi-factor-authentication/adaptive-mfa/customize-adaptive-mfa">アクション</a>を使用します。</td>
</tr>
</tbody>
</table>

全体的な信頼スコアが低い（ログイントランザクションが高リスクである）と判断された場合、ユーザーはMFAで本人確認を行う必要があります。MFAに登録されていない場合、追加の検証手続きを済ませないと、ユーザーがこれを行う資格は得られません。

Adaptive MFAには、ユーザーが本物であることを確認するための包括的なセキュリティフローが含まれています。

<Frame>![Auth0のログインに関するAdaptive MFAのフロー図](/images/ja-jp/cdy7uua7fh8z/6NpeGW8jtQIma1jTVydW7U/ec8e3cdd110f60d4ce1f8be3878244b3/Adaptive_MFA_Flow.png)</Frame>

Adaptive MFAは、ありとあらゆる既存のMFAセッション(たとえば、ユーザーが前のMFAフロー中に**Remember this browser（このブラウザーを記憶する）** を選択した）を無視し、ユーザーがMFAチャレンジをバイパスすることを許可しません。

## Adaptive MFAをカスタマイズする

アクションを使用してMFAフローをカスタマイズすると、ユーザーに最高のエクスペリエンスを提供することができます。

リスク評価、信頼スコア、およびカスタマイズオプションの詳細については、「[Adaptive MFAをカスタマイズする](/ja-jp/secure/multi-factor-authentication/adaptive-mfa/customize-adaptive-mfa)」をお読みください。

## サポートと制限事項

### 認可フロー

Adaptive MFAはエンドユーザーから開始されるすべての認証フローと認可フローによってサポートされています。異なるフローとプロトコルの詳細については、「[認証フローと認可フロー](/ja-jp/get-started/authentication-and-authorization-flow)」および「[プロトコル](/ja-jp/authenticate/protocols)」をお読みください。

<table class="table"><thead>
<tr>
<th><strong>プロトコル</strong></th>
<th><strong>フロー</strong></th>
<th><strong>対応</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>OIDC/OAuth2</td>
<td>認可コードフロー</td>
<td>対応</td>
</tr>
<tr>
<td>OIDC/OAuth2</td>
<td>PKCEを用いた認可コードフロー</td>
<td>対応</td>
</tr>
<tr>
<td>OIDC/OAuth2</td>
<td>Form Postを用いた暗示的なフロー</td>
<td>対応</td>
</tr>
<tr>
<td>OIDC/OAuth2</td>
<td>ハイブリッドフロー</td>
<td>対応</td>
</tr>
<tr>
<td>OIDC/OAuth2</td>
<td>クライアントの資格情報</td>
<td>非対応</td>
</tr>
<tr>
<td>OIDC/OAuth2</td>
<td>デバイス認可</td>
<td>非対応</td>
</tr>
<tr>
<td>OIDC/OAuth2</td>
<td>リソース所有者のパスワード（ROP）</td>
<td>非対応</td>
</tr>
<tr>
<td>SAML</td>
<td>サービスプロバイダー起点（SP-initiated）</td>
<td>対応</td>
</tr>
<tr>
<td>SAML</td>
<td>IDプロバイダー起点（IdP-initiated）</td>
<td>非対応*</td>
</tr>
<tr>
<td>WS-Federation</td>
<td>該当なし</td>
<td>対応</td>
</tr>
<tr>
<td>AD/LDAP</td>
<td>該当なし</td>
<td>対応</td>
</tr>
</tbody>
</table>

\*Adaptive MFAは<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-1" href="/ja-jp/glossary?term=security-assertion-markup-language" tip="Security Assertion Markup Language（SAML）: パスワードなしに二者間で認証情報を交換できる標準化プロトコル。" cta="用語集の表示">SAML</Tooltip> <Tooltip data-tooltip-id="react-containers-DefinitionTooltip-2" href="/ja-jp/glossary?term=idp" tip="IDプロバイダー（IdP）: デジタルIDを保存および管理するサービス。" cta="用語集の表示">IdP</Tooltip>起点フローには対応していませんが、OIDCアプリケーションを使用してフローをシミュレートすることは可能です。詳細については、「[IdP起点SAMLサインオンをOIDCアプリに構成](/ja-jp/authenticate/protocols/saml/saml-sso-integrations/configure-idp-initiated-saml-sign-on-to-oidc-apps)」をお読みください。

### ソーシャル接続

Adaptive MFAは、ユーザーごとにメールアドレスが用意されている場合、ソーシャル接続タイプを完全にサポートします。

Adaptive MFAでは、ユーザーがMFAに登録していない場合に生じるメールチャレンジステップをメールアドレスで完了することを義務付けています。メールアドレスを使用できない場合は、メールチャレンジを実行することができず、トランザクションはブロックされます。このシナリオではセキュリティリスクは生じませんが、使える機能は制限されます。

ソーシャル接続を設定した後、メールアドレスを使用できるつもりでいたが実際にできない場合は、構成を確認した上で正しいスコープ、クレーム、および権限を要求しているか確認してください。サポートされるソーシャル接続とそのインストール方法の詳細については、「[Auth0 Marketplaceでのソーシャル接続](https://marketplace.auth0.com/features/social-connections)」をお読みください。

### Auth0の機能

以下の表は、Adaptive MFAを使ったAuth0の実装と機能をまとめたものです。

<table class="table"><thead>
<tr>
<th><strong>ログインフローの実装</strong></th>
<th><strong>Adaptive MFAサポートレベル</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ユニバーサルログイン</td>
<td>サポート</td>
</tr>
<tr>
<td>クラシックログイン、カスタマイズなし</td>
<td>サポート</td>
</tr>
<tr>
<td>クラシックログイン（Auth0がホスト）、`lock.js` Lockテンプレートのカスタムログインページ</td>
<td>サポート</td>
</tr>
<tr>
<td>クラシックログイン（Auth0がホスト）、`auth0.js`カスタムログインフォームテンプレートのカスタムログインページ</td>
<td>サポート</td>
</tr>
<tr>
<td>クラシックログイン（Auth0がホスト）、メールパスワードレスフローおよび`lock.js`パスワードレステンプレートのカスタムログインページ</td>
<td>サポート</td>
</tr>
<tr>
<td>クラシックログイン（Auth0がホスト）、SMSパスワードレスフローおよび`lock.js`パスワードレステンプレートのカスタムログインページ</td>
<td>要件である、メールアドレスを利用可能にしないため、サポートしていません。</td>
</tr>
<tr>
<td>リソース所有者のパスワード付与（ROPG）フローを使用するWebまたはネイティブアプリ（`lock.android`および`lock.swift` SDKの旧バージョンを使用するものを含む）</td>
<td>サポートしていますが、以下の制限付きです：<br/>•すべてのエンドユーザーがすでにMFAに登録されている場合のみ機能します（サインアップ時にユーザーが登録を求められた時）。登録されていないユーザーは、危険なシナリオでブロックされます。<br/>•ユーザーが新しいデバイスでログインしているかを判断するリスク評価は機能しません。ROPGフローは、リスクを特定するのに必要なブラウザークッキーをサポートしていません。<br/>•IPレピュテーションのリスク評価が機能するには、発信元のIPアドレスから、情報を含んだ`auth0-forwarded-for`ヘッダーを渡す必要があります。</td>
</tr>
<tr>
<td>埋め込みユニバーサルログインをサポートしているSDKの最新バージョンを使用しているネイティブアプリ</td>
<td>サポート</td>
</tr>
<tr>
<td>SDKの最新バージョンおよびROPGフローを使用しているネイティブアプリ</td>
<td>サポートしていますが、以下の制限付きです：<br/>•すべてのエンドユーザーがすでにMFAに登録されている場合のみ機能します（サインアップ時にユーザーが登録を求められた時）。登録されていないユーザーは、危険なシナリオでブロックされます。<br/>•ユーザーが新しいデバイスでログインしているかを判断するリスク評価は機能しません。ROPGフローは、リスクを特定するのに必要なブラウザークッキーをサポートしていません。<br/>•IPレピュテーションのリスク評価が機能するには、発信元のIPアドレスから、情報を含んだ`auth0-forwarded-for`ヘッダーを渡す必要があります。</td>
</tr>
<tr>
<td>cross-origin認証（co/認証エンドポイント）を実行する`lock.js`または`auth0.js`を使用しているあなた（Auth0ではなく）がホストするフロー</td>
<td>サポート</td>
</tr>
</tbody>
</table>

## もっと詳しく

* [Adaptive MFAを有効にする](/ja-jp/secure/multi-factor-authentication/adaptive-mfa/enable-adaptive-mfa)
* [Adaptive MFAをカスタマイズする](/ja-jp/secure/multi-factor-authentication/adaptive-mfa/customize-adaptive-mfa)
* [Adaptive MFAログイベント](/ja-jp/secure/multi-factor-authentication/adaptive-mfa/adaptive-mfa-log-events)