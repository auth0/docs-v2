---
title: "アクセストークンプロファイル"
permalink: "access-token-profiles"
'description': "Auth0がサポートするアクセストークンプロファイルについて説明します。"
'og:title': "アクセストークンプロファイル"
'og:description': "Auth0がサポートするアクセストークンプロファイルについて説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "アクセストークンプロファイル"
'twitter:description': "Auth0がサポートするアクセストークンプロファイルについて説明します。"
---

アクセストークンプロファイルは、APIに発行されるアクセストークンの形式とクレームを定義します。Auth0は以下のアクセストークンプロファイル（別名トークンダイアレクト）をサポートしています。

* Auth0のトークンプロファイル（デフォルトのアクセストークンプロファイル）
* RFC 9068トークンプロファイル（[IETF JWT Profile for OAuth 2.0 Access Tokens（RFC 9068）](https://datatracker.ietf.org/doc/html/rfc9068)に準拠したアクセストークンプロファイル）

<table class="table"><thead>
<tr>
<th><strong>トークンプロファイル</strong></th>
<th><strong>説明</strong></th>
<th><strong>トークンダイアレクト</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Auth0トークンプロファイル</td>
<td>デフォルトのトークンプロファイル。<a href="/ja-jp/secure/tokens/json-web-tokens">JSON Web Token (JWT)</a>としてフォーマットされたアクセストークンを発行します。</td>
<td>Auth0トークンプロファイルは、2つのトークンダイアレクトと関連しています：<ul><li >`access_token`</li><li >`access_token_authz`、または`permissions`クレームを含んだ`access_token`プロファイル。</li></ul></td>
</tr>
<tr>
<td>RFC 9068トークンプロファイル</td>
<td>JWTフォーマットのOAuth 2.0アクセストークンのエンコードのための<a href="https://datatracker.ietf.org/doc/html/rfc9068">IETF標準</a>に準拠したJSON Web Token (JWT)としてフォーマットされたアクセストークンを発行します。</td>
<td>The RFC 9068トークンプロファイルは、2つのトークンダイアレクトと関連しています：<ul><li >`rfc9068_profile`</li><li >`rfc9068_profile_authz`または`permissions`クレームを含んだ`rfc9068_profile`プロファイル</li></ul></td>
</tr>
</tbody>
</table>

どちらのアクセストークンプロファイルも<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-3" href="/ja-jp/glossary?term=json-web-token" tip="JSON Web Token（JWT）: 二者間のクレームを安全に表現するために使用される標準IDトークン形式（および多くの場合、アクセストークン形式）。" cta="用語集の表示">JWT</Tooltip>を発行しますが、JWTの[トークン形式は異なります](#token-profile-differences)。どちらのアクセストークンプロファイルも[Role-Based Access Control（RBAC）](/ja-jp/get-started/apis/enable-role-based-access-control-for-apis)を有効にして、アクセストークンへのアクセス許可クレームを追加できます。

APIのアクセストークンプロファイルを構成するには、「[アクセストークンプロファイルを構成する](/ja-jp/get-started/apis/configure-access-token-profile)」をお読みください。

### Auth0プロファイルのサンプルトークン

```json lines
{
  "iss": "https://my-domain.auth0.com/",
  "sub": "auth0|123456",
  "aud": [
    "https://example.com/health-api",
    "https://my-domain.auth0.com/userinfo"
  ],
  "azp": "my_client_id",
  "exp": 1311281970,
  "iat": 1311280970,
  "scope": "openid profile read:patients read:admin",
  "my_custom_claim": "my_custom_value"
}
```

### RFC 9068プロファイルのサンプルトークン

```json lines
{
  "iss": "https://my-domain.auth0.com/",
  "sub": "auth0|123456",
  "aud": [
    "https://example.com/health-api",
    "https://my-domain.auth0.com/userinfo"
  ],
  "client_id": "my_client_id",
  "exp": 1311281970,
  "iat": 1311280970,
  "jti":"73WakrfVbNJBaAmhQtEeDv",
  "scope": "openid profile read:patients read:admin",
  "my_custom_claim": "my_custom_value"
}
```

## トークンプロファイルの違い

Auth0プロファイルとRFC 9068プロファイルはトークン形式の異なるJWTを発行します。主な違いは以下の通りです。

* RFC 9068プロファイルには`jti`クレームが組み込まれており、JWTに一意の識別子を提供する。
* Auth0プロファイルは`azp`クレームを使用してクライアントIDを表すが、RFC 9068プロファイルは`client_id`クレームを使用する。
* RFC 9068プロファイルは、認証フローを表すAuth0固有のクレームである`gty`クレームは使用しない。

### ヘッダー

<table class="table"><thead>
<tr>
<th><strong>データ</strong></th>
<th><strong>RFC 9068プロファイル</strong></th>
<th><strong>Auth0プロファイル</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>`type`</td>
<td>`at+jwt`</td>
<td>`JWT`</td>
</tr>
<tr>
<td>`alg`</td>
<td>署名アルゴリズム。例：`RS256`</td>
<td>署名アルゴリズム。例：`RS256`</td>
</tr>
</tbody>
</table>

### クレーム

<table class="table"><thead>
<tr>
<th><strong>クレーム</strong></th>
<th><b>説明</b></th>
<th><b>RFC 9068プロファイルに存在</b></th>
<th><b>Auth0プロファイルに存在</b></th>
<th><strong>サンプルのクレーム</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>`iss`</td>
<td>アクセストークンを発行するAuth0テナントの発行者識別子です。</td>
<td>有</td>
<td>有</td>
<td>テナントドメイン：`https://tenant.auth0.com/`</td>
</tr>
<tr>
<td>`sub`</td>
<td>サブジェクトクレームは、アクセストークンがどのユーザーまたはアプリケーションに発行されたかを示します：<ul><li >認可コードフローなど、エンドユーザーが関わる付与の場合、`sub`クレームは`user_id`になります。</li><li >クライアント資格情報付与を用いたM2Mアプリケーションで、エンドユーザーが関わらない場合、`sub`クレームはアプリケーションの一意の識別子になります。</li></ul></td>
<td>有</td>
<td>有</td>
<td><ul><li >ユーザーID：`auth0`</li></ul></td>
</tr>
<tr>
<td>`aud`</td>
<td>オーディエンスクレームは、アクセストークンの意図された受信者を示します。</td>
<td>有</td>
<td>有</td>
<td>`"https://test-server/api"`または`[ "https://test-server/api", "https://test.local.dev.auth0.com/userinfo" ]`</td>
</tr>
<tr>
<td>`client_id`</td>
<td>アクセストークンを要求したアプリケーションのクライアントIDです。</td>
<td>有</td>
<td>無</td>
<td>クライアント ID：`K1AUPhZq8mRi0Q0pjhkfu1D7y6KjDQja`</td>
</tr>
<tr>
<td>`azp`</td>
<td>アクセストークンを要求したアプリケーションのクライアントIDです。</td>
<td>無</td>
<td>有</td>
<td>クライアント ID：`K1AUPhZq8mRi0Q0pjhkfu1D7y6KjDQja`</td>
</tr>
<tr>
<td>`exp`</td>
<td>有効期限です。これ以降、アクセストークンを受け付けて処理してはいけません。</td>
<td>有</td>
<td>有</td>
<td>エポックタイムスタンプ（秒単位）：`1516238022`</td>
</tr>
<tr>
<td>`iat`</td>
<td>アクセストークン発行のタイムスタンプです。</td>
<td>有</td>
<td>有</td>
<td>エポックタイムスタンプ（秒単位）：`1516239022`</td>
</tr>
<tr>
<td>`scope`</td>
<td>発行されたアクセストークンのスコープです。詳細については、「<a href="/ja-jp/get-started/apis/scopes">スコープ</a>」をお読みください。</td>
<td>有</td>
<td>有</td>
<td>`"openid profile offline_access"`</td>
</tr>
<tr>
<td>`jti`</td>
<td>アクセストークンの一意の識別子です。</td>
<td>有</td>
<td>無</td>
<td>一意の文字列識別子です。`aBv9njtYfwL4xfPZyEwz9m`</td>
</tr>
<tr>
<td>`gty`</td>
<td>アプリケーションがアクセストークンの要求に使用した<a href="/ja-jp/get-started/applications/application-grant-types">付与タイプ</a>です。`password`や`refresh_token`付与タイプにのみ存在します。</td>
<td>無</td>
<td>状況による</td>
<td>付与タイプ：`password`</td>
</tr>
<tr>
<td>`permissions`</td>
<td>ロールに応じて、ユーザーまたはアプリケーションに付与可能な権限です。APIで__［Enable RBAC（RBACを有効にする）］<strong>と</strong>［Add permissions in the Access Token（アクセストークンに権限を追加する）］__が有効化されている場合にのみ含まれます。詳細については、「<a href="/ja-jp/get-started/apis/enable-role-based-access-control-for-apis">APIにロールベースのアクセス制御を有効にする</a>」をお読みください。</td>
<td>状況による</td>
<td>状況による</td>
<td>`[ "create:bar", "create:foo", "read:bar", "read:foo" ]`</td>
</tr>
<tr>
<td>`org_id`</td>
<td>組織IDです。ユーザーが組織を通して認証した場合に追加されます。詳細については、「<a href="/ja-jp/manage-users/organizations/using-tokens">トークンと組織で作業する</a>」をお読みください。</td>
<td>状況による</td>
<td>状況による</td>
<td>組織ID：`org_9ybsU1dN2dKfDkBi`</td>
</tr>
<tr>
<td>`org_name`</td>
<td>組織名。ユーザーが組織を通して認証し、__［Organization Names in Authentication API（Authentication APIで組織名を使用する）］__の設定が有効な場合に追加されます。詳細については「<a href="/ja-jp/manage-users/organizations/configure-organizations/use-org-name-authentication-api">Authentication APIで組織名を使用する</a>」をお読みください。</td>
<td>状況による</td>
<td>状況による</td>
<td>組織名：`my_organization`</td>
</tr>
<tr>
<td>`authorization_details`</td>
<td>Rich Authorization Request（RAR）で使用されている認可の詳細情報です。詳細については、「<a href="/ja-jp/get-started/authentication-and-authorization-flow/authorization-code-flow/authorization-code-flow-with-rar">Rich Authorization Requestsを使用した認可コードフロー</a>」をお読みください。</td>
<td>状況による</td>
<td>状況による</td>
<td>`{  "type": "money_transfer",  "instructedAmount": {"amount": 2500, "currency": "USD"},   "destinationAccount": "xxxxxxxxxxx9876",  "beneficiary": "Hanna Herwitz", }`</td>
</tr>
<tr>
<td>`cnf`</td>
<td><a href="/ja-jp/get-started/applications/configure-mtls/set-up-resource-server-for-token-binding">mTLSトークンバインディング</a>に対応の確認クレームです。</td>
<td>状況による</td>
<td>状況による</td>
<td>`{"x5t#S256":"A4DtL2JmUMhAsvJj5tKyn64SqzmuXbMrJa0n761y5v0"}`</td>
</tr>
<tr>
<td>カスタムクレーム</td>
<td>カスタムクレームは、アクションを使ってアクセストークンに追加することができます。詳細については「<a href="/ja-jp/secure/tokens/json-web-tokens/create-custom-claims">カスタムクレームを作成する</a>」をお読みください。</td>
<td>状況による</td>
<td>状況による</td>
<td>`"favorite_color": “blue”`</td>
</tr>
</tbody>
</table>