---
title: "ユーザープロファイルの構造"
permalink: "user-profile-structure"
'description': "Auth0のユーザープロファイルで使用可能な属性を一覧表示します。"
'og:title': "ユーザープロファイルの構造"
'og:description': "Auth0のユーザープロファイルで使用可能な属性を一覧表示します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ユーザープロファイルの構造"
'twitter:description': "Auth0のユーザープロファイルで使用可能な属性を一覧表示します。"
---

Auth0の正規化されたユーザープロファイルには、複数のコンポーネントがあります。

* **Details（詳細）** ：コアユーザープロファイルオブジェクトで、あらかじめ定義された属性に名前、メール、最後のログインの日時などの基本情報が含まれています。このオブジェクトには、ユーザーのソース接続からの情報が含まれることもあります。多くのユーザー属性はルートの属性（`user`オブジェクトの最初またはルートレベルに記録されている属性）で、そのいくつかは変更することができます。
* **Metadata（メタデータ）** ：2次的なストレージとして機能する2つのサブオブジェクト（`user_metadata`と`app_metadata`）で、ユーザーの追加情報をカスタマイズ可能な属性に記録します。`app_metadata`と`user_metadata`を使用するタイミングを含む詳細は、「[ユーザープロファイルでのメタデータの使い方](/ja-jp/manage-users/user-accounts/metadata)」をお読みください。

## ユーザープロファイル属性

以下の属性はユーザープロファイルで使用することができます。それらの多くの属性はルートの属性（`user`オブジェクトの最初またはルートレベルに記録されている属性）で、以下でも記載があるように、そのいくつかは更新、インポート、エクスポートすることができます。

プライバシーの観点から、Auth0によって保管されるべきではないユーザーフィールドがある場合には、Auth0のデータベースで保管して欲くない属性をDenyList（拒否リスト）に追加することができます。詳細については、「[ユーザー属性をDenyList（拒否リスト）に追加する](/ja-jp/secure/security-guidance/data-security/denylist)」をお読みください。

特に設定を変更しない限り、Auth0以外のIDプロバイダー（Google、Facebook、Xなど）によって提供されるユーザープロファイル属性は、ユーザーがログインするたびにIDプロバイダーから更新されるため、直接編集することはできません。

正規化ユーザープロファイルのルート属性である`name`、`nickname`、`given_name`、`family_name`、`picture`を編集可能にするには、[接続がAuth0と同期されるように構成](/ja-jp/manage-users/user-accounts/user-profiles/configure-connection-sync-with-auth0)して、ユーザー属性がユーザープロファイルの作成時のみIDプロバイダーに更新されるようにしなければなりません。そうすれば、これらのルート属性を個別に、または一括インポートを通じて編集できるようになります。

| 名前 | タイプ | 説明 | <a href="/ja-jp/users/search">検索</a> | <a href="/ja-jp/api/management/guides/users/update-root-attributes-users">更新</a> | <a href="/ja-jp/users/guides/bulk-user-imports">インポート</a> | <a href="/ja-jp/users/guides/bulk-user-imports#request-bulk-import">インポート中のアップサート</a> | <a href="/ja-jp/users/guides/bulk-user-exports">エクスポート</a> |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| `app_metadata` | オブジェクト | サポートプランやセキュリティロール（認可コア機能セットを使用しない場合）、アクセス制御グループなど、ユーザーのアクセスに影響を与える情報を保存するカスタムフィールド。詳細については、<a href="/ja-jp/users/concepts/overview-user-metadata">メタデータの概要</a>を参照してください。 | 可 | 可 | 可 | 可 | 可 |
| `blocked` | ブール値 | ユーザーがブロックされているかどうかを示します。インポートにより、サブスクラバーはユーザーがAuth0への移行時にブロックされたままであることを確認できます。 | 可 | 可 | 可 | 不可 | 可 |
| `blocked_for` | 配列（オブジェクト） | 総当たり攻撃の疑いがあるためにブロックされたIPアドレス。 | 不可 | 不可 | 不可 | 不可 | 不可 |
| `created_at` | 日時 | ユーザープロファイルが最初に作成された時間を示すタイムスタンプ。 | 可 | 不可 | 不可 | 不可 | 可 |
| `email` | テキスト | (一意) ユーザーのメールアドレス。 | 可 | 可 | 可 | 不可 | 可 |
| `email_verified` | ブール値 | ユーザーがメールアドレスを確認したかどうかを示します。 | 可 | 可 | 可 | 可 | 可 |
| `family_name` | テキスト | ユーザーの姓。 | 可 | 可 | 可 | 可 | 可 |
| `given_name` | テキスト | ユーザーの名。 | 可 | 可 | 可 | 可 | 可 |
| `guardian_authenticators` | 配列 (オブジェクト) | ユーザーが設定したガーディアンのバックアップ認可方法（SMSや回復コードなど）についての詳細情報。 | 不可 | 不可 | 不可 | 不可 | 不可 |
| `identities` | 配列 (オブジェクト) | <p>ユーザーを最初に認証したIDプロバイダーから取得された情報を格納します。ユーザーは、<a href="/ja-jp/users/concepts/overview-user-account-linking">自身のプロファイルを複数のIDプロバイダーにリンク</a>することもできますが、その場合にはそれらのIDもこの配列に含まれます。個別のIDプロバイダーオブジェクトのコンテンツはプロバイダーによって異なりますが、一般的には次のものを含みます。</p><ul><li>`connection`（テキスト）：ユーザーの認証に使用されるAuth0接続の名前。</li><li>`isSocial`（ブール値）：接続がソーシャル接続であるかどうかを示します。</li><li>`provider`（テキスト）：Facebook、Google、SAML、独自のプロバイダーなど、ユーザーを認証するエンティティの名前。</li><li>`user_id`（テキスト）：この接続/プロバイダーのユーザーの一意の識別子。</li><li>`profileData`（オブジェクト）：接続に関連付けられたユーザー情報。プロファイルがリンクされると、セカンダリアカウントに関連付けられたユーザー情報が入力されます。</li></ul>その中には、プロバイダーに使用されるAPIアクセストークンを含むものもあります。 | 可 | 不可 | 不可 | 不可 | 可 |
| `last_ip` | テキスト | ユーザーの前回のログインに関連するIPアドレス。 | 可 | 不可 | 不可 | 不可 | 可 |
| `last_login` | 日時 | ユーザーが前回ログインした時間を示すタイムスタンプ。ブロックされているユーザーがログインした場合、ブロックされたセッションが`last_login`を更新します。`user&lt;`オブジェクトを使用して<a href="/ja-jp/rules">ルール</a>内からこのプロパティを使用している場合、その値はルールをトリガーしたログインに関連付けられます。これは、ルールがログイン後に実行されるためです。 | 可 | 不可 | 不可 | 不可 | 可 |
| `last_password_reset` | 日時 | ユーザーのパスワードが前回リセット/変更された時間を示すタイムスタンプ。ユーザーの作成時には、このフィールドは存在しません。このプロパティは、データベース接続でのみ利用できます。 | 不可 | 不可 | 不可 | 不可 | 可 |
| `logins_count` | 整数 | ユーザーがログインした回数。ブロックされているユーザーがログインした場合、ブロックされたセッションが`logins_count`に算入されます。 | 可 | 不可 | 不可 | 不可 | 可 |
| `multifactor` | 配列 (文字列) | ユーザーが登録されている多要素プロバイダーのリスト。 | 不可 | 不可 | 不可 | 不可 | 可 |
| `multifactor_last_modified` | 日時 | ユーザーの多要素認証が前回更新された日時。 | 不可 | 不可 | 不可 | 不可 | 可 |
| `name` | テキスト | ユーザーのフルネーム。 | 可 | 可 | 可 | 可 | 可 |
| `nickname` | テキスト | ユーザーのニックネーム。 | 可 | 可 | 可 | 可 | 可 |
| `phone_number` | テキスト | ユーザーの電話番号。SMS接続のあるユーザーに対してのみ有効です。 | 可 | 可 | 不可 | 不可 | 可 |
| `phone_verified` | ブール値 | ユーザーが電話番号を確認したかどうかを示します。SMS接続のあるユーザーに対してのみ有効です。 | 可 | 可 | 不可 | 不可 | 可 |
| `picture` | テキスト | <a href="/ja-jp/users/guides/change-user-pictures">ユーザーのプロファイル画像</a>をポイントするURL。 | 不可 | 可 | 可 | 可 | 可 |
| `tenant` | テキスト | 使用されているテナントの名前。 | 不可 | 不可 | 不可 | 不可 | 不可 |
| `updated_at` | 日時 | ユーザーのプロフィールが前回更新/変更された日時を示すタイムスタンプ。`last_login`への変更は更新とみなされるため、ほとんどの場合、`updated_at`は`last_login`と一致します。 | 可 | 不可 | 不可 | 不可 | 可 |
| `user_id` | テキスト | （一意）ユーザーの識別子。インポートすることで、ユーザーレコードはマッピングテーブルを使用せずに、複数のシステムに渡って同期することができます。 | 可 | 不可 | 可 | 不可 | 可 |
| `user_metadata` | オブジェクト | 勤務先住所、自宅住所、ユーザー設定など、ユーザーのアクセスに影響を与えないユーザーの情報を保存するカスタムフィールド。詳細については、<a href="/ja-jp/users/concepts/overview-user-metadata">メタデータの概要</a>をお読みください。 | 可 | 可 | 可 | 可 | 可 |
| `username` | テキスト | （一意）ユーザーのユーザー名。 | 可 | 可 | 可 | 不可 | 可 |

### ユーザープロファイルの検証

Auth0では、ユーザープロファイルの特定のフィールドについて、特定の検証スキーマを受け入れています。以下の表で、プロファイル属性値の設定における要件をご確認ください。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

ユーザープロファイルに保存される文字は、すべて小文字に変換されます。

これは、すべてのAuth0データベース接続に当てはまります。Auth0 DBが信頼できる情報源でない場合（たとえば、インポートモードが無効化されたカスタムDB）や、他の種類のソーシャルエンタープライズ接続でAuth0が信頼できる情報源でない場合、メールアドレスは小文字に変換されず、そのままで保持されます。

</Callout>

<table class="table"><thead>
<tr>
<th>フィールド</th>
<th>タイプ</th>
<th>文字数制限</th>
<th>検証</th>
</tr>
</thead>
<tbody>
<tr>
<td>`email`</td>
<td>メール</td>
<td>ユーザーまたはローカル部分では64文字、ドメイン部分では256文字が上限です。</td>
<td><a href="https://json-schema.org/understanding-json-schema/reference/string#email-addresses">JSON検証スキーマ</a></td>
</tr>
<tr>
<td>`username`</td>
<td>文字列</td>
<td>デフォルトで許容されるユーザー名の長さは1～15文字です。128文字が上限です。</td>
<td>ユーザー名フィールドは以下の文字を受け付けます。<br/> 英数字（アクセント記号を除く。自動的に小文字に変換されます）<br/>アットマーク（@）（ただし、メールアドレスは許容されません）<br/>キャレット（^）<br/>ドル記号（$）<br/>ドット（.）<br/>感嘆符（!）<br/>抑音符号（`）<br/>ハイフン（-）<br/>ナンバーサイン（#）<br/>プラス（+）<br/>シングルクォーテーション（'）<br/>チルダ（~）<br/>アンダースコア（_）<br/>他の文字や記号は許容されません。Auth0はカスタムデータベースへの入力を検証またはサニタイズしません。</td>
</tr>
<tr>
<td>`phone_number`</td>
<td>電話</td>
<td>標準形式です。<br/>電話番号はE.164形式でなければなりません。</td>
<td>正規表現：^\+[0-9]{1,15}$ <br/></td>
</tr>
<tr>
<td>`password`</td>
<td>文字列</td>
<td>設定可能なパスワードの最小長は1バイト、最大長は72バイトです。</td>
<td>標準文字：ASCII 33～126の範囲に含まれる以下の文字が有効です。<br/>A～Zの大文字<br/>a～zの小文字<br/>0～9の数字<br/>許可される特殊記号<br/></td>
</tr>
<tr>
<td>`name`</td>
<td>文字列</td>
<td>1～150文字です</td>
<td>すべてのUTF-8文字に対応しています</td>
</tr>
<tr>
<td>`nickname`</td>
<td>文字列</td>
<td>1～350文字です</td>
<td>すべてのUTF-8文字に対応しています</td>
</tr>
<tr>
<td>`family_name`</td>
<td>文字列</td>
<td>1～150文字です</td>
<td>すべてのUTF-8文字に対応しています</td>
</tr>
<tr>
<td>`given_name`</td>
<td>文字列</td>
<td>1～150文字です</td>
<td>すべてのUTF-8文字に対応しています</td>
</tr>
</tbody>
</table>

他の3つのフィールドは厳密にはユーザープロファイルの一部ではありませんが、ユーザーをインポートする際には関連性が高いかもしれません。

* `password_hash`（テキスト）：ユーザーの接続のためにハッシュ化されたパスワードです。ユーザーが作成されると、Auth0は[bcrypt](https://auth0.com/blog/hashing-in-action-understanding-bcrypt/)を使用してパスワードを保護します。互換性のあるハッシュ化されたパスワードをインポートすることで、ユーザーはパスワードを保持できるようになるため、スムーズなエクスペリエンスを提供することができます。互換性のあるパスワードは、bcrypt $2a$または$2b$を使ってハッシュ化し、saltRoundsを10回繰り返したものでなければなりません。このフィールドはユーザーが初めてインポートされる際にのみ提供可能であることに注意してください。後で更新することはできません。
* `custom_password_hash`（オブジェクト）：他のアルゴリズムを使ってユーザーの接続を作成した場合のハッシュ化されたパスワードです。これは、`password_hash`フィールドの代わりに使用します。ユーザーが最初にインポートされた`custom_password_hash`を使ってログインしなかった場合、一括インポートの処理中に`custom_password_hash`を更新できます。

## もっと詳しく

* [一括ユーザーインポート](/ja-jp/manage-users/user-migration/bulk-user-imports)
* [一括ユーザーインポートのデータベーススキーマと例](/ja-jp/manage-users/user-migration/bulk-user-import-database-schema-and-examples)
* [ユーザープロファイルの確認](/ja-jp/troubleshoot/authentication-issues/check-user-profiles)