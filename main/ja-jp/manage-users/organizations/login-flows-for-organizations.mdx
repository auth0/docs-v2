---
title: "Organizationのログインフロー"
permalink: "login-flows-for-organizations"
'description': "OrganizationでAuth0ログインフローを使用する方法"
'og:title': "Organizationのログインフロー"
'og:description': "OrganizationでAuth0ログインフローを使用する方法"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Organizationのログインフロー"
'twitter:description': "OrganizationでAuth0ログインフローを使用する方法"
---

[Auth0 Organizations](/ja-jp/manage-users/organizations)を使用すると、B2B製品またはSaaSアプリケーションのリーダーは、マルチテナントアーキテクチャを構築し、識別トークンを適切に保存し、エンドユーザーのログインの手間を最小限に抑えることができます。

#### Organizationを使用するようにアプリケーションを構成する

[Auth0アプリケーション](/ja-jp/get-started/applications)は、[［Organizations（組織）］](/ja-jp/manage-users/organizations/configure-organizations/define-organization-behavior)タブで個人、ビジネスユーザー、またはその両方の3つのユーザータイプをサポートするように構成できます。

<Frame>![](/images/ja-jp/cdy7uua7fh8z/Rz0i0zgIY7Yugx8M3D7pw/e1de8b84066d50709fee397dbe18e008/2025-01-24_13-47-13.png)</Frame>

消費者向けに明示的に設計されたアプリケーション（NetflixやSpotifyなど）では、Organization管理は必要**ない** 可能性があります。**個人** を選択すると、ユーザーはアプリケーションに直接ログインし、Organizationのコンテキストは提供されません。

B2BまたはSaaSアプリケーション（SlackやJiraなど）は**ビジネスユーザー** によってより適切に提供されるため、エンドユーザーはAuth0 Organizationのコンテキストでのみアプリケーションにアクセスできます。複数のOrganizationに所属するユーザーは、ログインフローの後にOrganization Pickerに誘導され、参加した最初の20の組織が表示されます。

<Frame>![](/images/ja-jp/cdy7uua7fh8z/3b6s5amCEjFyRTKWkTrFZI/ae9cd3bcbd55d299d7bdddfb8747ea0b/image4.png)</Frame>

エンドユーザーがアプリケーションで個人アカウントとビジネスアカウントの両方を保持する可能性がある場合は、**[Both（両方）]** を選択します。たとえば、Githubでは、個人用と業務用の両方のコードリポジトリが保存されることがよくあります。

アプリケーションのユーザータイプは、<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>（上記参照）または<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip>を通じて構成できます。具体的には、[クライアント更新](/ja-jp/api/management/v2/clients/patch-clients-by-id)エンドポイントの`organization_usage`パラメーターを使用して、適切なユーザータイプを設定します。両方の方法の詳細については、「[Organizationの動作を定義する](/ja-jp/manage-users/organizations/configure-organizations/define-organization-behavior)」を参照してください。

#### アプリケーションのログインフローを構成する

**［Business Users（ビジネスユーザー）］** または **［Both（両方）］** を選択した後、ユーザーがアプリケーションにログインする際のエクスペリエンスをさらにカスタマイズできます。

<Frame>![](/images/ja-jp/cdy7uua7fh8z/3e18zLZ8dPeXBohvBLpKAU/9626e0c79543c3b6ba122e5bf92abb85/Login_Flow_-_Prompt_-_Japanese.png)</Frame>

ほとんどの組織では、**［Prompt for Credentials（資格情報の入力を求める）］** を選択してから、[［Identifier First Authentication（Identifier First認証）］](/ja-jp/authenticate/login/auth0-universal-login/identifier-first)を有効にする必要があります。ユーザーがログインしようとしているOrganizationがすでにわかっている場合は、**プロンプトなし** オプションと[Organizationを用いたカスタム開発](/ja-jp/manage-users/organizations/custom-development)を使用すると、アプリでブランド化されカスタマイズされたログインフローを維持できます。管理者は、**［Prompt for Organization（Organizationの入力を求める）］** トグルを有効にして、ユーザーがログインするOrganizationを特定するように要求することで、エンドユーザーエクスペリエンスをさらに調整できます。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

**注意** ：［Prompt for Credentials（資格情報を求める）］を選択した場合でも、必要に応じて、ユーザーに対し、[特定のOrganizationのログインプロンプトでログイン](/ja-jp/manage-users/organizations/custom-development#i-want-users-to-log-in-to-a-specified-organization)するよう指示できます。

</Callout>

アプリケーションのログインフローは、Auth0 Dashboard（上述）またはManagement APIから構成できます。具体的には、[クライアントの更新](/ja-jp/api/management/v2/clients/patch-clients-by-id)エンドポイントの`organization_require_behavior`パラメーターを使用して、適切なフローを設定します。両方の方法の詳細については、「[Organizationの動作を定義する](/ja-jp/manage-users/organizations/configure-organizations/define-organization-behavior)」を参照してください。

##### 識別子優先認証

エンタープライズアプリケーションで[エンタープライズフェデレーション](/ja-jp/authenticate/enterprise-connections)を使用している場合は、認証プロファイルで[ホーム領域検出を使用したIdentifier First認証](/ja-jp/authenticate/login/auth0-universal-login/identifier-first)をアクティブ化できます。有効にすると、ホーム領域検出は既知のドメインからメールアドレスを検出し、適切なWorkforceログインに自動的に送信します。

<Frame>![](/images/ja-jp/cdy7uua7fh8z/1vyoeNqhRmqP3iYP58X59Y/e52a1788430b0b734785d2238541bd32/image2.png)</Frame>

このフローでは、ユーザーのメールドメインがエンタープライズ接続のIDプロバイダー（<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-2" href="/ja-jp/glossary?term=idp" tip="IDプロバイダー（IdP）: デジタルIDを保存および管理するサービス。" cta="用語集の表示">IdP</Tooltip>）ドメインと一致しない場合に、1つのAuth0[データベース接続](/ja-jp/authenticate/database-connections/custom-db)をフォールバックとして使用できます。ユーザーには、組織のログインプロンプトではなくアプリケーションのログインプロンプトが表示され、[アプリケーションで有効になっている接続](/ja-jp/get-started/applications/update-application-connections)がユーザーに表示されます。

ユーザーがメールアドレスを入力すると、Auth0は、このアプリケーションで有効になっているエンタープライズ接続 **と** Organizationsで有効になっているすべてのエンタープライズ接続とを照合します。一致が見つかった場合、ユーザーは関連付けられているIdPで認証するように指示されます。一致が見つからない場合、パスワードフィールドが表示されます。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

場合によっては、異なるOrganizationに複数のデータベース構成が割り当てられているなどの理由で、ユーザーのメールアドレスがどのIdPに関連付けられているのかをAuth0が特定できないことがあります。そのような場合には、ログイン開始プロンプトとして［Prompt for Organization（組織を求める）］を選択するか、Auth0に`organization`パラメーターを送ります。

</Callout>

Management APIを使用して、識別子優先認証を構成できます。具体的には、[更新プロンプト設定](/ja-jp/api/management/v2/prompts/patch-prompts)エンドポイントの`identifier_first`パラメータを使用します。

##### 自動メンバーシップ

ユーザーをOrganizationに直接招待または割り当てる代わりに、フェデレーションIdPで認証できるすべてのユーザーにOrganizationへのアクセスを許可することができます。これらのシナリオでは、Auth0は[自動メンバーシップ](/ja-jp/manage-users/organizations/configure-organizations/grant-just-in-time-membership)設定を推奨します。

自動メンバーシップは通常、[Organizationのログインプロンプトを使用してユーザーをログインするように指示する](/ja-jp/manage-users/organizations/custom-development)ことでトリガーされます。これにより、ユーザーに代わって接続と組織のパラメーターを渡すことができます。ログイン前にユーザーの希望する組織を判別できない場合、資格情報のプロンプトフローは、自動メンバーシップが構成されている唯一の組織にメンバーシップを付与します。

ただし、ユーザーをログインに送信する前に、ユーザーの希望する組織を判別できないシナリオもあります。この場合、前述の資格情報の入力を求めるフローを使用できますが、自動メンバーシップが有効化されている組織に対してこの接続が有効な接続として設定されている**組織が1つだけある** 場合にのみ、ユーザーに組織のメンバーシップが付与されることに注意してください。

自動メンバーシップを構成するには、Management APIを使用できます。具体的には、[[Modify an organization’s connection（組織の接続エンドポイントを変更する）]](https://auth0.com/docs/api/management/v2/organizations/patch-enabled-connections-by-connection-id)の`assign_membership_on_login`パラメータを使用します。