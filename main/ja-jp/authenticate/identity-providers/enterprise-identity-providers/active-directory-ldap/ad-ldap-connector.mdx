---
title: "AD/LDAPコネクター"
permalink: "ad-ldap-connector"
'description': "Active Directory LDAPコネクターとその仕組みについて説明します。"
'og:title': "AD/LDAPコネクター"
'og:description': "Active Directory LDAPコネクターとその仕組みについて説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "AD/LDAPコネクター"
'twitter:description': "Active Directory LDAPコネクターとその仕組みについて説明します。"
---

Auth0は、ネットワークにインストールするActive Directory/LDAPコネクターを介して、Lightweight Directory Access Protocol（LDAP）を使ってActive Directory（AD）と統合します。

<Warning>

AD/LDAPコネクターは、貴社がAD/LDAPサーバーを制御することを想定して設計されています。このコネクターは顧客のサーバーに **インストールしないでください** 。

貴社が顧客のユーザーに対し、エンタープライズの資格情報を使用したアプリケーションへのアクセスを許可する、というB2Bのシナリオの場合には、利用可能なエンタープライズ接続を使用して顧客のフェデレーションサービス（たとえば、顧客自身のAuth0サービス・ADFS・SAML IDプロバイダー）に接続します。

AD/LDAPコネクターを顧客のサーバーにインストールし、それが貴社のAuth0ドメインに直接接続された場合、顧客のユーザーのパスワードを貴社が直接処理しなければならなくなります。 **Auth0では、このような方法でのデプロイメントを推奨しておらず、サポートもしていません。**

</Warning>

AD/LDAPコネクター（1）は、Active Directory/LDAP（2）とAuth0 Service（3）間の橋渡し役です。AD/LDAPが通常内部ネットワークに制限されている一方、Auth0はまったく異なるコンテキストで実行されるクラウドサービスであるため、橋渡しを必要とします。

<Frame>![AD/LDAPコネクター - AD/LDAPをAuth0に統合する - 図](/images/ja-jp/cdy7uua7fh8z/1xMpdHrtor0TR7F1gZ96zL/d5b69baf2b7d9df1ac853f4661c4b379/ldap-connect.png)</Frame>

ユーザーがAuth0で認証を行う場合は、AD/LDAPコネクターにリダイレクトされます。A​D/LDAPコネクターはユーザーをADサービスに照らし合わせて検証した後、検証結果をAuth​0に返します。AD/LDAPコネクターは、LDAP、Kerberos、およびクライアント証明書に基づ​いた認証をサポートします。

詳細については、「[KerberosでAD/LDAPコネクターの認証を構成する](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-with-kerberos)」と「[クライアント証明書を使ってAD/LDAPコネクターの認証を構成する](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-client-certificates)」を参照してください。

## キャッシュ

AD/LDAPコネクターはユーザープロファイルと資格情報をキャッシュし（Auth0はユーザーのパスワードのハッシュを保管）して最適な稼働時間とパフォーマンスを確保し、ユーザーがログインするたびにデータを更新します。キャッシュは、コネクターがダウンしているか、アクセスできない場合にのみ使用されます。Dashboardで資格情報のキャッシュを無効にしない限り、キャッシュされたデータは常に保管されます。キャッシュ内の値では大文字と小文字が区別されます。つまり、ユーザーがキャッシュにあるものと同じユーザー名を入力した場合にのみ、ログイン試行が成功します。

## 高可用性とロードバランシング

高可用性とロードバランシングを実現するために、複数のコネクターのインスタンスをインストールすることができます。すべての接続はコネクターからAuth0サーバーに向かって送信されるため、ファイアウォールへの変更は通常不要です。

高可用性クラスターの各インスタンスは常に稼働し、Auth0に接続されています。Auth0は、ログイントランザクションとその他の要求を使用可能ないずれかのコネクターに送信します。ネットワークまたはハードウェアの問題が原因で、いずれかのインスタンスが失敗した場合、Auth0はログイントランザクションを他のコネクターにリダイレクトします。高可用性のデプロイメントによって、ゼロダウンタイムでコネクターを更新することができます。

## OpenLDAPディレクトリ

コネクターはデフォルトで、Active Directory用に高度に最適化されています。他のLDAPディレクトリ（OpenLDAPなど）で構成する場合は、`config.json`ファイルでこれらの設定をカスタマイズする必要があります。

```json lines
"LDAP_USER_BY_NAME": "(cn={0})",
"LDAP_SEARCH_QUERY": "(&(objectClass=person)(cn={0}))",
"LDAP_SEARCH_ALL_QUERY": "(objectClass=person)",
```

`cn`の代わりに`uid`を使用した方がよい場合もあります。

### OpenDJの例

**［OpenDJ Control Panel（OpenDJコントロールパネル）］** では、ユーザーごとに属性リストを取得することができます。このリストは、Auth0で認証を行う場合に、ユーザー名として使用する属性を決めるのに役立ちます。

<Frame>![AD/LDAP Connector OpenDJ Example diagram](/images/ja-jp/cdy7uua7fh8z/14fTMlPqtzUicW2VTZPLPG/3ffa90a44eb864455ad3b77406f8ad32/opendj-attributes.png)</Frame>

この例では、Johnの`cn`は **johndoe** で、`mail`フィールドは **johndoe@contoso.com** に設定されています。組織が、ユーザーにユーザー名（`cn`）を使って認証してもらいたい場合は、`LDAP_USER_BY_NAME`設定を`(cn={0})`に設定できますが、メールアドレスを使って認証を行う必要がある場合は、`(mail={0})`に設定する必要があります。

## もっと詳しく

* [AD/LDAPコネクターのシステム要件](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/ad-ldap-connector-requirements)
* [AD/LDAPコネクターのインストールと構成](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/install-configure-ad-ldap-connector)
* [クライアント証明書を使ってAD/LDAPコネクターの認証を構成する](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-client-certificates)
* [KerberosでAD/LDAPコネクターの認証を構成する](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-with-kerberos)
* [AD/LDAPコネクター構成のインポートとエクスポ―ト](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/import-export-ad-ldap-connector-configs)
* [AD/LDAPコネクタのトラブルシューティング](/ja-jp/troubleshoot/integration-extensibility-issues/troubleshoot-ad-ldap-connector)