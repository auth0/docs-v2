---
title: "Okta Workforce接続のインバウンドSCIM"
permalink: "inbound-scim-for-okta-workforce-connections"
'description': "Okta WIC接続のセットアップをOpenID SCIM経由で行う手順"
'og:title': "Okta Workforce接続のインバウンドSCIM"
'og:description': "Okta WIC接続のセットアップをOpenID SCIM経由で行う手順"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Okta Workforce接続のインバウンドSCIM"
'twitter:description': "Okta WIC接続のセットアップをOpenID SCIM経由で行う手順"
---

<Card title="始める前に">

[IDプロバイダーのヘルプページ](/ja-jp/authenticate/identity-providers/enterprise-identity-providers/okta)に記載の指示に従って、Okta Workforce Identity CloudをIDプロバイダーとして有効にします。

この統合では2つのアプリケーションをOkta Workforceで登録する必要があり、それらはOpenID Connect統合とSCIM統合になります。どちらにも必ず同じユーザーを割り当てます。この要件を取り除いて、顧客のセットアッププロセスを効率よくするために、[Okta Integration Networkにアプリを提出](https://developer.okta.com/docs/guides/submit-app-overview/%20)してください。

</Card>

このセクションでは、Okta Workfoce Identity Cloudテナントでカスタムの<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=openid" tip="OpenID: アプリケーションがログイン情報を収集および保存することなくにユーザーのIDを検証できるようにする認証用のオープン標準。" cta="用語集の表示">OpenID</Tooltip> ConnectとSCIMアプリの統合を構成する方法を説明します。この統合を使用して、ユーザーをAuth0のSCIMエンドポイントにプロビジョニングすることができます。

Okta Workforce Identity Cloudでの<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-1" href="/ja-jp/glossary?term=security-assertion-markup-language" tip="Security Assertion Markup Language（SAML）: パスワードなしに二者間で認証情報を交換できる標準化プロトコル。" cta="用語集の表示">SAML</Tooltip>とSCIMの統合の構成については、「[Okta Workforce SAML接続のインバウンドSCIM](/ja-jp/authenticate/protocols/scim/inbound-scim-for-okta-workforce-saml-connections)」をお読みください。

### Auth0でSCIM設定を構成する

1. [［Auth0 Dashboard］](https://manage.auth0.com/#/)を開いて、 **［Authentication（認証）］>［Enterprise（エンタープライズ）］>［SAML］> [あなたの接続] >［Provisioning（プロビジョニング）］** に移動します。
2. [ログイン時に追加の属性を同期する](/ja-jp/authenticate/protocols/scim/configure-inbound-scim)場合を除き、 **［Sync user profile attributes at each login（ログインの度にユーザープロファイル属性を同期する）］** を無効にします。
3. 同じセクションで、 **［Sync user profiles using SCIM（SCIMを使用してユーザープロファイルを同期する）］** を有効にします。
4. **［Mapping（マッピング）］** タブで、 **［SCIM attribute containing the User ID（ユーザーIDを含むSCIM属性）］** が **［externalId］** に設定されていることを確認します。

**［Additional Mappings（追加のマッピング）］** で、拡張されたSCIM属性が任意のAuth0属性にマッピングされていることも確認できます。

### SCIMエンドポイントURLとトークンを取得する

1. Auth0 Dashboardで、SCIMの **［Setup（セットアップ）］** タブを参照し、 **SCIMエンドポイントURL** をコピーして、安全な場所に貼り付けます。
2. **［Generate New Token（新しいトークンの生成）］** を選択し、トークンに対して任意の有効期限を設定します。任意で、Okta Workforceに付与したいスコープを選択できます。デフォルトで必要なOkta Workforceに使用されるスコープは、`get:users`、`post:users`、`put:users`です。

### OIDCアプリ用のSCIMをOkta Workforceで構成する

1. OIDCベースのユーザー認証のために、Okta WorkforceテナントにOpenID Connectアプリケーションが[すでに登録されている](https://help.okta.com/en-us/content/topics/apps/apps_app_integration_wizard_oidc.htm)ことを確認してください。
2. OpenID Connectionアプリケーションで[フェデレーションブローカーモードが無効](https://help.okta.com/en-us/content/topics/apps/apps-fbm-main.htm)になっていることを確認してください。
3. Oktaポータルで2つ目のアプリケーションを登録するには、 **［Applications（アプリケーション）］** > **［Applications（アプリケーション）］** の次に、 **［Create App Integration（アプリ統合を作成）］、［Secure Web Authentication］** 、 **［Next（次へ）］** を選択します。
4. **［General App Settings（アプリの一般設定）］** ページで、名前とURLを設定し、 **［Do not display application icon to users（ユーザーにアプリケーションアイコンを表示しない）］** を選択します。入力されたURLはSCIM統合に使用されません。
5. **［Finish（完了）］** を選択します。
6. **［General（一般）］** タブに移動し、 **［Edit（編集）］** を選択した後、 **［Provisioning（プロビジョニング）］** セクションに移動します。
7. **［SCIM］** 、 **［Save（保存）］** の順に選択します。
8. 統合の **［Provisioning（プロビジョニング）］** タブから、 **［Integration（統合）］** タブに移動します。
9. **［Edit（編集）］** を選択し、 **［SCIM connector base URL（SCIMコネクターベースURL）］** セクションに移動したら、先ほどコピーした **SCIMエンドポイントURL** の値を入力します。
10. **ユーザーの一意の識別子フィールド** には、 **userName** を入力します。
11. **［Supported provisioning actions（サポートされているプロビジョニングアクション）］** から **［Push New Users（新規ユーザーをプッシュ）］** と **［Push Profile Updates（プロファイルの更新をプッシュ）］** を選択し、 **［HTTP Header（HTTPヘッダー）］** を **［Authentication Mode（認証モード）］** として選択します。
12. **［Authorization（認可）］** フィールドにトークン値を貼り付け、接続を試したい場合は **［Test Connection Configuration（接続構成のテスト）］** を選択します。 **［Save（保存）］** を選択します。
13. **［Provisioning（プロビジョニング）］>［Settings（設定）］>［To App（アプリへ）］** に移動し、 **［Edit（編集）］** を選択します。
14. **［Create Users（ユーザーの作成）］、［Update User Attributes（ユーザー属性の更新）］** 、 **［Deactivate Users（ユーザーの非アクティブ化）］** を有効にします。 **［Save（保存）］** を選択します。
15. **［Attribute Mappings（属性マッピング）］** セクションで **［X］** ボタンを使用して以下の行を **削除** します。PUT操作中に問題が生じる可能性があるため、これらは必要ありません。

<table class="table"><thead>
<tr>
<th>属性</th>
<th>値</th>
</tr>
</thead>
<tbody>
<tr>
<td>主なメールタイプ</td>
<td>`(user.email != null &amp;&amp; user.email != '') ? 'work' : ‘'`</td>
</tr>
<tr>
<td>主な電話タイプ</td>
<td>`(user.primaryPhone != null &amp;&amp; user.primaryPhone != '') ? 'work' : ‘'`</td>
</tr>
<tr>
<td>住所タイプ</td>
<td>`(user.streetAddress != null &amp;&amp; user.streetAddress != '') ? 'work' : ‘'`</td>
</tr>
</tbody>
</table>

**［Attribute Mappings（属性マッピング）］** セクションを使用して、Okta WICからSCIMエンドポイントに送ってほしいすべての追加SCIM属性を構成します。カスタム属性を追加する場合、有効なSCIM 2.0外部名前空間プロパティを含む必要があります。外部名前空間の詳細については、[Oktaのヘルプセクション](https://support.okta.com/help/s/article/Receiving-Invalid-externalNamespace-task-error-when-assigning-a-user-to-a-SCIMenabled-application)をお読みください。

これで **［Assignments（割り当て）］** タブからユーザープロビジョニングをテストし、Okta管理ポータルの **［Directory（ディレクトリ）］>［People（ユーザー）］** セクションでユーザー属性を編集して、更新操作をテストできます。