---
title: "SparkPostを外部SMTPメールプロバイダーとして構成"
permalink: "configure-sparkpost-as-external-smtp-email-provider"
'description': "SparkPostを外部SMTPメールプロバイダーとして構成する方法について説明します。"
'og:title': "SparkPostを外部SMTPメールプロバイダーとして構成"
'og:description': "SparkPostを外部SMTPメールプロバイダーとして構成する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "SparkPostを外部SMTPメールプロバイダーとして構成"
'twitter:description': "SparkPostを外部SMTPメールプロバイダーとして構成する方法について説明します。"
---

Auth0では独自のSMTPメールプロバイダーを構成して、メール通信をより完全に管理、監視、トラブルシューティングできるようにすることができます。Auth0に組み込みのメールインフラストラクチャは、メールのテストにのみ使用してください。

## 前提条件

* Auth0からSMTPにメールが確実に送信されるように、ポートを開いて、特定のIPアドレスからのインバウンド接続を許可します。IPのリストを更新するには、[［Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](https://manage.auth0.com/#/branding/email_provider)に移動します。詳細については、「[AllowListにIPアドレスを追加する](/ja-jp/secure/security-guidance/data-security/allowlist)」を参照してください。
* [SparkPost](https://www.sparkpost.com/)アカウントが必要です。

## SparkPostを構成する

1. [SparkPost](https://www.sparkpost.com/)アカウントにログインします。
2. SparkPost [Sending Domains](https://app.sparkpost.com/account/sending-domains)へ移動し、カスタムドメインを追加します。SparkPostでは、検証済みのドメインからのみメールを送信できます。
3. SparkPost[Account API Keys](https://app.sparkpost.com/account/credentials)へ移動し、 **［New API key（新しいAPIキー）］** をクリックします。このキー値を保存し、`Transmissions:Read/Write`アクセスがあることを確認します。キーの値をコピーします。
4. [［Auth0 Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](https://manage.auth0.com/#/branding/email_provider)に移動します。
5. **［Use my own email provider（独自のメールプロバイダーを使用する）］** を有効にします。
6. **［SparkPost］** ロゴをクリックします。
7. **［From］** メールアドレスを提供し、先ほどコピーしたSparkPost **［API Key（APIキー）］** を入力し 、 **［Region（地域）］** を選択します。すでに米国地域用に構成されているアカウントでEU地域に変更する場合は、Sparkpost EU APIキーをAuth0の **［API Key（APIキー）］** に置き換える必要があります。
8. **［Save（保存）］** をクリックします。

## メールをテストする

テストメールを送信するには、 **［Send Test Email（テストメールの送信）］** ボタンを使用します。すべてが正しく構成されていると、確認メールを受け取ります。数分経ってもメールを受信しない場合は、[Auth0ログ](https://manage.auth0.com/#/logs)でエラーを確認してください。

SparkPostにカスタムドメインを登録していない場合は、`sparkpostbox.com` メインから最大5通のテスト メールを送信できます。詳しくは、SparkPostの[Transmissions:The Sandox Domain](https://developers.sparkpost.com/api/transmissions.html#header-the-sandbox-domain)をお読みください。

SparkPost[Message Events](https://app.sparkpost.com/reports/message-events)ページには、ユーザーに送信されたすべてのメールの配信情報が表示されるようになりました。