---
title: "SendGridを外部SMTPメールプロバイダーとして構成する"
permalink: "configure-sendgrid-as-external-smtp-email-provider"
'description': "SendGridを外部SMTPメールプロバイダーとして構成する方法について説明します。"
'og:title': "SendGridを外部SMTPメールプロバイダーとして構成する"
'og:description': "SendGridを外部SMTPメールプロバイダーとして構成する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "SendGridを外部SMTPメールプロバイダーとして構成する"
'twitter:description': "SendGridを外部SMTPメールプロバイダーとして構成する方法について説明します。"
---

Auth0では独自のSMTPメールプロバイダーを構成して、メール通信をより完全に管理、監視、トラブルシューティングできるようにすることができます。Auth0に組み込みのメールインフラストラクチャは、メールのテストにのみ使用してください。

## 前提条件

* Auth0からSMTPにメールが確実に送信されるように、ポートを開いて、特定のIPアドレスからのインバウンド接続を許可します。IPのリストを更新するには、[［Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](https://manage.auth0.com/#/branding/email_provider)に移動します。詳細については、「[AllowListにIPアドレスを追加する](/ja-jp/secure/security-guidance/data-security/allowlist)」を参照してください。
* [SendGrid](https://sendgrid.com)アカウントが必要です。Microsoft Azureのサブスクリプションをお持ちの場合には、Azure Marketplaceで無料アカウントを取得できます。

## SendGridを構成する

1. [SendGrid](https://sendgrid.com)アカウントにログインします。
2. SendGridの **［Settings（設定）］>［API Keys（APIキー）］** に移動して、 **［Create API Key（APIキーの作成）］** をクリックします。
3. キーの名前を入力して、 **［Restricted Access（制限されたアクセス）］** を選択します。
4. **［Access Details（アクセスの詳細）］** にある **［Mail Send（メール送信）］** をクリックして展開します。
5. **［Mail Send（メール送信）］** の権限を **［Full Access（フルアクセス）］** に設定します。
6. **［Save（保存）］** をクリックして、キーの値をコピーします。
7. [［Auth0 Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](https://manage.auth0.com/#/branding/email_provider)に移動します。
8. **［Use my own email provider（独自のメールプロバイダーを使用する）］** を有効にします。
9. **SendGrid** ロゴをクリックします。
10. **［From（差出人）］** のメールアドレスを入力し、前の手順でコピーしたSendGridの **APIキー** を貼り付けて、 **［Save（保存）］** をクリックします。

**注意：** [メールを使ったパスワードレス認証](https://auth0.com/docs/authenticate/passwordless#email)を使用している場合には、パスワードレス接続の **［From（差出人）］** のメールアドレス値がSendGridに使用している **［From（差出人）］** のメールアドレス値と一致していることを確認してください。

## メールをテストする

テストメールを送信するには、 **［Send Test Email（テストメールの送信）］** ボタンを使用します。すべてが正しく構成されていると、確認メールを受け取ります。数分経ってもメールを受信しない場合は、[Auth0ログ](https://manage.auth0.com/#/logs)でエラーを確認してください。

SendGridの[［Email Activity（メールアクティビティ）］](https://sendgrid.com/logs/index)ページに、ユーザーに送信したすべてのメールの配信インサイトが表示されるようになります。