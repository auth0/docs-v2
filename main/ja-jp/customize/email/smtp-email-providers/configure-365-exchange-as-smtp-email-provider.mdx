---
title: "Microsoft 365 Exchange Onlineを外部SMTPメールプロバイダーとして構成"
permalink: "configure-365-exchange-as-smtp-email-provider"
'description': "Auth0を使用して365 Exchange OnlineをSMTPメールプロバイダーとして構成する方法について説明します。"
'og:title': "Microsoft 365 Exchange Onlineを外部SMTPメールプロバイダーとして構成"
'og:description': "Auth0を使用して365 Exchange OnlineをSMTPメールプロバイダーとして構成する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Microsoft 365 Exchange Onlineを外部SMTPメールプロバイダーとして構成"
'twitter:description': "Auth0を使用して365 Exchange OnlineをSMTPメールプロバイダーとして構成する方法について説明します。"
---

<Card title="始める前に">

* 有効なサブスクリプションのある[Microsoft 365](https://www.microsoft.com/en-us/microsoft-365)アカウントが必要です。
* お持ちのMicrosoft 365サブスクリプションでExchange Online経由のメール送信ができることを確認してください。

  + Exchange OnlineでMicrosoft Graph APIを使うには、少なくとも有料のMicrosoft Business Basicサブスクリプションが必要です。
* メールはAuth0からご利用のSMTPプロバイダーに送信されます。ポートが開いており、特定のAuth0 IPアドレスから受信接続を許可する必要があります。詳細については、「[許可リスト用のAuth0 IPアドレス](/ja-jp/secure/security-guidance/data-security/allowlist)」をお読みください。

  + IPのリストを更新するには、[［Dashboard ］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](https://manage.auth0.com/#/branding/email_provider)を使用します。

</Card>

Auth0を使用すると、独自のSMTPメールプロバイダーを構成して、メール通信を管理、監視、トラブルシューティングすることができます。

<Warning>

Auth0に組み込みのメールインフラストラクチャは、メールのテストにのみ使用してください。

</Warning>

## Microsoft 365の構成

1. Microsoft 365アカウントを使用して[Microsoft Azure](https://azure.microsoft.com/)アカウントにログインします。
2. 現在[Azure Active Directory Application](https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application)リソースがない場合は、登録します。
3. Active Directory Applicationリソースへ移動します。 **Services > App registrations** を選択し、メールの送信に使用するアプリケーションを選択します。
4. **Manage > API permissions** に移動し、必要なアプリケーション権限を構成します。
5. **［Add a permission（権限の追加）］> ［Microsoft Graph］> ［Application permissions（アプリケーションの許可）］** セレクターを選択して、`Mail.Send`[権限](https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application#api-permissions)を追加します。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">
  **Application permissions（アプリケーションのアクセス許可）** を構成する前に、管理者の同意が必要です。
</Callout>

6. 必要なプロバイダー構成を取得します：

   1. **［Application Overview（アプリケーション概要）］** に移動し、アプリケーションの[クライアントIDおよびテナントID](https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application#application-id-client-id)を取得します。
   2. **［Manage］>［Certificates & secrets］** へ移動し、アプリケーション[secret](https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application#certificates--secrets)を作成するための **［Value（値）］** を取得します。
   3. **Search > Users** でアプリケーションを通じてメールを送信する組織の **［User Email（ユーザーメール）］** を取得します。 **［Services］>［Users］** を選択し、承認されたユーザーを選択し、そのプロパティから **［User Email（ユーザーメール）］** を収集します。
7. [［Auth0 Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](https://manage.auth0.com/#/branding/email_provider)に移動します。
8. **［Use my own email provider（独自のメールプロバイダーを使用する）］** を有効にします。
9. **［Microsoft 365］** ロゴをクリックします。
10. **［From］** メールアドレスを提供します。 **［Tenant ID（テナントID）］** 、 **［Client ID（クライアントID）］** 、およびステップ6の **［Client Secret］** を入力し、 **［Save（保存）］** をクリックします。

## テストメールを送信する

**［Send Test Email（テストメールを送信）］** ボタンを使用して、テストメールを送信します。すべてが正しく構成されていると、確認メールを受け取ります。

数分経ってもメールを受信しない場合は、[Auth0ログ](https://manage.auth0.com/#/logs)でエラーコードを確認してください。Microsoft Exchange の[メール使用状況](https://admin.microsoft.com/#/reportsUsage/EmailActivity)ページに、ユーザーに送信されたすべてのメールの配信情報が表示されるようになりました。