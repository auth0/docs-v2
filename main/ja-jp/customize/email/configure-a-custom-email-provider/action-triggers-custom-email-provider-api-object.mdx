---
title: "アクションのトリガー：custom-email-providerのAPIオブジェクト"
permalink: "action-triggers-custom-email-provider-api-object"
'description': "custom-email-providerのAPIオブジェクトを使用する方法について説明します。"
'og:title': "アクションのトリガー：custom-email-providerのAPIオブジェクト"
'og:description': "custom-email-providerのAPIオブジェクトを使用する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "アクションのトリガー：custom-email-providerのAPIオブジェクト"
'twitter:description': "custom-email-providerのAPIオブジェクトを使用する方法について説明します。"
---

`custom-email-provider`アクショントリガーのAPIオブジェクトは以下を含みます。

## `api.cache`

実行間で維持されるデータの保管と取得を行います。

### `api.cache.delete(key)`

提供されたkeyにキャッシュ済みの値が存在する場合は、それを記述したレコードを削除します。

値がキャッシュから削除されると、`CacheWriteResult`オブジェクトにtype: `"success"`を含めて返します。操作に失敗すると、type: `"error"`を返します。エラーの場合には、返すオブジェクトにcodeプロパティを含めて、失敗の詳細を示します。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p>
<em>文字列</em>。キャッシュに保管されているレコードのキー。
            </p>
</td>
</tr>
</tbody>
</table>

### `api.cache.get(key)`

提供されたkeyにキャッシュ済みの値が存在する場合は、それを記述したレコードを取得します。レコードが見つかった場合には、返されたオブジェクトのvalueプロパティにキャッシュ済みの値があります。

提供された`key`にキャッシュ済みの項目が存在する場合は、それを記述したレコードを返します。キャッシュレコードは、キャッシュされた値のある`value`プロパティと、レコードの最大有効期限をUNIXエポックからのミリ秒単位で示す`expires_at`プロパティを含むオブジェクトです。

**重要** ：このキャッシュは、短命で一時的なデータ向けに設計されています。項目が所定のライフタイム内であったとしても、後のトランザクションでは利用できないかもしれません。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p>
<em>文字列</em>。キャッシュに保管されているレコードのキー。
            </p>
</td>
</tr>
</tbody>
</table>

### `api.cache.set(key, value, [options])`

指定されたkeyのキャッシュに文字列値を保管または更新します。

このキャッシュに保管された値は、それを設定するトリガーにスコープが限定されます。これは[アクションのキャッシュ制限](https://auth0.com/docs/ja-jp/customize/actions/limitations)の対象になります。

ここのように保管された値には、指定された`ttl`または`expires_at`値までのライフタイムがあります。ライフタイムが指定されない場合には、デフォルトのライフタイムである15分が使用されます。ライフタイムは[アクションのキャッシュ制限](https://auth0.com/docs/ja-jp/customize/actions/limitations)が定める最大値を超過してはいけません。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p>
<em>文字列</em>。キャッシュに保管されているレコードのキー。
            </p>
</td>
</tr>
<tr>
<td>`value`</td>
<td>
<p>
<em>文字列</em>。保管するレコードの値。
            </p>
</td>
</tr>
<tr>
<td>`options`</td>
<td>
<p>
<em>任意のオブジェクト</em>。キャッシュの動作を調整するためのオプション。
            </p>
</td>
</tr>
<tr>
<td>`options.expires_at`</td>
<td>
<p>
              任意の数字。UNIXエポックからのミリ秒単位で指定した絶対有効期限。キャッシュ済みのレコードは早期に削除されることはあっても、`expires_at`で指定された時点を過ぎて存続することはありません。
            </p>
<p>
<b>注意：</b>この値が`ttl`で指定されている場合は指定するべきではありません。両方で指定された場合、2つの中で早い方の有効期限が適用されます。
            </p>
</td>
</tr>
<tr>
<td>`options.ttl`</td>
<td>
<p>
          任意の数値。このキャッシュエントリーのミリ秒単位で指定した存続時間。キャッシュ済みのレコードは早期に削除されることはあっても、`ttl`で指定された時点を過ぎて存続することはありません。
        </p>
<p>
          注意：この値が`expires_at`で指定されている場合は指定するべきではありません。両方で指定された場合、2つの中で早い方の有効期限が適用されます。
            </p></td></tr>
</tbody>
</table>

### `api.notification`

通知イベントを再試行するかドロップするかを通知します。実際の動作の詳細については、これらの各メソッドを参照してください。複数の呼び出しが行われた場合、最後の呼び出しのみが考慮されます。

### `api.notification.drop(reason)`

呼び出されると、通知イベントは回復せずに失敗したと見なされます。

このイベント[`(fn)`](https://auth0.com/docs/ja-jp/deploy-monitor/logs/log-event-type-codes)のエラーがログに記録されますが、今後アクションに再度送信されることはありません。

この通知イベントを再試行する必要がある場合は、代わりに`api.notification.retry`を呼び出すことを検討してください。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`reason`</td>
<td>
<p>
<em>任意の文字列</em>。これはログエントリの一部となり、エラーをさらに分析するのに役立ちます。このフィールドは1024文字までに制限されており、それを超える場合は切り捨てられることに注意してください。
            </p>
</td>
</tr>
</tbody>
</table>

### `api.notification.retry(reason)`

呼び出されると、通知イベントは失敗したものと見なされますが、回復可能です。

このイベント[`(fn)`](https://auth0.com/docs/ja-jp/deploy-monitor/logs/log-event-type-codes)のエラーがログに記録されますが、数分以内に最大5回再試行されます。

この通知イベントを再試行しない必要がある場合は、代わりに`api.notification.drop`を呼び出すことを検討してください。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`reason`</td>
<td>
<p>
<em>任意の文字列</em>。これはログエントリの一部となり、エラーをさらに分析するのに役立ちます。このフィールドは1024文字までに制限されており、それを超える場合は切り捨てられることに注意してください。
            </p>
</td>
</tr>
</tbody>
</table>