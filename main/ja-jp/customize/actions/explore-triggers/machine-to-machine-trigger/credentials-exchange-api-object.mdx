---
title: "アクショントリガー：資格情報の交換 - APIオブジェクト"
permalink: "credentials-exchange-api-object"
'description': "資格情報交換アクショントリガー のAPIオブジェクトについて説明します。"
'og:title': "アクショントリガー：資格情報の交換 - APIオブジェクト"
'og:description': "資格情報交換アクショントリガー のAPIオブジェクトについて説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "アクショントリガー：資格情報の交換 - APIオブジェクト"
'twitter:description': "資格情報交換アクショントリガー のAPIオブジェクトについて説明します。"
---

資格情報交換アクショントリガーのAPIオブジェクトには以下が含まれます。

## `api.access`

アクセストークンに対する使用許可を制御します。

### `api.access.deny(code, reason)`

現在のトークン交換を「拒否」としてマークします。

`api`オブジェクトにリファレンスを返します。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`code`</td>
<td>
<p><em>文字列</em>。ログインの拒絶を判断するOAuthエラーコード。次のうちの一つです：`'invalid_scope'`、`'invalid_request'`、`'server_error'`</p>
</td>
</tr>
<tr>
<td>`reason`</td>
<td>
<p>
<em>文字列</em>。アクセストークン付与を拒否するための人間が理解できる説明。
          </p>
</td>
</tr>
</tbody>
</table>

## `api.accessToken`

発行されたアクセストークンを変更する要求。

### `api.accessToken.setCustomClaim(name, value)`

この交換の一部として発行されるアクセストークンのカスタムクレームを設定します。

`api`オブジェクトへの参照を返します。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`name`</td>
<td>
<p><em>文字列</em>。クレームの名前（これは完全修飾URLの必要がある場合があります）。</p>
</td>
</tr>
<tr>
<td>`value`</td>
<td>
<p><em>任意の値</em>。クレームの値。</p>
</td>
</tr>
</tbody>
</table>

## `api.cache`

実行間で維持されるデータの保管と取得を行います。

### `api.cache.delete(key)`

提供されたkeyにキャッシュ済みの値が存在する場合は、それを記述したレコードを削除します。

値がキャッシュから削除されると、`CacheWriteResult`オブジェクトに`type: "success"`を含めて返します。操作に失敗すると、`type: "error"`を返します。エラーの場合には、返すオブジェクトに`code`プロパティを含めて、失敗の詳細を示します。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p><em>文字列</em>。キャッシュに保管されているレコードのキー。</p>
</td>
</tr>
</tbody>
</table>

### `api.cache.get(key)`

提供された`key`にキャッシュ済みの値が存在する場合は、それを記述したレコードを取得します。レコードが見つかった場合には、返されたオブジェクトの`value`プロパティにキャッシュ済みの値があります。

提供された`key`にキャッシュ済みの値が存在する場合は、それを記述したレコードを返します。キャッシュレコードは、キャッシュされた値のある`value`プロパティと、レコードの最大有効期限をUNIXエポックからのミリ秒単位で示す`expires_at`プロパティを持つオブジェクトです。

**重要：** このキャッシュは、短命で一時的なデータ向けに設計されています。項目が所定のライフタイム内であったとしても、後のトランザクションでは利用できないかもしれません。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p><em>文字列</em>。キャッシュに保管されているレコードのキー。</p>
</td>
</tr>
</tbody>
</table>

### `api.cache.set(key, value, [options])`

指定されたkeyのキャッシュに文字列値を保管または更新します。

このキャッシュに保管された値は、それを設定するトリガーにスコープが限定されます。これは[アクションのキャッシュ制限](/ja-jp/customize/actions/limitations)の対象になります。

このように保管された値には、指定された`ttl`または`expires_at`値までのライフタイムがあります。ライフタイムが指定されない場合には、デフォルトのライフタイムである15分が使用されます。ライフタイムは、[アクションのキャッシュ制限](/ja-jp/customize/actions/limitations)が定める最大値を超過してはいけません。

<table class="table">
<thead>
<tr>
<th>パラメーター</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`key`</td>
<td>
<p><em>文字列</em>。キャッシュに保管されているレコードのキー。</p>
</td>
</tr>
<tr>
<td>`value`</td>
<td>
<p><em>文字列</em>。保管するレコードの値。</p>
</td>
</tr>
<tr>
<td>`options`</td>
<td>
<p><em>任意のオブジェクト</em>。キャッシュの動作を調整するためのオプション。</p>
</td>
</tr>
<tr>
<td>`options.expires_at`</td>
<td>
<p><em>任意の数値</em>。UNIXエポックからのミリ秒単位で指定した絶対有効期限。キャッシュ済みのレコードは早期に削除されることはあっても、`expires_at`で指定された時点を過ぎて存続することはありません。</p>
<p>
<em>注意：</em>この値が`ttl`で指定されている場合は指定するべきではありません。両方で指定された場合、2つの中で早い方の有効期限が適用されます。
          </p>
</td>
</tr>
<tr>
<td>`options.ttl`</td>
<td>
<p><em>任意の数値</em>。このキャッシュエントリーのミリ秒単位で指定した存続時間。キャッシュ済みのレコードは早期に削除されることはあっても、`ttl`で指定された時点を過ぎて存続することはありません。</p>
<p>
<em>注意：</em>この値が`expires_at`で指定されている場合は指定するべきではありません。両方で指定された場合、2つの中で早い方の有効期限が適用されます。
          </p>
</td>
</tr>
</tbody>
</table>