---
title: "Auth0管理証明書を使ってカスタムドメインを構成する"
permalink: "auth0-managed-certificates"
'description': "Auth0がTLS（SSL）証明書を管理するカスタムドメインの構成方法について説明します。"
'og:title': "Auth0管理証明書を使ってカスタムドメインを構成する"
'og:description': "Auth0がTLS（SSL）証明書を管理するカスタムドメインの構成方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Auth0管理証明書を使ってカスタムドメインを構成する"
'twitter:description': "Auth0がTLS（SSL）証明書を管理するカスタムドメインの構成方法について説明します。"
---

<Card title="利用可能性はAuth0プランによって異なる">

この機能が利用できるかどうかは、使用しているログイン実装とAuth0プラン（または契約）によります。詳細については、「[価格設定](https://auth0.com/pricing)」をお読みください。

</Card>

カスタムドメインの証明書をAuth0が管理するようにしたい場合は、ドメインのCNAMEレコードを追加するだけで済みます。Auth0はレコードを検証し、Auth0サーバーで証明書を生成します。この証明書は3か月ごとに自動更新されます。これを構成するのは簡単で、証明書を独自に管理する必要はありません。

## ドメイン名をAuth0に渡します。

1. [［Dashboard］>［Settings（設定）］>［Custom Domains（カスタムドメイン）］](https://manage.auth0.com/#/tenant/custom_domains)または[［Dashboard］>［Branding（ブランディング）］>［Custom Domains（カスタムドメイン）］](https://manage.auth0.com/#/custom_domains)に移動します。提供されたボックスにドメインを入力して、 **［Auth0-managed certificates（Auth0管理証明書）］** を選択します。
2. **［Add Domain（ドメインを追加）］** をクリックします。ドメインを追加した後でも **［Add Domain（ドメインを追加）］** ボタンは表示されたままになりますが、テナントごとに追加できるドメインは1つだけです。

## 所有権を確認する

Auth0管理証明書を使ってカスタムドメインを設定するには、ドメイン名をAuth0に提供し、そのドメインを所有していることを確認する必要があります。確認したら、カスタムドメインを使い始めるために、Auth0の機能を構成する必要があります。

1. [［Dashboard］>［Branding（ブランディング）］>［Custom Domains（カスタムドメイン）］](https://manage.auth0.com/#/branding/custom_domains)に移動し、DashboardにリストされているCNAME検証レコードをドメインのDNSレコードに追加します。

   <Frame>![Auth0ブランディングのカスタムドメイン Auth0管理の証明書でドメインを確認する](/images/ja-jp/cdy7uua7fh8z/3dz8ii70nm0a5amS0PNJ5K/35d26a248a2a26e194fe7d37216f26e2/Custom_Domain_-_Pending_Verification_-_Japanese.png)</Frame>

2. **［Verify（確認）］** をクリックして続行します。DNS設定によっては、CNAMEレコードが確認されるまで数分かかることがあります。Auth0がドメイン名を確認できたら、確認したことを知らせる画面が表示されます。これで確認プロセスが完了しました。1～2分後に、カスタムドメインが使用できるようになるはずです。

## CNAME検証レコードをDNSレコードに追加する

Auth0でドメインを使用するには、先にドメインを所有していることを確認する必要があります。

CNAMEレコードを追加したら、証明書の更新で問題の発生を防ぐために、このレコードが常時必要になります。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0では、絶対に必要な場合を除き、CNAMEフラット化をオフにすることを推奨しています。Cloudflareのドキュメント、「[Understand and configure CNAME flattening（CNAMEフラット化を理解・構成する）](https://support.cloudflare.com/hc/en-us/articles/200169056-Understand-and-configure-CNAME-Flattening)」に従ってください。Auth0のマネージド証明書に対するCNAMEフラット化は、サポートされない構成であるため、CNAMEフラット化が有効になっているとカスタムドメインが予告なく壊れてしまう可能性があります。

</Callout>

Cloudflareで管理しているすべてのサブドメインに対してCNAMEフラット化を有効にし、特定のサブドメインをAuth0のカスタムドメインとして構成する必要がある場合は、Auth0用のサブドメインを別のDNSプロバイダーに委任することを検討してください。詳細については、Cloudflareドキュメントの[「Cloudflareの外部にサブドメインを委任」](https://support.cloudflare.com/hc/en-us/articles/360021357131-Delegating-Subdomains-Outside-of-Cloudflare)を参照してください。外部に委任すると、Auth0用のサブドメインを除くすべてのサブドメインでCNAMEフラット化を使用できるようになります。

1. ドメイン管理サービスにログインします。
2. 新しいレコードを作成します。

   <table class="table"><thead>
   <tr>
   <th>パラメーター</th>
   <th>値</th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td><b>Record type（レコードタイプ）</b></td>
   <td><b>CNAME</b></td>
   </tr>
   <tr>
   <td><b>Name（名前）</b></td>
   <td>カスタムドメイン名を入力します（例：<b>login.northwind.com</b>）。</td>
   </tr>
   <tr>
   <td><b>Time to Live (TTL)（有効期限）</b></td>
   <td>デフォルト値を使用します。</td>
   </tr>
   <tr>
   <td><b>Value（値）</b></td>
   <td>ドメインのDNSレコードに対してAuth0 Dashboardから提供された<b>CNAME</b>値を貼り付けます。</td>
   </tr>
   </tbody>
   </table>
3. 終わったら、レコードを保存します。

以下の手順は、使用しているドメインのホストプロバイダーによっては異なる場合があります。

Auth0がドメイン名を確認できたら、確認したことを知らせる画面が表示されます。これで確認プロセスが完了しました。1～2分後に、カスタムドメインが使用できるようになるはずです。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

DNSプロバイダーがデフォルトでCNAMEレコードのプロキシを有効にする場合、カスタムドメインはいつまでも保留状態のままになります。DNSプロバイダーの設定を確認し、プロキシを無効にする必要があります。

</Callout>

## 特定のAuth0機能で使用するその他の手順

確認のプロセスを完了できない場合は、少なくとも4時間待ってから、これらの手順をもう一度実行してください。サービスの中断を避けるために、再確認する際にはカスタムドメインを作成し直さないでください。トラブルシューティングのガイドラインについては、「[カスタムドメインのトラブルシューティング](https://auth0.com/docs/troubleshoot/integration-extensibility-issues/troubleshoot-custom-domains)」を参照してください。

## もっと詳しく

* [機能にカスタムドメインの使用を構成する](/ja-jp/customize/custom-domains/configure-features-to-use-custom-domains)
* [TLS（SSL）のバージョンと暗号](/ja-jp/customize/custom-domains/self-managed-certificates/tls-ssl)
* [カスタムドメインのトラブルシューティング](/ja-jp/troubleshoot/integration-extensibility-issues/troubleshoot-custom-domains)
* [自己管理証明書を使ってカスタムドメインを構成する](/ja-jp/customize/custom-domains/self-managed-certificates)