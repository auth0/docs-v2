---
title: "AWS CloudFrontをリバースプロキシとして構成する"
permalink: "configure-aws-cloudfront-for-use-as-reverse-proxy"
'description': "Auth0のカスタムドメインプロキシとしてAWS CloudFrontを構成する方法について説明します。"
'og:title': "AWS CloudFrontをリバースプロキシとして構成する"
'og:description': "Auth0のカスタムドメインプロキシとしてAWS CloudFrontを構成する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "AWS CloudFrontをリバースプロキシとして構成する"
'twitter:description': "Auth0のカスタムドメインプロキシとしてAWS CloudFrontを構成する方法について説明します。"
---

<Card title="利用可能性はAuth0プランによって異なる">

この機能が利用できるかどうかは、使用しているログイン実装とAuth0プラン（または契約）によります。詳細については、「[価格設定](https://auth0.com/pricing)」をお読みください。

</Card>

Auth0テナントのカスタムドメイン名を持つリバースプロキシとしてAWS CloudFrontを構成することができます。

1. AWSにログインし、[［CloudFront］](https://console.aws.amazon.com/cloudfront)に移動します。
2. **［Create Distribution（ディストリビューションの作成）］** をクリックします。
3. コンテンツの配信方法を選択することができます。 **［Web］** セクションの **［Get Started（今すぐ始める）］** をクリックします。
4. ディストリビューション設定を構成します。変更する必要がある値は以下のとおりです。

   <table class="table"><thead>
   <tr>
   <th>設定</th>
   <th>値</th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td>Origin Domain Name（オリジンドメイン名）</td>
   <td>これをカスタムドメイン設定プロセス中にAuth0 Dashboardから取得した **Origin Domain Name（オリジンドメイン名）** の値に設定します。</td>
   </tr>
   <tr>
   <td>Origin ID（オリジンID）</td>
   <td>オリジンの説明。この値により、同じディストリビューションの複数のオリジンを区別できるため、一意でなければなりません。</td>
   </tr>
   <tr>
   <td>Origin Protocol Policy（オリジンプロトコルポリシー）</td>
   <td>`HTTPS Only`に設定します</td>
   </tr>
   <tr>
   <td>Alternate Domain Names (CNAMEs)（代替ドメイン名）</td>
   <td>カスタムドメイン名に設定します（Auth0 Dashboardで構成したものと同じ）</td>
   </tr>
   <tr>
   <td>SSL Certificate（SSL証明書）</td>
   <td>US East(N. Virginia)地域のAWS Certificate Manager(ACM)またはIAMに保存されているカスタムドメインのSSL証明書に設定します。</td>
   </tr>
   </tbody>
   </table>
5. **［Origin Custom Headers（オリジンカスタムヘッダー）］** に情報を入力します（ **［Header Name（ヘッダー名）］** と **［Value（値）］** フィールドは、 **［Origin Domain Name（オリジンドメイン名）］** を入力した後にのみ表示されます）。

   <table class="table"><thead>
   <tr>
   <th>設定</th>
   <th>値</th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td>Header Name（ヘッダー名）</td>
   <td>`cname-api-key`に設定します</td>
   </tr>
   <tr>
   <td>Value（値）</td>
   <td>Auth0でドメイン名の所有権を確認した直後に提供されたCNAME APIキーの値に設定します</td>
   </tr>
   </tbody>
   </table>
6. **［Default Cache Behavior Settings（キャッシュ動作のデフォルト設定）］** を構成します。変更する必要がある値は以下のとおりです。

   <table class="table"><thead>
   <tr>
   <th>設定</th>
   <th>値</th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td>ビューワープロトコルポリシー</td>
   <td> **［Redirect HTTP to HTTPS（HTTPからHTTPSにリダイレクト）］** を選択する</td>
   </tr>
   <tr>
   <td>許可されるHTTPメソッド</td>
   <td> **［GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE］** を選択する</td>
   </tr>
   <tr>
   <td>キャッシュとオリジンリクエストの設定</td>
   <td> **［Legacy cache settings（レガシーキャッシュ設定）］** を選択する</td>
   </tr>
   <tr>
   <td>選択されたリクエストヘッダーに基づいたキャッシュ</td>
   <td> **［Include the following headers（次のヘッダーを含める）］** を選択する</td>
   </tr>
   <tr>
   <td>ヘッダーの追加</td>
   <td>`User-Agent`を入力し、 **［Add Custom（カスタムの追加）］&gt;&gt;** をクリックしてカスタムヘッダーを追加します。`Authorization`、`Origin`、`Referer`、`Accept-Language`、`Accept`の各ヘッダーにも同様の処理をします。</td>
   </tr>
   <tr>
   <td>クッキーの転送</td>
   <td> **［All（すべて）］** を選択する</td>
   </tr>
   <tr>
   <td>クエリ文字列</td>
   <td> **［All（すべて）］** を選択する</td>
   </tr>
   </tbody>
   </table>
7. ページの最後までスクロールし、 **［Create Distribution（ディストリビューションの作成）］** をクリックします。
   新しく作成されたディストリビューションが、CloudFrontディストリビューションリストに表示されます。ディストリビューションがデプロイされるまで、ステータスは`In progress`（進行中）になります。
8. 新しいCNAMEレコードを、ディストリビューション用のCloudFrontサービスドメイン名をポイントするカスタムドメインのDNSに追加します。これは、［General（全般）］タブで、［Distribution ID（ディストリビューションID）］のドメイン名（`e2zwy42nt1feu7.cloudfront.net`など）をクリックすることで確認できます。

## もっと詳しく

* [機能にカスタムドメインの使用を構成する](/ja-jp/customize/custom-domains/configure-features-to-use-custom-domains)
* [カスタムドメインのトラブルシューティング](/ja-jp/troubleshoot/integration-extensibility-issues/troubleshoot-custom-domains)
* [TLS（SSL）のバージョンと暗号](/ja-jp/customize/custom-domains/self-managed-certificates/tls-ssl)