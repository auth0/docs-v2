---
title: "カスタムドメイン"
permalink: "custom-domains"
'description': "カスタムドメイン（CNAMEまたはバニティーURL）が、ブランドを統一し、ユーザーに継続性を示すのにどのように役立つかを理解します。"
'og:title': "カスタムドメイン"
'og:description': "カスタムドメイン（CNAMEまたはバニティーURL）が、ブランドを統一し、ユーザーに継続性を示すのにどのように役立つかを理解します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "カスタムドメイン"
'twitter:description': "カスタムドメイン（CNAMEまたはバニティーURL）が、ブランドを統一し、ユーザーに継続性を示すのにどのように役立つかを理解します。"
---

<Card title="概要">

重要なコンセプト

* カスタムドメインが動作するようにAuth0サービスを構成する
* Auth0 Dashboardを使ってカスタムドメインの検証プロセスを完了させる
* カスタムドメインで動作する機能の表を確認する
* URIやトークン要求でカスタムドメインが機能する仕組みを確認する
* 証明書の管理を自分で行うのか、Auth0に任せるのかを選択する

</Card>

認証ページで独自のドメイン名（CNAMEまたはバニティーURLとも呼ばれる）を使用できます。カスタムドメインを使用すると、ログインエクスペリエンスを独自のブランドや製品と統合できます。ユーザーに表示されるURLには、`YOUR_DOMAIN.auth0.com`の代わりに`login.YOUR_DOMAIN.com`などのブランドが表示されます。Auth0のカスタムドメインは、テナントドメインURLの「マスク」のようなものです。

テナントの作成時にカスタムドメインを設定することも、コードと設定を若干変更して既存の実装にカスタムドメインを追加することもできます。

## カスタムドメインを使用する利点

カスタムドメインを使用していれば、ユーザーは、より確信をもって自分の資格情報を適切な相手に提供できます。認証はブランドのコンテキスト内で行われるため、ブランドロイヤリティの構築に役立ちます。ユーザーが、ブランドのコンテキストを壊すサードパーティのサイトにリダイレクトされることはありません。これにより、ユーザーがまだ取引や操作が続いているのかどうか混乱する、といったことを避けることができます。

認証サービスを1か所に含めることで、アプリケーションアーキテクチャの保守が容易になります。アプリケーションは必要なアクセスのみを取得し、認証サービスは簡単に拡張できます。カスタムドメインを使用することによるその他のセキュリティ上の利点は以下のとおりです。

* 一部のブラウザーでは、共有ドメインがない場合、デフォルトでiFrameでの通信が困難になります。
* バニティーURLがある場合、URLを模倣するにはバニティーURLを作成する必要があるため、ドメインのフィッシング詐欺が難しくなります。たとえば、カスタムドメインを使用すると、独自の証明書を使用して拡張認証を取得できるため、フィッシングがより困難になります。

## 仕組み

カスダムドメインを構成する場合は、<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>の[［Auth0 Dashboard］>［Branding（ブランディング）］>［Custom Domains（カスタムドメイン）］](https://manage.auth0.com/#/custom_domains)タブで行います。カスタムドメインを追加し、証明書の種類を選択して、指示に従います。ドメインの検証プロセスを完了します。検証プロセスは、Auth0管理証明書を使用するか自己管理証明書を使用するかによって異なります。CNAMEを作成するときは、Auth0がCNAMEを検証してカスタムドメインを使用できるように、CNAMEをAuth0に対して宣言する必要があります。カスタムドメインを構成し確認したら、新しいカスタムドメインを使用するために[Auth0の機能を構成する](/ja-jp/customize/custom-domains/configure-features-to-use-custom-domains)必要があります。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

無料のカスタムドメインをセットアップするには、Auth0テナントは検証目的および詐欺防止のために有効なクレジットカードをファイルに保有していなければなりません。クレジットカードには請求されません。

</Callout>

Auth0では、CNAMEが正しく管理されていることを確認できるように、開発段階（運用環境に移行する前）でカスタムドメインを作成することを推奨しています。たとえば、`login.YOUR_DOMAIN.com`を`YOUR_DOMAIN.auth0.com`にマッピングするCNAMEを作成することができます。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

IPアドレスは変更されやすいため、Auth0はIPアドレスの静的なリストを提供していません。代わりに、カスタムドメインを[Allow List（許可リスト）](/ja-jp/secure/security-guidance/data-security/allowlist)に追加することをお勧めします。

</Callout>

カスタムドメインを使用するように既存のテナントを更新できます。`YOUR_DOMAIN.auth0.com`を使用した既存の統合はそのまま機能します。変更後は既存のセッションが無効になるため、ユーザーは再度ログインする必要があります。さらに、ログイン中にエラーが発生した場合、ユーザーはカスタムドメインに関連付けられたブラウザーCookieを削除しなければならない場合があります。埋め込み型のLockまたはSDKを使用する場合は、標準ドメイン設定とカスタムドメインのどちらを使用するかを選択できます。

<Warning>

カスタムドメインは、HTTPのベストプラクティスに従わなければなりません。フィールドの順序が正しくないと、ヘッダーが重複して送信される可能性があります。詳細については、「[RFC 7230 HTTP/1.1 Message Syntax Routing - Field Order](https://tools.ietf.org/html/rfc7230#section-3.2.2)」を参照してください。

</Warning>

### カスタムドメインと認証

以下のAuth0認証機能は、カスタムドメインの使用をサポートしています。

<table class="table"><thead>
<tr>
<th><b>機能またはフロー</b></th>
<th><b>詳細</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>ユニバーサルログイン</td>
<td>シームレスで安全なユーザーエクスペリエンスのため</td>
</tr>
<tr>
<td>MFA</td>
<td>すべての要素</td>
</tr>
<tr>
<td>Guardian</td>
<td>Android SDK/Swift SDK/MFA Widget バージョン 1.3.3/Guardian.js バージョン 1.3.0以降</td>
</tr>
<tr>
<td>メール</td>
<td>カスタムドメインを使用するメールに含まれるリンク</td>
</tr>
<tr>
<td>接続</td>
<td>データベース、ソーシャル、Google Workspace、Entra ID、 ADFS, AD/LDAP</td>
</tr>
<tr>
<td><Tooltip id="react-containers-DefinitionTooltip-1">Lock</Tooltip></td>
<td>クロスオリジン認証を備えたバージョン 11</td>
</tr>
<tr>
<td><Tooltip id="react-containers-DefinitionTooltip-2">パスワードレス</Tooltip></td>
<td>ユニバーサルログインで使用（このオプションが **Dashboard &gt; ［Tenant Settings（テナント設定）］ &gt; ［Custom Domains（カスタムドメイン）］** で有効にされた場合、カスタムドメインを使用してメールリンクを送信）</td>
</tr>
<tr>
<td><Tooltip id="react-containers-DefinitionTooltip-3">SAML</Tooltip></td>
<td>接続とアプリケーション</td>
</tr>
<tr>
<td>WS-Federation</td>
<td>IDプロバイダーとしてAuth0はWS-Fedアドオンを使用</td>
</tr>
<tr>
<td>OAuth 2.0/OIDC-Compliantフロー</td>
<td><a href="/ja-jp/api/authentication#authorize-application">`/authorize`</a>および<a href="/ja-jp/api/authentication#get-token">`/oauth/token`</a>エンドポイントを使用</td>
</tr>
</tbody>
</table>

### カスタムドメインとURI

Auth0は、サードパーティのIDプロバイダーやアプリケーションの相互運用性と設定のために、特定のメタデータエンドポイントを使用します。メタデータにAuth0を指し示すURIが含まれている場合は、メタデータの要求に使用したホスト名に応じて、URLはAuth0サブドメインまたはカスタムドメインのいずれかになります。例：

<table class="table"><thead>
<tr>
<th><b>使用するホスト名</b></th>
<th><b>メタデータ内の参照</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>`https://travel0.auth0.com/.well-known/...`</td>
<td>`https://travel0.auth0.com/...`</td>
</tr>
<tr>
<td>`https://travel0.auth0.com/samlp/metadata/...`</td>
<td>`https://travel0.auth0.com/...`</td>
</tr>
<tr>
<td>`https://login.travel0.com/samlp/metadata/...`</td>
<td>`https://login.travel0.com/...`</td>
</tr>
</tbody>
</table>

詳細については「[ログイン後にユーザーをリダイレクトする](/ja-jp/authenticate/login/redirect-users-after-login)」を参照してください。

この柔軟性は、以下の認証シナリオに適用されます。

* [OpenID Connect Discoveryを使ったアプリケーションの構成](/ja-jp/get-started/applications/configure-applications-with-oidc-discovery)
* [SAMLサービスプロバイダーとしてのAuth0の構成](/ja-jp/authenticate/protocols/saml/saml-sso-integrations/configure-auth0-saml-service-provider)
* [SAML IDプロバイダーとしてのAuth0の構成](/ja-jp/authenticate/single-sign-on/outbound-single-sign-on/configure-auth0-saml-identity-provider)

### カスタムドメインとトークン要求

Auth0は、トークン要求で使用したドメインに対して、`iss`クレームを持つトークンを発行します。例：

<table class="table"><thead>
<tr>
<th><b>使用するドメイン</b></th>
<th><b>issのクレーム値</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>`https://travel0.auth0.com/authorize...`<br/>`https://travel0.auth0.com/oauth/token...`</td>
<td>`https://travel0.auth0.com/`</td>
</tr>
<tr>
<td>`https://login.travel0.com/authorize...`<br/>`https://login.travel0.com/oauth/token...`</td>
<td>`https://login.travel0.com/`</td>
</tr>
</tbody>
</table>

カスタムドメインを使った認可フローを使用して<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip>のアクセストークンを取得する場合は、そのカスタムドメインを使用してManagement APIを呼び出す必要があります。そうしないと、トークンは無効とみなされます。トークンの`iss`クレームは、オーディエンスに依存しません。カスタムドメインを使用して取得したトークンの場合、オーディエンスの値は変わりません。トークンの詳細については、「[Management APIのアクセストークン](/ja-jp/secure/tokens/access-tokens/management-api-access-tokens)」をご確認ください。

## 証明書管理のオプション

### Auth0管理証明書

Auth0は、カスタムドメインの証明書を管理し、SSLハンドシェイクを直接管理できます。ドメインにCNAMEレコードを追加すると、Auth0がそのレコードを確認し、Auth0サーバー上に証明書を生成します。この証明書は3か月ごとに自動的に更新されます。確認したら、カスタムドメインの使用を開始するために、[Auth0の機能を構成](/ja-jp/customize/custom-domains/configure-features-to-use-custom-domains)します。詳細については、「[Auth0管理証明書を使ってカスタムドメインを構成する](/ja-jp/customize/custom-domains/auth0-managed-certificates)」をご確認ください。

### 自己管理証明書

カスタムドメインで[独自の証明書を取得し管理する](/ja-jp/customize/custom-domains/self-managed-certificates)ことができます。この場合、SSL証明書を処理し、コンテンツをAuth0に送信するためのリバースプロキシを設定および管理するのはユーザーの責任です。Auth0は、エンドユーザークライアントと直接SSLをネゴシエートするのではなく、プロキシとSSLをネゴシエートします。その後、プロキシはエンドユーザーとSSLをネゴシエートします。他人が所有しているドメインから、誰かがあなたのAuth0アカウントを使用しようとするのを防ぐために、Auth0はそのドメインがあなたに属していることを検証する必要があります。検証するには、Auth0にヘッダー（`cname-api-key`）を指定する必要があります。このオプションを使用するには、Auth0のエンタープライズサブスクライバーである必要があります。

Auth0は、以下のプロバイダーのリバースプロキシを設定する手順を提供しています。

* [Google Cloud Platform with Load Balancing](/ja-jp/customize/custom-domains/self-managed-certificates/configure-gcp-as-reverse-proxy)
* [Cloudflare](/ja-jp/customize/custom-domains/self-managed-certificates/configure-cloudflare-for-use-as-reverse-proxy)
* [AWS CloudFront](/ja-jp/customize/custom-domains/self-managed-certificates/configure-aws-cloudfront-for-use-as-reverse-proxy)
* [Azure CDN](/ja-jp/customize/custom-domains/self-managed-certificates/configure-azure-cdn-for-use-as-reverse-proxy)

## もっと詳しく

* [機能にカスタムドメインの使用を構成する](/ja-jp/customize/custom-domains/configure-features-to-use-custom-domains)
* [Auth0管理証明書を使ってカスタムドメインを構成する](/ja-jp/customize/custom-domains/auth0-managed-certificates)
* [自己管理証明書を使ってカスタムドメインを構成する](/ja-jp/customize/custom-domains/self-managed-certificates)
* [カスタムドメインのトラブルシューティング](/ja-jp/troubleshoot/integration-extensibility-issues/troubleshoot-custom-domains)
* [プライベートクラウドのカスタムドメインを移行する](/ja-jp/migrate-private-cloud-custom-domains)