---
title: "パスワードでのIdentifier Firstサインアップを構築する"
permalink: "id-first-signup"
'description': "ID FirstサインアップフローにACULを実装するためのガイドです"
'og:title': "パスワードでのIdentifier Firstサインアップを構築する"
'og:description': "ID FirstサインアップフローにACULを実装するためのガイドです"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "パスワードでのIdentifier Firstサインアップを構築する"
'twitter:description': "ID FirstサインアップフローにACULを実装するためのガイドです"
---

<Card title="Before you start">

以下が必要です。

* ユニバーサルログインが構成されたAuth0開発テナント。
* カスタムドメイン構成のアプリケーション。
* ローカルホスト上で動作する開発用アプリまたはサンプルアプリ（[Reactサンプルアプリ](https://auth0.com/docs/quickstart/spa/react)など）
* [Identifier First認証](/ja-jp/authenticate/login/auth0-universal-login/identifier-first)が有効になっている
* パスワードを使用するデータベース接続

</Card>

このガイドの終わりには、カスタマイズしたサインアップID画面とサインアップパスワード画面のあるIdentity Firstフローが完成します。詳細については、「[使用の開始ガイド](/ja-jp/customize/login-pages/advanced-customizations/getting-started)」をお読みの上で、[SDKリファレンスガイド](/ja-jp/customize/login-pages/advanced-customizations/getting-started/sdk-quickstart)」を参照してください。

## セットアップする

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>で[ユニバーサルログイン](/ja-jp/authenticate/login/auth0-universal-login/universal-login-vs-classic-login/universal-experience)、[Identifier First認証](/ja-jp/authenticate/login/auth0-universal-login/identifier-first)、パスワードを使用する[データベース接続](/ja-jp/get-started/applications/set-up-database-connections)をセットアップします。

シングルページアプリケーションを実行して、カスタムログイン画面を構築します。高度なカスタマイズインターフェイスのコンテキストを理解するには、Auth0が提供するボイラープレートアプリをクローンしてください：`git clone https://github.com/auth0/auth0-acul-react-boilerplate`

[ACUL SDK](/ja-jp/customize/login-pages/advanced-customizations/getting-started/sdk-quickstart)をインストールします。Reactのボイラープレートをクローンしたら、ディレクトリを`auth0-acul-react-boilerplate`に変更して、SDKをインストールします。

```javascript lines
//Clone the ACUL sample application into the root folder of your project

git clone https://github.com/auth0-samples/auth0-acul-samples.git

//Change directory to install the ACUL sample application 

cd auth0-acul-samples && npm i
```

## 1. signup-id画面を構築する

<Frame>![Signup ID](/images/cdy7uua7fh8z/5lzGYj0k4VcxvPCBYH37SO/ebd291cc0dbd673a70f93530f724bf65/Signup_ID.png)</Frame>


以下は完全な画面の例です。


<Accordion title="サインアップID">

```javascript lines
import { ChangeEvent } from "react";
import { SignupId as ScreenProvider } from "@auth0/auth0-acul-js";

// UI Components
import { Label } from "@/components/ui/label";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { Text } from "@/components/ui/text";
import { Link } from "@/components/ui/link";
import {
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";

export default function SignupId() {
  // Initialize the SDK for this screen
  const screenProvider = new ScreenProvider();

  // Handle the submit action
  const formSubmitHandler = (event: ChangeEvent<HTMLFormElement>) => {
    event.preventDefault();

    // grab the value from the form
    const identifierInput = event.target.querySelector(
      "input#identifier"
    ) as HTMLInputElement;

    // Call the SDK
    screenProvider.signup({ email: identifierInput?.value });
  };

  // Render the form
  return (
    <form noValidate onSubmit={formSubmitHandler}>
      <CardHeader>
        <CardTitle className="mb-2 text-3xl font-medium text-center">
          {screenProvider.screen.texts?.title ?? "Welcome"}
        </CardTitle>
        <CardDescription className="mb-8 text-center">
          {screenProvider.screen.texts?.description ?? "Create your account"}
        </CardDescription>
      </CardHeader>
      <CardContent>
        <div className="mb-2 space-y-2">
          <Label htmlFor="identifier">
            {screenProvider.screen.texts?.emailPlaceholder ??
              "Enter your email"}
          </Label>
          <Input
            type="text"
            id="identifier"
            name="identifier"
            defaultValue={
              screenProvider.screen.data?.email ??
              screenProvider.untrustedData.submittedFormData?.email
            }
          />
        </div>
        <Button type="submit" className="w-full">
          {screenProvider.screen.texts?.buttonText ?? "Continue"}
        </Button>
        <Text>
          {screenProvider.screen.texts?.footerText ??
            "Already have an account?"}
          <Link className="ml-1" href={screenProvider.screen.loginLink ?? "#"}>
            {screenProvider.screen.texts?.footerLinkText ??
              "Log into your account"}
          </Link>
        </Text>
      </CardContent>
    </form>
  );
}
```

</Accordion>

### SDKをインポートして初期化する

`auth0-acul-react-boilerplate/src`フォルダー内に「`screens`」という名前のフォルダーと「`Login.tsx`」という名前のファイルを作成します。SDKをインポートして、Reactコンポーネント内で画面にSDKを初期化します。

```javascript lines
import { SignupId as ScreenProvider } from "@auth0/auth0-acul-js";

export default function SignupId() {
  // Initialize the SDK for this screen
  const screenProvider = new ScreenProvider();
  ...
}
```

### SDKで画面のプロパティやメソッドにアクセスする

SDKを使用すると、画面のプロパティやメソッドにアクセスできます。[Auth0 ACUL JS SDK](/ja-jp/customize/login-pages/advanced-customizations/getting-started/sdk-quickstart)にはデータにアクセスするためのプロパティとメソッドがあります。

コンテキストデータの詳細については、「ユニバーサルログインのコンテキストデータ」をお読みください。

### サインアップアクションを実装する

`Login.tsx`ファイル内で`button click`関数を見つけて、サインアップアクションを実装します。

```javascript lines
<form noValidate onSubmit={formSubmitHandler}>
    ...
      <CardContent>
        <div className="mb-2 space-y-2">
          <Label htmlFor="identifier">
            {screenProvider.screen.texts?.emailPlaceholder ??
              "Enter your email"}
          </Label>
          <Input
            type="text"
            id="identifier"
            name="identifier"
            defaultValue={
              screenProvider.screen.data?.email ??
              screenProvider.untrustedData.submittedFormData?.email
            }
          />
        </div>
        <Button type="submit" className="w-full">
          {screenProvider.screen.texts?.buttonText ?? "Continue"}
        </Button>
      </CardContent>
    </form>
  );
}
```

### 送信アクションを呼び出す

SDKを使用して、画面で捉えたデータをサーバーに送信します。サーバーはこのデータを処理し、フローにある次の手順にユーザーを進めます。エラーがあれば画面を再度読み込んで、ユーザーにエラーのある箇所を示します。エラーはSDKからアクセスされます。

```javascript lines
const formSubmitHandler = (event: ChangeEvent<HTMLFormElement>) => {
    event.preventDefault();

    // grab the value from the form
const identifierInput = event.target.querySelector(
      "input#identifier"
    ) as HTMLInputElement;

    // Call the SDK
    screenProvider.signup({ email: identifierInput?.value });
  };
```

## 2. signup-password画面を構築する

<Frame>![Signup Password with Flexible IDs](/images/cdy7uua7fh8z/5h85r3sVhe8mVw7rDkDwTD/02c3521d9d6c4d490c1a64ae37ecca72/Signup_Password_with_Flexible_IDs.png)</Frame>


以下は完全な画面の例です。


<Accordion title="サインアップパスワード">

```javascript lines
import { ChangeEvent } from "react";
import { SignupPassword as ScreenProvider } from "@auth0/auth0-acul-js";

// UI Components
import { Label } from "@/components/ui/label";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { Text } from "@/components/ui/text";
import { Link } from "@/components/ui/link";
import {
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";

export default function SignupPassword() {
  // Initialize the SDK for this screen
  const screenProvider = new ScreenProvider();

  // Handle the submit action
  const formSubmitHandler = (event: ChangeEvent<HTMLFormElement>) => {
    event.preventDefault();

  // grab the value from the form
    const identifierInput = event.target.querySelector(
      "input#identifier"
    ) as HTMLInputElement;
    const passwordInput = event.target.querySelector(
      "input#password"
    ) as HTMLInputElement;

    // Call the SDK
    screenProvider.signup({
      email: identifierInput?.value,
      password: passwordInput?.value,
    });
  };

  // Render the form
  return (
    <form noValidate onSubmit={formSubmitHandler}>
      <CardHeader>
        <CardTitle className="mb-2 text-3xl font-medium text-center">
          {screenProvider.screen.texts?.title ?? "Enter Your Password"}
        </CardTitle>
        <CardDescription className="mb-8 text-center">
          {screenProvider.screen.texts?.description ??
            "Enter your password to continue"}
        </CardDescription>
      </CardHeader>
      <CardContent>
        <Text className="mb-4 text-large">
          <span className="inline-block">
            Sign up as
            <span className="inline-block ml-1 font-bold">
              {screenProvider.screen.data?.email}.
            </span>
          </span>
          <Link
            href={screenProvider.screen.editLink ?? "#"}
            className="ml-2"
          >
            {screenProvider.screen.texts?.editEmailText ?? "Edit Email"}
          </Link>
        </Text>
        <Input
          type="hidden"
          name="identifier"
          id="identifier"
          value={screenProvider.screen.data?.email}
        />
        <div className="mb-2 space-y-2">
          <Label htmlFor="password">
            {screenProvider.screen.texts?.passwordPlaceholder ?? "Password"}
          </Label>
          <Input type="password" id="password" name="password" />
        </div>
        <Button type="submit" className="w-full">
          {screenProvider.screen.texts?.buttonText ?? "Continue"}
        </Button>
        <Text>
          {screenProvider.screen.texts?.footerText ??
            "Already have an account?"}
          <Link className="ml-1" href={screenProvider.screen.loginLink ?? "#"}>
            {screenProvider.screen.texts?.footerLinkText ??
              "Log into your account"}
          </Link>
        </Text>
      </CardContent>
    </form>
  );
}
```

</Accordion>

### SDKをインポートして初期化する

`auth0-acul-react-boilerplate/src`フォルダー内に「`screens`」という名前のフォルダーと「`Login.tsx`」という名前のファイルを作成します。SDKをインポートして、Reactコンポーネント内で画面にSDKを初期化します。

```javascript lines
import { SignupPassword as ScreenProvider } from "@auth0/auth0-acul-js";

export default function SignupPassword() {
  // Initialize the SDK for this screen
const screenProvider = new ScreenProvider();
  ...
  }
```

### SDKで画面のプロパティやメソッドにアクセスする

SDKを使用すると、画面のプロパティやメソッドにアクセスできます。[Auth0 ACUL JS SDK](/ja-jp/customize/login-pages/advanced-customizations/getting-started/sdk-quickstart)にはデータにアクセスするためのプロパティとメソッドがあります。

コンテキストデータの詳細については、「ユニバーサルログインのコンテキストデータ」をお読みください。

```javascript lines
<form noValidate onSubmit={formSubmitHandler}>
      ...
  <CardContent>
   <Text className="mb-4 text-large">
    <span className="inline-block">
      Sign up as
   <span className="inline-block ml-1 font-bold">
   {screenProvider.screen.data?.email}.
  </span>
 </span>
  <Link
   href={screenProvider.screen.editLink ?? "#"}
    className="ml-2"
   >
   {screenProvider.screen.texts?.editEmailText ?? "Edit Email"}
  </Link>
  </Text>
  <Input
  type="hidden"
  name="identifier"
         id="identifier"
         value={screenProvider.screen.data?.email}
        />
 <div className="mb-2 space-y-2">
   <Label htmlFor="password">
     {screenProvider.screen.texts?.passwordPlaceholder ?? "Password"}
    </Label>
    <Input type="password" id="password" name="password" />
   </div>
  <Button type="submit" className="w-full">
     {screenProvider.screen.texts?.buttonText ?? "Continue"}
    </Button>
  ...
      </CardContent>
    </form>
```

### 送信アクションを呼び出す

SDKを使用して、画面で捉えたデータをサーバーに送信します。サーバーはこのデータを処理し、フローにある次の手順にユーザーを進めます。エラーがあれば画面を再度読み込んで、ユーザーにエラーのある箇所を示します。エラーはSDKからアクセスされます。

```javascript lines
const formSubmitHandler = (event: ChangeEvent<HTMLFormElement>) => {
    event.preventDefault();

  // grab the value from the form
    const identifierInput = event.target.querySelector(
      "input#identifier"
    ) as HTMLInputElement;
    const passwordInput = event.target.querySelector(
      "input#password"
    ) as HTMLInputElement;

    // Call the SDK
    screenProvider.signup({
      email: identifierInput?.value,
      password: passwordInput?.value,
    });
  };
```

## 3. ACULにローカルアセットの使用を構成する

Auth0 CLI、Terraform、または<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip>を使用してACULを有効化します。構成可能な項目については、「[ACUL画面を構成する](/ja-jp/customize/login-pages/advanced-customizations/getting-started/configure-acul-screens)」をお読みください。

<Tabs><Tab title="Auth0 CLI（推奨）">

プロジェクトのルートディレクトリに`settings`フォルダーを作成して、`{SCREENNAME}.json`ファイルを格納します。

```javascript lines
//settings.json
{
  "rendering_mode": "advanced",
  "context_configuration": [
    "screen.texts"
  ],
  "head_tags": [
    {
      "attributes": {
        "async": true,
        "defer": true,
        "integrity": [
          "ASSET_SHA"
        ],
        "src": "http://127.0.0.1:8080/index.js"
      },
      "tag": "script"
    },
    {
      "attributes": {
        "href": "http://127.0.0.1:8080/index.css",
        "rel": "stylesheet"
      },
      "tag": "link"
    }
  ]
}
```

 Auth0 CLIでACULを有効にするには以下を行います。

```javascript lines
auth0 ul customize --rendering-mode advanced --prompt {SCREENNAME} --screen {SCREENNAME} --settings-file ./settings/{SCREENNAME}.json
```

</Tab><Tab title="Auth0 Terraform">

プロジェクトのルートディレクトリ内に`login-id.json`ファイルを作成します：

```javascript lines
//login-id.json
{
  "rendering_mode": "advanced",
  "context_configuration": [
    "screen.texts"
  ],
  "head_tags": [
    {
      "attributes": {
        "async": true,
        "defer": true,
        "integrity": [
          "ASSET_SHA"
        ],
        "src": "http://127.0.0.1:8080/index.js"
      },
      "tag": "script"
    },
    {
      "attributes": {
        "href": "http://127.0.0.1:8080/index.css",
        "rel": "stylesheet"
      },
      "tag": "link"
    }
  ]
}
```

Auth0 TerraformでACULを有効にする

```javascript lines
prompts:
  identifier_first: true
  universal_login_experience: classic
        mfa-login-options:
          pageTitle: 'Log in to ${clientName}'
          authenticatorNamesSMS: 'SMS'
  screenRenderers:
    - login-id:
        login-id: ./prompts/screenRenderSettings/login-id.json
```

</Tab><Tab title="Auth0 Management API">

Auth0 Management APIを使用してACULを有効化できます

```javascript lines
curl --location --request PATCH 'https://{YOUR-CUSTOM-DOMAIN}/api/v2/prompts/{YOUR-PROMPT}/screen/{YOUR-SCREEN}/rendering' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer <API TOKEN>' \
--data '{
    "rendering_mode": "advanced",
        "context_configuration": [
        "branding.settings",
        "organization.branding",
        "screen.texts",
        "tenant.name",
        "tenant.friendly_name",
        "tenant.enabled_locales",
        "untrusted_data.submitted_form_data",
        "untrusted_data.authorization_params.ui_locales",
        "untrusted_data.authorization_params.login_hint",
        "untrusted_data.authorization_params.screen_hint"
    ],
    "head_tags": [
      {
        "tag": "script",
        "attributes": {
          "src": "http://127.0.0.1:8080/index.js",
          "defer": true
        }
      },
      {
        "tag": "link",
        "attributes": {
          "rel": "stylesheet",
          "href": "http://127.0.0.1:8080/index.css"
        }
      },
      {
        "tag": "meta",
        "attributes": {
          "name": "viewport",
          "content": "width=device-width, initial-scale=1"
        }
      }
    ]
}'
```

</Tab></Tabs>

### ローカルサーバーで構成をテストする

ACULではアセットを公開URLでホストする必要があります。アセットをデプロイする前に、ローカルサーバーを実行してアセットをテストしてください。

```javascript lines
// Creates the local assets 

npm run build 
cd dist 

// Serves the assets from localhost

npx serve -p 8080 --cors
```

## 4. アセットをデプロイしてテナント構成を更新する

ユニバーサルログインの高度なカスタマイズは、ViteやWebpackなどを含むすべてのModern Javascriptバンドルで動作します。詳細については、「高度なカスタマイズを運用にデプロイする」をお読みください。

テナントにACULをデプロイする詳細については、「[ACUL画面を構成する](/ja-jp/customize/login-pages/advanced-customizations/getting-started/configure-acul-screens)」をお読みください。

## 関連コンテンツ

<table class="table"><thead>
<tr>
<th><strong>トピック</strong></th>
<th><strong>説明</strong>                               </th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/ja-jp/customize/login-pages/advanced-customizations">ユニバーサルログインの高度なカスタマイズ</a></td>
<td>高度なカスタマイズの仕組みを説明します。</td>
</tr>
<tr>
<td><a href="/ja-jp/customize/login-pages/advanced-customizations/getting-started">高度なカスタマイズの使用を開始する</a></td>
<td>高度なカスタマイズの入門ガイドです。</td>
</tr>
<tr>
<td><a href="/ja-jp/customize/login-pages/advanced-customizations/screens">ユニバーサルログインの高度なカスタマイズ：画面</a></td>
<td>高度なカスタマイズに利用可能な画面のリストです。</td>
</tr>
</tbody>
</table>