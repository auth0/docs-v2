---
title: "ルールをデバッグする"
permalink: "debug-rules"
'description': "Auth0ルールのデバッグ方法を説明します。"
'og:title': "ルールをデバッグする"
'og:description': "Auth0ルールのデバッグ方法を説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ルールをデバッグする"
'twitter:description': "Auth0ルールのデバッグ方法を説明します。"
---

<Warning>

RulesとHooksのサポート終了（EOL）日は**2026年11月18日** であり、**2023年10月16** 日の時点で作成された新しいテナントは使用できなくなります。Hooksが有効な既存のテナントは、サポート終了までHooksを利用できます。

今後はActionsに移行して、Auth0の機能を拡張することを強くお勧めします。Actionsを使用すると、豊富な情報やインラインドキュメント、パブリック`npm`パッケージにアクセスして、外部統合を使って全体的な拡張エクスペリエンスを強化することができます。Actionsの詳細については、「[Auth0 Actionsの仕組みを理解する](/ja-jp/customize/actions/actions-overview)」をお読みください。

当社では、移行の参考資料として、[RulesからActionsへの移行](/ja-jp/customize/actions/migrate/migrate-from-rules-to-actions)と[HooksからActionsへの移行](/ja-jp/customize/actions/migrate/migrate-from-hooks-to-actions)に関するガイドを提供しています。また、専用の「[Actionsへの移行](https://auth0.com/extensibility/movetoactions)」ページでは、機能の比較や[Actionsのデモ](https://www.youtube.com/watch?v=UesFSY1klrI)、その他のリソースを掲載して、円滑な移行をサポートしています。

RulesとHooksの廃止の詳細については、当社のブログ記事「[RulesとHooksの提供終了について](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/)」をお読みください。

</Warning>

<Warning>

IPv6アドレスはパブリックエンドポイントで公開しています（例：`travel0.us.auth0.com`）。IPv6をサポートするマシンから要求が届いた場合、`context.request.ip`プロパティにIPv6アドレスが含まれます。手動でIPアドレスを操作する場合は、[ipaddr.js@1.9.0 library](https://www.npmjs.com/package/ipaddr.js/v/1.9.0)の使用をお勧めします。

</Warning>

作成した[Auth0ルール](/ja-jp/rules)をデバッグするには、ルールコードから`console.log`を使用できます。**［Save and Try（保存して試す）］** 、[Real-time Webtask Logs 拡張機能](#real-time-logs-extension)でログを表示する、レガシークライアントの場合は、[Debug Rule CLI（ルールのデバッグCLI）](#debug-rule-cli)を使用して、`console.log`アウトプットを確認できます。

<Frame>![Dashboard - Auth Pipeline - Rules - Edit Rule](/images/ja-jp/cdy7uua7fh8z/5CoC6cnazv2uT1iSq6OGsm/6cb30d9479971be771313da80acc4802/Dashboard_-_Auth_Pipeline_-_Rules_-_Edit_Rule.png)</Frame>

## Try this Rule（このRuleを試す）

[Rules Editor（ルールエディター）](https://manage.auth0.com/#/rules/create)の **［Save and Try（保存して試す）］** ボタンを使用すると、モックの **ユーザー** と **コンテキスト** オブジェクトを使って、ルールを独立して実行できます。**［TRY（試す）］** をクリックすると、これら2つのオブジェクトを入力としてルールが実行され、すべての`console.log`を表示します。

**このルールスクリプトを試す** 機能は、指定のクライアントテキスト外で機能します。この機能を使用した場合、ルールが、実際のアプリケーションから呼び出された際に提供されるデータに依存していると、問題が発生することがあります。

<Frame>![Auth0 Pipeline - Rules - Try this rule](/images/ja-jp/cdy7uua7fh8z/4scLIFzI1isvJZ9UI6mHfR/eceb674d3a53ecbab1bd9835a5194012/Auth_Pipeline_-_Rules_-_Try.png)</Frame>

## リアルタイムのログ拡張機能

Real-time Webtask Logs（リアルタイムのWebタスクログ）拡張機能は、アカウントにあるすべてのカスタムコー​ドのログをリアルタイムで表示します。これにはすべての`console.log`アウトプットと例外が含まれます。詳しくは、[Real-time Webtask Logs（リアルタイムのWebタスクログ）](/ja-jp/extensions/realtime-webtask-logs)をご覧ください。

## Debug Rule CLI（ルールのデバッグCLI）

<Warning>

Webtask.ioおよびWebtask CLIにアクセスできるのは、2018年7月17日より前に作成されたテナントのみです。それより新しいテナントをご利用のエンタープライズのお客様は、アカウント担当者にアクセス権をリクエストしてください。その他のリクエストには、[Auth0お問い合わせフォーム](https://auth0.com/get-started?place=documentation%20post&type=link&text=auth0%20contact%20form)をご利用いただければ、個別に対応いたします。

</Warning>

[Rules Editor（ルールエディター）](https://manage.auth0.com/#/rules/create)の**保存してデバッグする** オプションを使用すると、ルールのデバッグのために[webtask CLI](https://github.com/auth0/wt-cli)をインストール、設定、実行するための指示が表示されます。これらのコマンドをターミナルに貼り付けることで、`console.log`の出力とルール実行中に発生する未処理の例外を確認できます。

例：

```bash lines
~  npm install -g wt-cli
~  wt init --container "youraccount" --url "https://sandbox.it.auth0.com" --token "eyJhbGci...WMPGI" -p "youraccount-default-logs"
~  wt logs -p "youraccount-default-logs"
[18:45:38.179Z]  INFO wt: connected to streaming logs (container=youraccount)
[18:47:37.954Z]  INFO wt: webtask container assigned
[18:47:38.167Z]  INFO wt: ---- checking email_verified for some-user@mail.com! ----
```

このデバッグ方法は、ダッシュボードから試行されたRulesや、ユーザー認証中に実際に実行されたRulesには有効です。