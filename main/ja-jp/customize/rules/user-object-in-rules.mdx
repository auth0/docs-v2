---
title: "ルールのユーザーオブジェクトプロパティ"
permalink: "user-object-in-rules"
'description': "ユーザーオブジェクトのプロパティについて説明します。このユーザーオブジェクトはIDプロバイダーから返され、ログイン済みユーザーについての情報が保管されます。"
'og:title': "ルールのユーザーオブジェクトプロパティ"
'og:description': "ユーザーオブジェクトのプロパティについて説明します。このユーザーオブジェクトはIDプロバイダーから返され、ログイン済みユーザーについての情報が保管されます。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ルールのユーザーオブジェクトプロパティ"
'twitter:description': "ユーザーオブジェクトのプロパティについて説明します。このユーザーオブジェクトはIDプロバイダーから返され、ログイン済みユーザーについての情報が保管されます。"
---

<Warning>

RulesとHooksのサポート終了（EOL）日は**2026年11月18日** であり、**2023年10月16** 日の時点で作成された新しいテナントは使用できなくなります。Hooksが有効な既存のテナントは、サポート終了までHooksを利用できます。

今後はActionsに移行して、Auth0の機能を拡張することを強くお勧めします。Actionsを使用すると、豊富な情報やインラインドキュメント、パブリック`npm`パッケージにアクセスして、外部統合を使って全体的な拡張エクスペリエンスを強化することができます。Actionsの詳細については、「[Auth0 Actionsの仕組みを理解する](/ja-jp/customize/actions/actions-overview)」をお読みください。

当社では、移行の参考資料として、[RulesからActionsへの移行](/ja-jp/customize/actions/migrate/migrate-from-rules-to-actions)と[HooksからActionsへの移行](/ja-jp/customize/actions/migrate/migrate-from-hooks-to-actions)に関するガイドを提供しています。また、専用の「[Actionsへの移行](https://auth0.com/extensibility/movetoactions)」ページでは、機能の比較や[Actionsのデモ](https://www.youtube.com/watch?v=UesFSY1klrI)、その他のリソースを掲載して、円滑な移行をサポートしています。

RulesとHooksの廃止の詳細については、当社のブログ記事「[RulesとHooksの提供終了について](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/)」をお読みください。

</Warning>

`user`オブジェクトはIDプロバイダーから返され、ログイン済みユーザーについての情報が保管されます。ユーザーの認証時、ルールの実行前に生成されます。ユーザー認証ではイベントに順序があるため、ルール内からユーザープロファイルに対して実行された変更内容は、その同じルール内からユーザーオブジェクトに対して変更内容を保存すると、現在のユーザーオブジェクトでのみ使用可能になります。

認証トランザクションフローの詳細については、「[ルールを作成する](/ja-jp/customize/rules/create-rules)」にある「ルールの仕組み」セクションをお読みください。

<Warning>

ユーザーオブジェクトのルートプロパティと`app_metadata`内のプロパティには、一意の名前を使用します。`app_metadata`内のプロパティがユーザーオブジェクトにマージされるため、`app_metadata`内のプロパティと同じ名前を持つルートプロパティは、ルールの実行時に値が上書きされる可能性があります。

</Warning>

## プロパティ

以下のプロパティは`user`オブジェクトで使用することができます。

<table class="table">
<thead>
<tr>
<th>プロパティ</th>
<th>データタイプ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>`user.app_metadata`</td>
<td>オブジェクト</td>
<td>サポートプラン、セキュリティロール、アクセス制御グループなどのユーザーアクセスに影響するユーザーについての情報を保存するカスタムフィールドです。デフォルトでは、`undefined`です。詳細は<a href="/ja-jp/users/metadata">メタデータ</a>をご覧ください。</td>
</tr>
<tr>
<td>`user.created_at`</td>
<td>日時</td>
<td>ユーザープロファイルが最初に作成された日時を示すタイムスタンプ。</td>
</tr>
<tr>
<td>`user.email`</td>
<td>テキスト</td>
<td>（一意）ユーザーのメールアドレス。</td>
</tr>
<tr>
<td>`user.email_verified`</td>
<td>ブール値</td>
<td>ユーザーがメールアドレスを確認済みかどうかを示します。</td>
</tr>
<tr>
<td>`user.family_name`</td>
<td>テキスト</td>
<td>ユーザーの姓。</td>
</tr>
<tr>
<td>`user.given_name`</td>
<td>テキスト</td>
<td>ユーザーの名。</td>
</tr>
<tr>
<td>`user.identities`</td>
<td>配列（オブジェクト）</td>
<td>ユーザーを最初に認証したIDプロバイダーから取得された情報を格納します。ユーザーは<a href="/ja-jp/users/user-account-linking">プロファイルを複数のIDプロバイダーにリンクする</a>こともできますが、その場合にはそれらのアイデンティティーもこの配列に含まれます。個別のIDプロバイダーオブジェクトのコンテンツはプロバイダーによって異なりますが、一般的には次のものを含みます：<ul>
<li>`connection` （テキスト）：ユーザーの認証に使用されるAuth0接続の名前。</li>
<li>`isSocial`（ブール値）：接続がソーシャルのものか示します。</li>
<li>`provider`（テキスト）：Facebook、Google、SAML、または独自のプロバイダーといったユーザーを認証するエンティティの名前。</li>
<li>`user_id` （テキスト）：この接続/プロバイダーのユーザーの一意ID。最初のuser_idリンクはユーザーの主要の一意IDになります。</li>
<li>`profileData`（オブジェクト）：接続に関連づけられたユーザー情報。プロファイルがリンクされると、そこにはセカンダリアカウントの関連するユーザー情報が入力されます。</li></ul>
場合によっては、プロバイダーに使用されるAPIアクセストークンを含むものもあります。</td>
</tr>
<tr>
<td>`user.last_password_reset`</td>
<td>日時</td>
<td>ユーザーパスワードがリセット/変更された最終日時を示すタイムスタンプ。ユーザーの作成時に、このフィールドは存在しません。このフィールドは、データベース接続でのみ利用できます。</td>
</tr>
<tr>
<td>`user.multifactor`</td>
<td>配列（テキスト）</td>
<td>ユーザーが登録された多要素認証（<Tooltip id="react-containers-DefinitionTooltip-0">MFA</Tooltip>）プロバイダーのリスト。この配列は、ユーザーがMFAに登録されたときと管理者がユーザーのMFA登録をリセットするときに更新されます。</td>
</tr>
<tr>
<td>`user.name`</td>
<td>テキスト</td>
<td>ユーザーの氏名。</td>
</tr>
<tr>
<td>`user.nickname`</td>
<td>テキスト</td>
<td>ユーザーのニックネーム。</td>
</tr>
<tr>
<td>`user.permissions`</td>
<td>テキスト</td>
<td>認可拡張機能を使用した場合にユーザーのIDトークンに割り当てられる許可。</td>
</tr>
<tr>
<td>`user.phone_number`</td>
<td>テキスト</td>
<td>ユーザーの電話番号。SMS接続のあるユーザーに対してのみ有効です。</td>
</tr>
<tr>
<td>`user.phone_verified`</td>
<td>ブール値</td>
<td>ユーザーが電話番号を確認済みかどうかを示します。SMS接続のあるユーザーに対してのみ有効です。</td>
</tr>
<tr>
<td>`user.picture`</td>
<td>テキスト</td>
<td><a href="/ja-jp/users/change-user-picture">ユーザーのプロファイル写真</a> を指すURL。</td>
</tr>
<tr>
<td>`user.updated_at`</td>
<td>日時</td>
<td>ユーザーのプロファイルが最後に更新/変更された日時を示すタイムスタンプ。`last_login`の変更は更新と見なされます。そのため、ほとんどの場合、`updated_at`は`last_login`に一致します。</td>
</tr>
<tr>
<td>`user.user_id`</td>
<td>テキスト</td>
<td>（一意）ユーザーの一意のプライマリID。</td>
</tr>
<tr>
<td>`user.user_metadata`</td>
<td>オブジェクト</td>
<td>勤務先住所、自宅住所、ユーザーの設定など、ユーザーのアクセスに影響を与えないユーザーの情報を保存するカスタムフィールド。詳細は<a href="/ja-jp/users/metadata">メタデータ</a>をご覧ください。</td>
</tr>
<tr>
<td>`user.username`</td>
<td>テキスト</td>
<td>（一意）ユーザーのユーザー名。</td>
</tr>
</tbody>
</table>