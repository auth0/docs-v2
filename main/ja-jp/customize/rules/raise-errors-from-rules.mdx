---
title: "ルールからエラーを表示させる"
permalink: "raise-errors-from-rules"
'description': "Auth0のログインページでは、ルールからのエラーメッセージを表示することができません。代わりに何をすべきかを説明します。"
'og:title': "ルールからエラーを表示させる"
'og:description': "Auth0のログインページでは、ルールからのエラーメッセージを表示することができません。代わりに何をすべきかを説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ルールからエラーを表示させる"
'twitter:description': "Auth0のログインページでは、ルールからのエラーメッセージを表示することができません。代わりに何をすべきかを説明します。"
---

<Warning>

RulesとHooksのサポート終了（EOL）日は**2026年11月18日** であり、**2023年10月16** 日の時点で作成された新しいテナントは使用できなくなります。Hooksが有効な既存のテナントは、サポート終了までHooksを利用できます。

今後はActionsに移行して、Auth0の機能を拡張することを強くお勧めします。Actionsを使用すると、豊富な情報やインラインドキュメント、パブリック`npm`パッケージにアクセスして、外部統合を使って全体的な拡張エクスペリエンスを強化することができます。Actionsの詳細については、「[Auth0 Actionsの仕組みを理解する](/ja-jp/customize/actions/actions-overview)」をお読みください。

当社では、移行の参考資料として、[RulesからActionsへの移行](/ja-jp/customize/actions/migrate/migrate-from-rules-to-actions)と[HooksからActionsへの移行](/ja-jp/customize/actions/migrate/migrate-from-hooks-to-actions)に関するガイドを提供しています。また、専用の「[Actionsへの移行](https://auth0.com/extensibility/movetoactions)」ページでは、機能の比較や[Actionsのデモ](https://www.youtube.com/watch?v=UesFSY1klrI)、その他のリソースを掲載して、円滑な移行をサポートしています。

RulesとHooksの廃止の詳細については、当社のブログ記事「[RulesとHooksの提供終了について](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/)」をお読みください。

</Warning>

Auth0のログインページでは、ルールからのエラーメッセージを表示することができません。ルールから発生したカスタムメッセージをユーザーに表示させたい場合は、アプリでそのメッセージを表示させる必要があります。

ルールから生じたエラーは、プロトコルの標準応答モードでCallback URLに送信されます。たとえば、アプリケーションがOIDC/OAuth2を使用して認証を要求した場合、`error`および`error_description`の結果の値を含む標準的なOAuth2エラーが返されます。

Callback URLがhttps://travel0.com/callbackで、標準的なクエリ応答モードを使用しているとしましょう。このような応答を受け取ることになります。

``` lines
https://travel0.com/callback?error=access_denied&error_description=[The message you wrote in the rule]
```

ユーザーにメッセージを表示するのはアプリの役割です。たとえば、次のように表示されます。

<Frame>![Sample error message that reads ](/images/ja-jp/cdy7uua7fh8z/7wBM0h29mAwFFbmeOVwVnR/e0ec360ad403d6cdf2f2ac701c621216/rules-login-error-from-rules.png)</Frame>

## ルールエラー後に再ログインを試みる

考えられる次のステップは、新しい認可を要求することです。しかしほとんどの場合、Auth0はすでにユーザーが誰であるかを把握しているため、ログイン情報を求めることはありません。代わりに、ルールが直ちに実行され、再度認可が拒否されます。これは無限ループになる可能性があります。

ユーザーには、新しい資格情報を提供する機会が必要になります。アプリでログインページを再表示させるには、2つの方法があります。

* ログインページの表示を強制するディレクティブを要求に追加します。

  + OIDC/OAuth2要求に`prompt=login`パラメーターを使用します。
  + SAML要求で`ForceAuthn="true"`属性を使用します。

—または—

* 新しい要求を送信する前に、ユーザーをAuth0からログアウトさせます。

## もっと詳しく

* [Auth0ルール](/ja-jp/customize/rules)
* [アプリケーションからユーザーをログアウトする](/ja-jp/authenticate/login/logout/log-users-out-of-applications)
* [ルールのユースケース](/ja-jp/customize/rules/use-cases)