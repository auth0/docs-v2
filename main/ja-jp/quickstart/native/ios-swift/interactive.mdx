---
title: "iOSまたはmacOSアプリケーションにログインを追加する"
permalink: "interactive"
'description': "このガイドは、iOSやmacOSアプリにAuth0.swift SDKを使ってAuth0を統合する方法を説明します。"
'og:title': "iOSまたはmacOSアプリケーションにログインを追加する"
'og:description': "このガイドは、iOSやmacOSアプリにAuth0.swift SDKを使ってAuth0を統合する方法を説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/ios.png"
'twitter:title': "iOSまたはmacOSアプリケーションにログインを追加する"
'twitter:description': "このガイドは、iOSやmacOSアプリにAuth0.swift SDKを使ってAuth0を統合する方法を説明します。"
sidebarTitle: iOS / macOS
---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Auth0 from "/snippets/quickstart/native/ios-swift/Auth0.plist.mdx";
import Mainview from "/snippets/quickstart/native/ios-swift/MainView.swift.mdx";
import Mainview2 from "/snippets/quickstart/native/ios-swift/MainView.swift2.mdx";
import Profileview from "/snippets/quickstart/native/ios-swift/ProfileView.swift.mdx";
import User from "/snippets/quickstart/native/ios-swift/User.swift.mdx";

export const sections = [
  { id: "auth0を構成する", title: "Auth0を構成する" },
  { id: "sdkをインストールする", title: "SDKをインストールする" },
  { id: "sdkを構成する", title: "SDKを構成する" },
  { id: "アプリケーションにログインを追加する", title: "アプリケーションにログインを追加する" },
  { id: "アプリケーションにログアウトを追加する", title: "アプリケーションにログアウトを追加する" },
  { id: "ユーザープロファイル情報にアクセスする", title: "ユーザープロファイル情報にアクセスする" }
]

<Recipe>
  <Content>
    このガイドは、[Auth0.swift](https://github.com/auth0/Auth0.swift) SDKを使って、iOSやmacOSアプリで認証の追加とユーザプロファイル情報へのにアクセスを行う方法について説明します。

    このクイックスタートを使用するには、以下の手順に従います：

    - Auth0の無料アカウントにサインアップするか、Auth0にログインします。
    - 統合したいiOSまたはmacOSのアプリを準備します。または、ログインした後に、サンプルアプリを表示してダウンロードすることもできます。

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Auth0のサービスを利用するには、Auth0 Dashboadに設定済みのアプリケーションが必要です。Auth0アプリケーションは、開発中のアプリに対してどのように認証が動作して欲しいかを構成する場所です。

      ### Auth0アプリケーションを構成する

      対話型のセレクターを使ってAuth0アプリケーションを新規作成するか、既存の**ネイティブ** のAuth0アプリケーションを選択します。Auth0のすべてのアプリケーションには英数字からなる一意のクライアントIDが割り当てられており、アプリがSDKを通じてAuth0 APIを呼び出す際に使用されます。

      このクイックスタートを使って構成されたすべての設定は、[Dashboard](https://manage.auth0.com/#/)のAuth0アプリケーションを自動更新します。今後、アプリケーションの管理もDashboardで行えます。

      完了済みの構成を見てみたい場合は、サンプルアプリをご覧ください。

      ### Callback URLとログアウトURLを構成する

      Auth0はリダイレクトでユーザーをアプリに戻すため、Callback URLとログアウトURLを呼び出します。Auth0は、ユーザーを認証した後にCallback URLを呼び出し、セッションのクッキーを削除した後にログアウトURLを呼び出します。Callback URLとログインURLを設定しないと、ユーザーはアプリにログインやログアウトが行えなくなり、アプリにエラーが発生します。

      <Info>
      iOS 17.4以降とmacOS 14.4以降では、ユニバーサルリンクをCallback URLおよびログアウトURLとして使用できます。有効になっている場合、古いバージョンのiOS/macOSでは、Auth0.swiftはフォールバックとしてカスタムURLスキームを使用します。

      **この機能にはXcode 15.3以降と有料のApple Developerアカウントが必要です。**
      </Info>

      アプリのプラットフォームに応じて、以下の**Callback URL** と**ログアウトURL** を追加してください。カスタムドメインがある場合は、Auth0テナントのドメインに代わってそちらを使用します。

      #### iOS

      ```
      https://{yourDomain}/ios/YOUR_BUNDLE_IDENTIFIER/callback,
      YOUR_BUNDLE_IDENTIFIER://{yourDomain}/ios/YOUR_BUNDLE_IDENTIFIER/callback
      ```

      #### macOS

      ```
      https://{yourDomain}/macos/YOUR_BUNDLE_IDENTIFIER/callback,
      YOUR_BUNDLE_IDENTIFIER://{yourDomain}/macos/YOUR_BUNDLE_IDENTIFIER/callback
      ```

      たとえば、iOSのバンドル識別子が`com.example.MyApp`でAuth0ドメインが`example.us.auth0.com`の場合には、次の値になります：

      ```
      https://example.us.auth0.com/ios/com.example.MyApp/callback,
      com.example.MyApp://example.us.auth0.com/ios/com.example.MyApp/callback
      ```

      ### 関連ドメインを構成する

      <Warning>
      この手順では有料のApple Developerアカウントが必要になります。Callback URLおよびログアウトURLとしてユニバーサルリンクを使用する必要があります。代わりにカスタムURLスキームを使用する場合はこの手順をスキップしてください。
      </Warning>

      #### チームIDとバンドル識別子を構成する

      Auth0アプリケーションの[設定ページ](https://manage.auth0.com/dashboard/us/#/applications/)に移動して最後までスクロールし、 **［Advanced Settings（詳細設定）］>［Device Settings（デバイス設定）］** を開きます。**［iOS］** セクションで**［Team ID（チームID）］** に[Apple Team ID](https://developer.apple.com/help/account/manage-your-team/locate-your-team-id/)を、**［App ID（アプリID）］** にアプリのバンドルIDを設定します。

      <Frame>![Auth0 Dashboard> ［Applications（アプリケーション）］ > ［Applications（アプリケーション）］ > ［Native App（ネイティブアプリ）］ > ［Settings（設定）］タブ > ［Advanced Settings（詳細設定）］ > ［Device Settings（デバイス設定）］タブ](/images/ja-jp/cdy7uua7fh8z/62v9bB3bUVMw9XLND5lcMI/1b20d248b400f75e1bf1174a7d0d0ba0/IOS_Settings_-_Japanese.png)</Frame>

      これで、アプリがAuth0テナントの`apple-app-site-association`ファイルに追加されます。

      #### 関連ドメインの機能を追加する

      Xcodeで、アプリのターゲット設定の**［Signing & Capabilities（署名と機能）］** [タブ](https://developer.apple.com/documentation/xcode/adding-capabilities-to-your-app#Add-a-capability)に移動し、**［+ Capability（＋機能）］** ボタンを押します。それから**［Associated Domains（関連ドメイン）］** を選択します。

      <Frame>![［Xcode］> ［Signing & Capabilities（署名と機能）］タブ > ［Add New（新規追加）］ > ［Associated Domains（関連ドメイン）］](/images/ja-jp/cdy7uua7fh8z/72eVE104zKB5Q4NPnx6MCa/66c81ee64f104583bd00b9916778f989/ios-xcode-capabilities.png)</Frame>

      次に、以下の [エントリー](https://developer.apple.com/documentation/xcode/configuring-an-associated-domain#Define-a-service-and-its-associated-domain)を**［Associated Domains（関連ドメイン）］** の下に追加します：

      ```
      webcredentials:labs-fundtraining.us.auth0.com
      ```

      カスタムドメインがある場合は、Auth0テナントのドメインではなくそちらを使用してください。

      <Info>
      関連ドメインが動作するためには、**iOSシミュレーター用に構築されている場合でも** 、アプリが自分のチーム証明書で署名されている必要があります。Apple Teamには必ず、Auth0アプリケーションの設定ページで構成されたチームIDのものを使用してください。
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      ### Swift Package Managerを使用する

      Xcodeで以下のメニュー項目を開きます：

      **［File（ファイル）］ > ［Add Package Dependencies...（パッケージの依存関係を追加する...）］**

      **［Search or Enter Package URL（パッケージURLを検索または入力）］** 検索ボックスに次のURLを入力します：

      ```
      https://github.com/auth0/Auth0.swift
      ```

      それから依存ルールを選択して**［Add Package（パッケージを追加）］** を押します。

      <Info>
      SPMの詳細については、[公式ドキュメント](https://developer.apple.com/documentation/xcode/adding-package-dependencies-to-your-app)を確認してください。
      </Info>

      ### CocoaPodsを使用する

      以下のラインを`Podfile`に追加します：

      ```
      pod 'Auth0', '~> 2.0'
      ```

      それから`pod install`を実行します。

      <Info>
      CocoaPodsの詳細は、[公式ドキュメント](https://guides.cocoapods.org/using/getting-started.html)を確認してください。
      </Info>

      ### Carthageを使用する

      以下のラインを`Cartfile`に追加します：

      ```
      github "auth0/Auth0.swift" ~> 2.0
      ```

      それから`carthage bootstrap --use-xcframeworks`を実行します。

      <Info>
      Carthageの詳細については、[公式ドキュメント](https://github.com/Carthage/Carthage#getting-started)を確認してください。
      </Info>
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Auth0.swiftのSDKにはAuth0**domain** と**Client ID** が必要です。これらの値はAuth0アプリケーションの[設定ページ](https://manage.auth0.com/dashboard/us/#/applications/)で確認できます

      - **domain** ：Auth0テナントのドメインです。カスタムドメインがある場合は、Auth0テナントのドメインではなくそちらを使用してください。
      - **クライアントID** ：このクイックスタートで前にセットアップした、Auth0アプリケーションの英数字からなる一意のIDです。

      Auth0ドメインとクライアントIDの値を含むアプリバンドルに`Auth0.plist`という名前の`plist`ファイルを作成します。

      <Info>
      SDKはプログラムコードによって構成することも可能です。詳細は[README](https://github.com/auth0/Auth0.swift#configure-client-id-and-domain-programmatically)をご覧ください。
      </Info>

      <Note>
      ##### チェックポイント
      Auth0.swift SDKの構成を完了しました。アプリを実行して、SDKに関連したエラーを出していないことを確認します。
      </Note>
      </Section>

      <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      ログインページを提示したいファイルに`Auth0`モジュールをインポートします。それから**ログイン** ボタンのアクションでユニバーサルログインページを提示します。

      <Info>
      コールバックに基づいたAPIの代わりにasync/awaitまたはCombineを使用できます。詳細は[README](https://github.com/auth0/Auth0.swift#web-auth-login-ios--macos)をご覧ください。
      </Info>

      <Frame>![iOSアプリのユニバーサルログイン画面の例](/images/ja-jp/cdy7uua7fh8z/3ZRDXpjlUXEcQpXq6Q00L1/4b6b596983b5f7d257975a5efcc1cafa/login-ios_japanese.png)</Frame>
      
      <Note>
      ##### チェックポイント
      ログインボタンを押して次の点を確認します：
      アラートボックスが表示され、同意を求める。
      ［Continue（続行）］を選択するとSafariモーダルでユニバーサルログインページが開く。
      ユーザー名とパスワード、またはソーシャルプロバイダーを使って、ログインまたはサインアップできる。
      その後、Safariモーダルが自動的に閉じる。
      </Note>
      </Section>

      <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      アプリにログインできるようになったら、[ログアウト](/ja-jp/authenticate/login/logout)する方法が必要です。**ログアウト** ボタンのアクションで`clearSession()`メソッドを呼び出し、ユニバーサルログインセッションのクッキーを消去します。

      <Note>
      ##### チェックポイント
      ログアウトボタンを押して次の点を確認します：
      アラートボックスが表示され、同意を求める。
      ［Continue（続行）］を選択するとSafariモーダルでページが開く。
      その直後にSafariモーダルが自動的に閉じる。
      </Note>
      </Section>

      <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      ログイン後に得る`Credentials`インスタンスにはIDトークンが含まれます。IDトークンは、ログインしたユーザーに関連するプロファイル情報（メールアドレスやプロフィール写真など）を含みます。これらの詳細情報はアプリのユーザーインターフェイスをパーソナライズするために使用できます。

      Auth0.swiftのSDKには、IDトークンのような[JWT](https://jwt.io/)をデコードするための[ユーティリティ](https://github.com/auth0/JWTDecode.swift)が含まれています。ユーザープロファイル情報にアクセスしたいファイルへ`JWTDecode`モジュールをインポートすることで開始します。それから、`decode(jwt:)`メソッドを使ってIDトークンをデコードし、そこに含まれるクレームにアクセスします。

      <Info>
      最新のユーザー情報は`userInfo(withAccessToken:)`メソッドで取得できます。詳細は[EXAMPLES](https://github.com/auth0/Auth0.swift/blob/master/EXAMPLES.md#retrieve-user-information)をご覧ください。
      </Info>

      <Note>
      ##### チェックポイント
      ログイン後にemail、picture、その他すべてのクレームにアクセスできることを確認します。
      </Note>
      </Section>

    ## 次のステップ

    成功です！ここまで来れば、アプリケーションにログイン、ログアウト、ユーザープロファイル情報が備わっているはずです。

    これでクイックスタートチュートリアルは終了ですが、機能はまだまだたくさんあります。Auth0でできることについて詳しくは、以下をご覧ください。

    *   [Auth0 Dashboard](https://manage.auth0.com/#) - Auth0のテナントやアプリケーションを構成して管理する方法について説明します
    *   [Auth0.swift SDK](https://github.com/auth0/Auth0.swift) - このチュートリアルで使用されているSDKをより詳しく説明します
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Auth0の機能性を拡張できる各種の統合を見つけられます
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm />
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <SignUpForm />
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <CodeGroup>
          <Auth0/>
          <Mainview/>
          <Profileview/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[3].id}>
        <CodeGroup>
          <Mainview/>
          <Auth0/>
          <Profileview/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[4].id}>
        <CodeGroup>
          <Mainview2/>
          <Auth0/>
          <Profileview/>
          <User/>
        </CodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[5].id}>
        <CodeGroup>
          <User/>
          <Auth0/>
          <Mainview/>
          <Profileview/>
        </CodeGroup>
      </SideMenuSectionItem>

    </SideMenu>
</Recipe>
