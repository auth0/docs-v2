---
title: "Vueアプリケーションにログインを追加する"
permalink: "interactive"
'description': "このガイドは、VueアプリケーションにAuth0 Vue SDKを使ってAuth0を統合し、認証の追加とユーザープロファイル情報の表示を行う方法について説明します。"
'og:title': "Vueアプリケーションにログインを追加する"
'og:description': "このガイドは、VueアプリケーションにAuth0 Vue SDKを使ってAuth0を統合し、認証の追加とユーザープロファイル情報の表示を行う方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/vue.png"
'twitter:title': "Vueアプリケーションにログインを追加する"
'twitter:description': "このガイドは、VueアプリケーションにAuth0 Vue SDKを使ってAuth0を統合し、認証の追加とユーザープロファイル情報の表示を行う方法について説明します。"
mode: wide
sidebarTitle: Vue JS
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Index from "/snippets/quickstart/spa/vuejs/index.mdx";
import Login from "/snippets/quickstart/spa/vuejs/login.mdx";
import Logout from "/snippets/quickstart/spa/vuejs/logout.mdx";
import Profile from "/snippets/quickstart/spa/vuejs/profile.mdx";

export const sections = [
  { id: "auth0を構成する", title: "Auth0を構成する" },
  { id: "auth0-vue-sdkをインストールする", title: "Auth0 Vue SDKをインストールする" },
  { id: "アプリケーションにログインを追加する", title: "アプリケーションにログインを追加する" },
  { id: "アプリケーションにログアウトを追加する", title: "アプリケーションにログアウトを追加する" },
  { id: "ユーザープロファイル情報を表示する", title: "ユーザープロファイル情報を表示する" }
]

<Recipe>
  <Content>
    Auth0を使用すると、アプリケーションに認証を追加することができます。このガイドは、VueアプリケーションにAuth0 Vue
        SDKを使ってAuth0を統合し、認証の追加とユーザープロファイル情報の表示を行う方法について説明します。

    <Info>
    このクイックスタートは、Vue 3アプリケーションで[Auth0 Vue](https://github.com/auth0/auth0-vue)を使用するために設計されています。Vue 2を使用している場合は、[Auth0 SPA SDKを使ったVue 2チュートリアル](https://github.com/auth0/auth0-vue/blob/main/tutorial/vue2-login.md)を確認するか、「[例を挙げて説明するVue.js認証2](https://developer.auth0.com/resources/guides/spa/vue/basic-authentication/v2-javascript)」ガイドを参照してください。
    </Info>

    このクイックスタートを使用するには、以下の手順に従います：

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Auth0のサービスを利用するには、Auth0 Dashboadに設定済みのアプリケーションがある必要があります。Auth0アプリケーションは、開発中のプロジェクトに対してどのように認証が動作して欲しいかを構成する場所です。

      ### アプリケーションを構成する

      対話型のセレクターを使ってAuth0アプリケーションを新規作成するか、統合したいプロジェクトを表す既存のアプリケーションを選択します。Auth0のすべてのアプリケーションには英数字からなる一意のクライアントIDが割り当てられており、アプリケーションのコードがSDKを通じてAuth0
            APIを呼び出す際に使用されます。

      このクイックスタートを使って構成されたすべての設定は、[Dashboard](https://manage.auth0.com/dashboard/us/dev-1-2s2aq0/)のアプリケーションを自動更新します。今後、アプリケーションの管理もDashboardで行えます。

      代わりに完了済みの構成を見てみたい場合は、サンプルアプリケーションをご覧ください。

      ### Callback URLを構成する

      Callback URLとは、Auth0がユーザーを認証後にリダイレクトするアプリケーション内URLです。設定されていない場合、ユーザーはログイン後にアプリケーションに戻りません。

      <Info>
      サンプルプロジェクトに沿って進めている場合は、`http://localhost:3000`に設定してください。
      </Info>

      ### ログアウトURLを構成する

      ログアウトURLとは、Auth0がユーザーをログアウト後にリダイレクトするアプリケーション内URLです。設定されていない場合、ユーザーはアプリケーションからログアウトできず、エラーを受け取ります。

      <Info>
      サンプルプロジェクトに沿って進めている場合は、`http://localhost:3000`に設定してください。
      </Info>

      ### Allowed Web Origins（許可されているWebオリジン）を構成する

      ［Allowed Web
            Origin（許可されているWebオリジン）］とは、認証フローにアクセスすることを許可して欲しいURLです。これにはプロジェクトのURLが含まれている必要があります。適切に設定されていない場合、プロジェクトが認証トークンを暗黙でリフレッシュできず、ユーザーがアプリケーションを再び訪問した時、またはページを再読み込みした時にログアウトした状態になってしまいます。

      <Info>
      サンプルプロジェクトに沿って進めている場合は、`http://localhost:3000`に設定してください。
      </Info>
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Vue 3アプリで、Auth0の認証・認可を手軽に実装できるように、Auth0は[Vue SDK](https://github.com/auth0/auth0-vue)を提供しています。

      ターミナルで以下のコマンドを実行してAuth0 Vue SDKをインストールします：

      <AuthCodeBlock icon="file-code" language="bash">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      ### プラグインを登録する

      SDKが機能するには、以下のプロパティを使ってVueアプリケーションでプラグインを登録する必要があります。

      - `domain`：Auth0テナントのドメインです。この値は、Auth0
                Dashboardにあるアプリケーションの［Settings（設定）］の［Domain（ドメイン）］フィールドにあります。[カスタムドメイン](/ja-jp/custom-domains)を使用している場合は、この値をカスタムドメインの値に設定してください。
      - `clientId`：このクイックスタートで前にセットアップした、Auth0アプリケーションのIDです。Auth0
                Dashboardにあるアプリケーションの［Settings（設定）］の［Client ID（クライアントID）］フィールドで確認してください。
      - `authorizationParams.redirect_uri`：ユーザー認証の後、Auth0にユーザーをリダイレクトして欲しいアプリケーション内URLです。このクイックスタートで前にセットアップしたCallback
                URLと呼応します。この値は、Auth0 Dashboardにあるアプリケーションの［Settings（設定）］の［Callback
                URLs（コールバックURL）］フィールドにあります。コードに入力した値と前にセットアップした値は必ず一致させてください。異なった場合はユーザーにエラーが表示されます。

      プラグインは、`provide`と`app.config.globalProperties`の両方を使ってSDKを登録します。これによって、[Composition API](https://vuejs.org/guide/introduction.html#composition-api)と[Options API](https://vuejs.org/guide/introduction.html#options-api)の両方が有効になります。

      <Note>
      ##### チェックポイント

      プラグインが構成されました。アプリケーションを実行して次の点を確認します：

      - SDKが正しく初期化している
      - アプリケーションがAuth0に関連したエラーを投入していない
      </Note>
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      次に、プロジェクト用のログインを設定します。`useAuth0`の返り値に表示されたSDKの`loginWithRedirect`関数を使用します。これには、コンポーネントのsetup関数でアクセスすることができます。ユーザーはAuth0ユニバーサルログインページにリダイレクトされ、ユーザーの認証後、このクイックスタートで前に設定したCallback
            URLにリダイレクトされます。

      ### Options APIの使用

      Options
            APIでは、`this`アクセサを通じてグローバル`$auth0`プロパティからの同じ`loginWithRedirect`メソッドを使用することができます。

      <Note>
      ##### チェックポイント

      Auth0ユニバーサルログインからログインできるようになります。

      ログインボタンをクリックして次の点を確認します：

      - VueアプリケーションによってAuth0ユニバーサルログインページにリダイレクトされる
      - ログインまたはサインアップできる
      - Auth0が、プラグインを構成するために使った`authorizationParams.redirect_uri`の値を使用し、アプリケーションへリダイレクトする。
      </Note>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      プロジェクトにログインしたユーザーには、ログアウトする方法も必要です。ユーザーがログアウトすると、アプリケーションによって[Auth0
              logout](https://auth0.com/docs/api/authentication?javascript#logout)エンドポイントにリダイレクトされてから、指定された`logoutParams.returnTo`パラメーターにリダイレクトされます。

      `useAuth0`の返り値に表示された`logout`関数を使用します。これには、コンポーネントの`setup`関数でアクセスすることができ、ユーザーをアプリケーションからログアウトします。

      ### Options APIの使用

      Options APIでは、`this`アクセサを通じてグローバル`$auth0`プロパティからの同じ`logout`メソッドを使用することができます。

      <Note>
      ##### チェックポイント

      アプリケーションを実行してログアウトボタンをクリックし、次の点を検証します：

      - Vueアプリケーションによって`logoutParams.returnTo`アドレスにリダイレクトされる
      - アプリケーションにログインしていない
      </Note>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      次に、認証ユーザーに関連する[プロファイル情報](/ja-jp/users/concepts/overview-user-profile)を取得する方法を構成します。たとえば、ログインしたユーザーの名前やプロフィール写真をプロジェクトに表示したいかもしれません。ユーザーが認証を行うと、SDKはユーザーのプロファイル情報を抽出し、メモリ内に保存します。アプリケーションは、リアクティブな`user`プロパティを使ってユーザープロファイルにアクセスすることができます。このプロパティにアクセスするには、コンポーネントの`setup`関数を確認し、`userAuth0`返り値を見つけます。

      `user`プロパティには、ユーザーIDに関する機微な情報が含まれています。これは、ユーザーの認証ステータスに基づいてのみ利用できます。エラーを防ぐため、常に以下を行ってください：

      - Vueが`user`プロパティを使用するコンポーネントを呼び出す前に、`isAuthenticated`プロパティを使用してAuth0がユーザーを認証したかどうかを定義する。
      - `isAuthenticated`プロパティにアクセスする前に、`isLoading`がfalseであることをチェックして、SDKの読み込みが完了したことを確認する。

      ### Options APIの使用

      Options
            APIでは、アクセサ`this`を通じてグローバル`$auth0`プロパティからの同じリアクティブな`user`、`isLoading`、および`isAuthenticated`プロパティを使用します。

      <Note>
      ##### チェックポイント

      以下の点を確認します：

      - ログイン後、コンポーネント内の`user`やその他のユーザープロパティをすべて正しく表示できる
      </Note>
    </Section>

    ## 次のステップ

    成功です！ここまで来れば、アプリケーションにログイン、ログアウト、ユーザープロファイル情報が備わっているはずです。

    これでクイックスタートチュートリアルは終了ですが、機能はまだまだたくさんあります。Auth0でできることについて詳しくは、以下をご覧ください。

    *   [Auth0 Dashboard](https://manage.auth0.com/#) - Auth0のテナントやアプリケーションを構成して管理する方法について説明します
    *   [auth0-vue SDK](https://www.github.com/auth0/auth0-vue) - このチュートリアルで使用されているSDKをより詳しく説明します
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Auth0の機能性を拡張できる各種の統合を見つけられます
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <CodeGroup>
        <Index/>
        <Login/>
        <Logout/>
        <Profile/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <CodeGroup>
        <Login/>
        <Index/>
        <Logout/>
        <Profile/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
      <CodeGroup>
        <Logout/>
        <Index/>
        <Login/>
        <Profile/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <CodeGroup>
        <Profile/>
        <Index/>
        <Login/>
        <Logout/>
      </CodeGroup>
    </SideMenuSectionItem>

  </SideMenu>
</Recipe>
