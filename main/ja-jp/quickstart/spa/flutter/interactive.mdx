---
title: "Flutterアプリケーションにログインを追加する"
permalink: "interactive"
'description': "このガイドでは、FlutterアプリケーションにAuth0 Flutter SDKを使ってAuth0を統合する方法を説明します。"
'og:title': "Flutterアプリケーションにログインを追加する"
'og:description': "このガイドでは、FlutterアプリケーションにAuth0 Flutter SDKを使ってAuth0を統合する方法を説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Flutterアプリケーションにログインを追加する"
'twitter:description': "このガイドでは、FlutterアプリケーションにAuth0 Flutter SDKを使ってAuth0を統合する方法を説明します。"
sidebarTitle: Flutter
mode: wide
---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import MainView from "/snippets/quickstart/spa/flutter/main_view.mdx"
import ProfileView from "/snippets/quickstart/spa/flutter/profile_view.mdx"

export const sections = [
  { id: "auth0を構成する", title: "Auth0を構成する" },
  { id: "auth0-flutter-sdkをインストールする", title: "Auth0 Flutter SDKをインストールする" },
  { id: "アプリケーションにログインを追加する", title: "アプリケーションにログインを追加する" },
  { id: "アプリケーションにログアウトを追加する", title: "アプリケーションにログアウトを追加する" },
  { id: "ユーザープロファイル情報を表示する", title: "ユーザープロファイル情報を表示する" }
]

<Recipe>
  <Content>
    Auth0を使用すると、アプリケーションに手軽に認証を追加して、ユーザープロファイル情報にアクセスすることができます。このガイドでは、Flutterアプリケーションに[Auth0 Flutter
          SDK](https://github.com/auth0/auth0-flutter)を使ってAuth0を統合する方法を説明します。

    <Info>
    Flutter SDKは現在、Android、iOS、またはWebプラットフォームで実行されるFlutterアプリケーションのみに対応しています。
    </Info>

    このクイックスタートでは、すでに[Flutter](https://flutter.dev/)アプリケーションが問題なく作動しているものとします。そうでない場合は、[Flutter「入門」ガイド](https://docs.flutter.dev/get-started/install)をチェックして、シンプルなアプリの始め方を確認してください。

    [Flutterコマンドラインツール](https://docs.flutter.dev/reference/flutter-cli)の知識も必要になります。

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Auth0にサインアップすると、新しいアプリケーションが作成されたか、あるいは既に作成していた可能性があります。Auth0と通信するためのアプリケーションに関する詳細が必要になります。これらの詳細は、Auth0
            Dashboardの[アプリケーションの設定](https://manage.auth0.com/#/applications)セクションで入手することができます。

      <Frame>
        <img src="/images/ja-jp/cdy7uua7fh8z/6SC7KnyzCyO8cwXQfril1X/c0d6756c28de0ddcbe938307e529d47a/client_settings.png" />
      </Frame>

      <Info>
      ネイティブまたはシングルページアプリケーションでデフォルトのアプリを使用する場合は、**［Token Endpoint Authentication
                        Method（トークンエンドポイント認証方法）］**を`None`に更新し、** ［Application
                        Type（アプリケーションタイプ）］**を`SPA`または`Native`に設定していることを確認します。
      </Info>

      必要な情報は以下のとおりです。

      - **Domain（ドメイン）**
      - **Client ID（クライアントID）**

      <Info>
      このページの上部からサンプルをダウンロードする場合、これらの詳細は入力されています。
      </Info>

      ### Callback URLを構成する

      Callback URLとは、Auth0によって認証後のユーザーをリダイレクトするアプリケーション内URLです。アプリのCallback URLは、[アプリケーションの設定](https://manage.auth0.com/#/applications)で**［Allowed Callback
              URLs（許可されているコールバックURL）］**フィールドに追加される必要があります。このフィールドが設定されていない場合、ユーザーはアプリケーションにログインできず、エラーが返されます。

      <Info>
      このページの上部からダウンロードしたサンプルプロジェクトに沿って進めている場合には、**［Allowed Callback
                        URLs（許可されているコールバックURL）］**に`http://localhost:3000`を設定します。
      </Info>

      ### ログアウトURLを構成する

      ログアウトURLとは、ユーザーが認可サーバーからログアウトした後にAuth0が戻ることができるアプリケーション内URLです。これは、`returnTo`クエリパラメーターで指定されています。アプリのログアウトURLは、[アプリケーションの設定](https://manage.auth0.com/#/applications)で**［Allowed Logout
              URLs（許可されているログアウトURL）］**フィールドに追加される必要があります。このフィールドが設定されていない場合、ユーザーはアプリケーションからログアウトできず、エラーが返されます。

      <Info>
      このページの上部からダウンロードしたサンプルプロジェクトに沿って進めている場合には、**［Allowed Logout
                        URLs（許可されているログアウトURL）］**フィールドに追加する必要があるログアウトURLは`http://localhost:3000`です。
      </Info>

      ### 許可されているWebオリジンを構成する

      アプリのURLを[アプリケーションの設定](https://manage.auth0.com/#/applications/%7ByourClientId%7D/settings)で**［Allowed Web
              Origins（許可されているWebオリジン）］**フィールドに追加する必要があります。ここでアプリケーションURLを登録しないと、アプリケーションは認証トークンを暗黙でリフレッシュできず、ユーザーがアプリケーションを再び訪問した時、またはページを再読み込みした時にログアウトした状態になってしまいます。

      <Info>
      このページの上部からダウンロードしたサンプルプロジェクトに沿って進めている場合には、**［Allowed Web
                        Origins（許可されているWebオリジン）］**を`http://localhost:3000`に設定します。
      </Info>
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Auth0 Flutter SDKをプロジェクトに追加します：

      ```bash
      flutter pub add auth0_flutter
      ```

      以下のスクリプトタグを`index.html`ページに追加します：

      ```html
      <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js" defer></script>
      ```
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      アプリに認証をセットアップするには、[ユニバーサルログイン](/ja-jp/authenticate/login/auth0-universal-login)が最も手軽な方法です。最良のエクスペリエンス、高い安全性、幅広い機能を活用するためにも、ユニバーサルログインの使用をお勧めします。

      `Auth0Web`クラスを使用して、Auth0のユニバーサルログインをFlutter
            Webアプリに統合します。`loginWithRedirect()`を使用して、ユーザーをAuth0のユニバーサルログインページにリダイレクトします。

      <Info>
      通常、`redirectUrl`パラメーターを`loginWithRedirect`に指定する必要があります。この操作を省くと、Auth0はデフォルトで構成されていない、[デフォルトのログインルート](/ja-jp/authenticate/login/auth0-universal-login/configure-default-login-routes)を使用することになります。
      </Info>

      ユーザーはログインすると、リダイレクトでアプリケーションに戻されます。次に、起動中に`onLoad`を呼び出し、付与された資格情報を処理することで、このユーザーのIDとアクセストークンにアクセスすることができます。

      ```js
      auth0.onLoad().then((final credentials) => setState(() {
      // Handle or store credentials here

      _credentials = credentials;

      }));
      ```

      <Note>
      ##### チェックポイント

      `loginWithRedirect()`を呼び出してアプリにユーザーをログインするボタンをアプリに追加します。認証のためにAuth0へリダイレクトされてから、アプリケーションに戻されることを確認します。

      `onLoad`を呼び出した結果、`credentials`にアクセスできることと、IDとアクセストークンにアクセスできることを確認します。
      </Note>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      ユーザーをログアウトさせるには、Auth0 Flutter SDKの`logout()`を呼び出してログインセッションをクリアし、ユーザーをAuth0のログアウトエンドポイントにリダイレクトします。[Auth0からのログアウトについて詳しい情報をお読みください](/ja-jp/authenticate/login/logout)。

      <Info>
      通常、`logout`を呼び出すときに`returnToUrl`を指定しますが、そうしない場合、Auth0は [［Allowed Logout URLs（許可されているログアウトURL）］リストの最初のURLにデフォルトで指定されます](/ja-jp/authenticate/login/logout/redirect-users-after-logout)。
      </Info>

      <Note>
      ##### チェックポイント

      `logout()`を呼び出し、ユーザーをアプリケーションからログアウトするアプリにボタンを追加します。このボタンを選択すると、Flutterアプリがログアウトエンドポイントにリダイレクトしてからもう一度戻ることを確認します。アプリケーションにはログインされていないはずです。
      </Note>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      ユーザープロファイルは、ページが読み込まれるとユーザープロファイルプロパティを自動的に取得し、アプリケーション起動中に`onLoad`を呼び出すことでアクセス・保存することができます。`onLoad`から返されたオブジェクトには、すべてのユーザープロファイルプロパティのある`user`プロパティが含まれています。これらはIDトークンをデコードすることで内部で入力されます。

      <Note>
      ##### チェックポイント

      ログインして、結果の`user`プロパティを調査します。`email`や`name`など、現在のユーザーのプロファイル情報を確認します。
      </Note>
    </Section>

    ## 次のステップ

    成功です！ここまで来れば、アプリケーションにログイン、ログアウト、ユーザープロファイル情報が備わっているはずです。

    これでクイックスタートチュートリアルは終了ですが、機能はまだまだたくさんあります。Auth0でできることについて詳しくは、以下をご覧ください。

    *   [Auth0 Dashboard](https://manage.auth0.com/#) - Auth0のテナントやアプリケーションを構成して管理する方法について説明します
    *   [auth0-flutter SDK](https://www.github.com/auth0/auth0-flutter/) - このチュートリアルで使用されているSDKをより詳しく説明します
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Auth0の機能性を拡張できる各種の統合を見つけられます
    *   [Configure other identity providers](/ja-jp/identityproviders)
    *   [Enable multifactor authentication](/ja-jp/multifactor-authentication)
    *   [Learn about attack protection](/ja-jp/attack-protection)
    *   [Learn about Actions](/ja-jp/customize/actions)
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <CodeGroup>
        <MainView/>
        <ProfileView/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <CodeGroup>
        <MainView/>
        <ProfileView/>
      </CodeGroup>
    </SideMenuSectionItem>

  </SideMenu>
</Recipe>
