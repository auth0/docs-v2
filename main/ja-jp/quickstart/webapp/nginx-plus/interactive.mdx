---
title: "NGINX Plus"
permalink: "interactive"
'description': "このチュートリアルでは、nginx-openid-connectモジュールを使用して、NGINXサーバーに認証と認可を追加する方法について説明します。"
'og:title': "NGINX Plus"
'og:description': "このチュートリアルでは、nginx-openid-connectモジュールを使用して、NGINXサーバーに認証と認可を追加する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/nginx-plus.png"
'twitter:title': "NGINX Plus"
'twitter:description': "このチュートリアルでは、nginx-openid-connectモジュールを使用して、NGINXサーバーに認証と認可を追加する方法について説明します。"
mode: wide
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Nginx from "/snippets/quickstart/webapp/nginx-plus/nginx.conf.mdx";
import OpenidConnectionConfiguration from "/snippets/quickstart/webapp/nginx-plus/openid_connection_configuration.conf.mdx";
import OpenidConnect from "/snippets/quickstart/webapp/nginx-plus/openid_connect.server_conf.mdx";
import Frontend from "/snippets/quickstart/webapp/nginx-plus/frontend.conf.mdx";

export const sections = [
  { id: "システム要件", title: "システム要件" },
  { id: "nginx-plus-module-njsモジュールをインストールして有効にする", title: "nginx-plus-module-njsモジュールをインストールして有効にする" },
  { id: "nginx-openid-connectテンプレートリポジトリを確認する", title: "nginx-openid-connectテンプレートリポジトリを確認する" },
  { id: "auth0アプリケーションの詳細でnginxを構成する", title: "Auth0アプリケーションの詳細でNGINXを構成する" },
  { id: "トークンとjwksエンドポイントにaccept-encodingヘッダーを構成する", title: "トークンとJWKSエンドポイントにAccept-Encodingヘッダーを構成する" },
  { id: "openid-connect構成ファイルをコピーする", title: "OpenID Connect構成ファイルをコピーする" },
  { id: "auth0のアプリケーション設定を構成する", title: "Auth0のアプリケーション設定を構成する" },
  { id: "アップストリームアプリケーションにヘッダーを渡す", title: "アップストリームアプリケーションにヘッダーを渡す" }
]

<Recipe>
  <Content>
    このチュートリアルでは、nginx-openid-connectモジュールを使用して、NGINXサーバーに認証と認可を追加する方法について説明します。
        ログインして、アカウント用に構成された例を参考にこのクイックタートに従うことをお勧めします。

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      このチュートリアルとシードプロジェクトは次を使用してテストが完了しています：

      - NGINX Plus R24
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      まず、NGINX Plusに`nginx-plus-module-njs`モジュールをインストールする必要があります。

      動的モジュールのインストールガイドに従って、ホストOSにパッケージをインストールします。

      `yum`パッケージ管理ツールを使用しているLinuxディストリビューションでは、soのようなモジュールをインストールすることができます：

      <AuthCodeBlock icon="file-code" language="sh" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      インストールしたら、それをNGINXに有効化する必要があります。次の行を`/etc/nginx/nginx.conf`ファイルの最上部近くに追加してください：

      <AuthCodeBlock icon="file-code" language="sh" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      `nginx-openid-connect`リポジトリをクローンします。このリポジトリにはテンプレート構成があります。

      <AuthCodeBlock icon="file-code" language="sh" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      nginx-openid-connectフォルダーにあるconfigure.shスクリプトを実行して、テンプレートの構成にAuth0アプリケーションの詳細を入力します。

      <AuthCodeBlock icon="file-code" language="sh" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      

      次に、[テナントのログアウトURL](https://auth0.com/docs/api/authentication#auth0-logout)を`openid_connect_configuration.conf`ファイルに追加します。
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      `openid_connect.server_conf`ファイルに`Accept-Encoding`ヘッダーを追加して、 `gzip`に値を設定します。
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      4つの構成ファイルを`conf.d`フォルダーにコピーします。

      <AuthCodeBlock icon="file-code" language="sh" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7">
      Auth0 Dashboardで以下を行います。

      1. **［Applications（アプリケーション）］** > **［Applications（アプリケーション）］** に移動し、リストからアプリケーションを選択します。
      2. **［Settings（設定）］** ビューに切り替えます。
      3. **［Application URI（アプリケーションURI）］** セクションの**［Allowed Callback
                  URLs（許可されているコールバックURL）］**にhttps://{yourDomain}/_codexchを追加します。
      4. **［Credentials（資格情報）］** ビューに切り替えます。

      **［Application Authentication（アプリケーション認証）］** セクションで、**認証方法** を［None（なし）］に設定します。
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8">
      IDトークン（JWT）からの追加のヘッダーを`/etc/nginx/conf.d/frontend.conf`ファイルでアップストリームの対象に追加します。
    </Section>

    ## 次のステップ

    成功です！ここまで来れば、アプリケーションにログイン、ログアウト、ユーザープロファイル情報が備わっているはずです。

    これでクイックスタートチュートリアルは終了ですが、機能はまだまだたくさんあります。Auth0でできることについて詳しくは、以下をご覧ください。

    *   [Auth0 Dashboard](https://manage.auth0.com/#) - Auth0のテナントやアプリケーションを構成して管理する方法について説明します
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Auth0の機能性を拡張できる各種の統合を見つけられます
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <CodeGroup>
        <Nginx/>
        <OpenidConnectionConfiguration/>
        <OpenidConnect/>
        <Frontend/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
      <CodeGroup>
        <OpenidConnectionConfiguration/>
        <Nginx/>
        <OpenidConnect/>
        <Frontend/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <CodeGroup>
        <OpenidConnect/>
        <Nginx/>
        <OpenidConnectionConfiguration/>
        <Frontend/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[5].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[6].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[7].id}>
      <CodeGroup>
        <Frontend/>
        <Nginx/>
        <OpenidConnectionConfiguration/>
        <OpenidConnect/>
      </CodeGroup>
    </SideMenuSectionItem>

  </SideMenu>
</Recipe>
