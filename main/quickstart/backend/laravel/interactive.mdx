---

mode: wide
description: This guide demonstrates how to integrate Auth0 with a new (or existing)
  Laravel 9 or 10 application.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Auth0 Laravel API SDK Quickstarts: Add Authorization to Your Laravel
  Application'
'og:url': https://auth0.com/docs/
sidebarTitle: Laravel API
title: Add Authorization to Your Laravel Application
'twitter:description': This guide demonstrates how to integrate Auth0 with a new (or
  existing) Laravel 9 or 10 application.
'twitter:title': 'Auth0 Laravel API SDK Quickstarts: Add Authorization to Your Laravel
  Application'
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";
import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Api from "/snippets/quickstart/backend/laravel/api.php.mdx";
import Api2 from "/snippets/quickstart/backend/laravel/api.php2.mdx";
import Api3 from "/snippets/quickstart/backend/laravel/api.php3.mdx";

import {QuickstartButtons} from "/snippets/QuickstartButtons.jsx";

<QuickstartButtons githubLink="https://github.com/auth0-samples/laravel/tree/7.x/sample" downloadLink="https://auth0.auth0.com/u/login/"/>

export const sections = [
  { id: "laravel-installation", title: "Laravel Installation" },
  { id: "sdk-installation", title: "SDK Installation" },
  { id: "sdk-configuration", title: "SDK Configuration" },
  { id: "access-control", title: "Access Control" },
  { id: "token-information", title: "Token Information" },
  { id: "retrieve-user-information", title: "Retrieve User Information" },
  { id: "run-the-application", title: "Run the Application" },
  { id: "retrieve-a-test-token", title: "Retrieve a Test Token" }
]

<Recipe>
  <Content>
    [Auth0's Laravel SDK](https://github.com/auth0/laravel-auth0)
        allows you to quickly add token-based authorization and route access control to your Laravel application. This guide
        demonstrates how to integrate Auth0 with a new (or existing) [Laravel 9
          or 10](https://github.com/auth0/laravel-auth0#support-policy) application.

    **Backend applications differ from traditional web applications in that they do not handle user authentication or
          have a user interface. They provide an API that other applications can interact with. They accept **[access tokens](https://auth0.com/docs/secure/tokens/access-tokens)** from
        ****`Authorization`**** headers in requests to control access to routes.**

    Separate front-end applications are usually built to interact with these types of backends. These can be anything
        from [single-page applications](https://auth0.com/docs/quickstart/spa) or [native or mobile apps](https://auth0.com/docs/quickstart/native) (all of which Auth0 also
        provides SDKs for!)

    When users need to interact with your backend application, they first authenticate with Auth0 using the frontend
        application. The frontend application then retrieves an access token from Auth0, which it can use to make requests
        to your backend application on behalf of the user.

    As their name implies, [access
          tokens](https://auth0.com/docs/secure/tokens/access-tokens) are designed to address matters of access control (authorization), and do not contain information about
        the user. **Backend applications work exclusively with access tokens.** You can retrieve information about the
        user who created the token using the [Management
          API](https://auth0.com/docs/api/management/v2), which we will demonstrate later.

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      **If you do not already have a Laravel application set up**, open a shell to a suitable directory for a new
            project and run the following command:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      All the commands in this guide assume you are running them from the root of your Laravel project, directory so
            you should `cd` into the new project directory:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Run the following command within your project directory to install the [Auth0 Laravel SDK](https://github.com/auth0/laravel-auth0):

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      Then generate an SDK configuration file for your application:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Run the following command from your project directory to download the [Auth0 CLI](https://github.com/auth0/auth0-cli):

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      Then authenticate the CLI with your Auth0 account, choosing "as a user" when prompted:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      Next, create a new application with Auth0:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      You should also create a new API:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      This produces two files in your project directory that configure the SDK.

      As these files contain credentials it's important to treat these as sensitive. You should ensure you do not
            commit these to version control. If you're using Git, you should add them to your `.gitignore` file:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      The SDK automatically registers its authorization guard with your Laravel application for use with the
            `api` middleware, which by default Laravel applies to all routes in your application's
            `routes/api.php` file.

      <Warning>
      For the SDK to work as expected without additional configuration, **you should define your routes in
                        the ****`routes/api.php`**** file.**
      </Warning>

      You can use the Auth0 SDK's authorization guard to restrict access to your application's routes.

      To reject requests that do not contain a valid access token in the `Authorization` header, you can use
            Laravel's `auth` middleware:

      <AuthCodeBlock icon="file-code" language="php" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      You can also require the provided token to have specific [permissions](https://auth0.com/docs/manage-users/access-control/rbac) by combining this
            with Laravel's `can` middleware:

      <AuthCodeBlock icon="file-code" language="php" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      Information about the provided access token is available through Laravel's `Auth` Facade, or the
            `auth()` helper function.

      For example, to retrieve the user's identifier and email address:

      <AuthCodeBlock icon="file-code" language="php" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      You can retrieve information about the user who created the access token from Auth0 using the [Auth0 Management API](https://github.com/auth0/laravel-auth0/blob/main/docs/Management.md). The SDK provides a convenient wrapper for this API,
            accessible through the SDK's `management()` method.

      **Before making Management API calls you must enable your application to communicate with the Management
              API.** This can be done from the [Auth0 Dashboard's API page](https://manage.auth0.com/#/apis/), choosing `Auth0 Management API`, and
            selecting the 'Machine to Machine Applications' tab. Authorize your Laravel application, and then click the down
            arrow to choose the scopes you wish to grant.

      For the following example, you should grant the `read:users` scope. A list of API endpoints and the
            required scopes can be found in [the Management
              API documentation](https://auth0.com/docs/api/management/v2).

      <AuthCodeBlock icon="file-code" language="php" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>


      <Info>
      **You should cache user information in your application for brief periods.** This reduces the number
                      of requests your application makes to Auth0, and improves performance. You should avoid storing user
                      information in your application for long periods as this can lead to stale data. You should also avoid
                      storing user information beyond the user's identifier in persistent databases.
      </Info>
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7">
      You are now ready to start your Laravel application, so it can accept requests:

      <AuthCodeBlock icon="file-code" language="bash" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8">
      You can learn more about [retrieving access tokens here](https://auth0.com/docs/secure/tokens/access-tokens/get-access-tokens). For this quickstart, however, you can simply use an access
            token from [your API settings'
              "test" view](https://manage.auth0.com/#/apis).

      <Info>
      The `/me` route we created above will not work with a test token as there is no actual user
                      associated with it.
      </Info>

      <Note>
      ##### Checkpoint

      Open a shell and try issuing requests to your application.

      Begin by requesting the public route:

      `curl --request GET \ --url http://localhost:8000/api \ --header 'Accept: application/json'`

      Next, use your access token in an `Authorization` header to request a protected route:

      `curl --request GET \ --url http://localhost:8000/api/private \ --header 'Accept: application/json' \ --header 'Authorization: Bearer YOUR_ACCESS_TOKEN'`

      Finally, try requesting the scope-protected route, which will only succeed if the access token has the
                    `read:messages` scope granted:

      `curl --request GET \ --url http://localhost:8000/api/scope \ --header 'Accept: application/json' \ --header 'Authorization: Bearer YOUR_ACCESS_TOKEN'`
      </Note>

      ### Additional Reading

      - [User Repositories and Models](https://github.com/auth0/laravel-auth0/blob/main/docs/Users.md) extends the Auth0 Laravel SDK to use custom user
                models, and how to store and retrieve users from a database.
      - [Hooking Events](https://github.com/auth0/laravel-auth0/blob/main/docs/Events.md) covers how to listen for events raised by the Auth0 Laravel
                SDK, to fully customize the behavior of your integration.
      - [Management API](https://github.com/auth0/laravel-auth0/blob/main/docs/Management.md) support is built into the Auth0 Laravel SDK, allowing you to
                interact with the Management API from your Laravel application.
    </Section>

    ## Next Steps

    Excellent work! If you made it this far, you should now have login, logout, and user profile information running in your application.

    This concludes our quickstart tutorial, but there is so much more to explore. To learn more about what you can do with Auth0, check out:

    *   [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Learn how to configure and manage your Auth0 tenant and applications
    *   [laravel-auth0 SDK](https://github.com/auth0/laravel-auth0) - Explore the SDK used in this tutorial more fully
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Discover integrations you can enable to extend Auth0’s functionality
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
      <Api />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <Api2 />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[5].id}>
      <Api3 />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[6].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[7].id}>
      <SignUpForm />
    </SideMenuSectionItem>

  </SideMenu>
</Recipe>
