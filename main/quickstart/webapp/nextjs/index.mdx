---

mode: wide
'og:description': This guide demonstrates how to integrate Auth0 with any new or existing
  Next.js application using the Auth0 Next.js v4 SDK (Beta).
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Auth0 Next.js SDK Quickstarts: Add Login to Your Next.js Application'
'og:url': https://auth0.com/docs/
sidebarTitle: Next.js
title: Add Login to Your Next.js Application
'twitter:description': This guide demonstrates how to integrate Auth0 with any new
  or existing Next.js application using the Auth0 Next.js v4 SDK (Beta).
'twitter:title': 'Auth0 Next.js SDK Quickstarts: Add Login to Your Next.js Application'
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

<Accordion title="AI Prompt" defaultOpen icon="microchip-ai" iconType="sharp-solid">
  **Using AI to integrate Auth0?** Add this prompt to Cursor, Windsurf, Copilot, Claude Code or your favourite AI-powered IDE to speed up development.

  <AuthCodeBlock filename="expandable" icon="file-code" language="markdown">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>

## Get Started

This quickstart demonstrates how to add Auth0 authentication to a Next.js application. You'll build a full-stack web application with server-side rendering, secure login functionality, and protected routes using the Auth0 Next.js SDK.

<Steps>
  <Step title="Create a new project" stepNumber={1}>
    Create a new Next.js project for this Quickstart

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    Open the project

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Install the Auth0 Next.js SDK" stepNumber={2}>
    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Setup your Auth0 App" stepNumber={3}>
    Next up, you need to create a new app on your Auth0 tenant and add the environment variables to your project.

    You can choose to do this automatically by running a CLI command or do it manually via the Dashboard:

    <Tabs>
      <Tab title="CLI">
        Run the following shell command on your project's root directory to create an Auth0 app and generate a `.env.local` file:

        <CodeGroup>
          <AuthCodeBlock filename="Mac" icon="file-code" language="shellscript">
          AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
          APP_BASE_URL='http://localhost:3000'
          AUTH0_DOMAIN='https://{USER_DOMAIN}'
          AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
          AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
          </AuthCodeBlock>

          <AuthCodeBlock filename="Windows" icon="file-code" language="shellscript">
          AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
          APP_BASE_URL='http://localhost:3000'
          AUTH0_DOMAIN='https://{USER_DOMAIN}'
          AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
          AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
          </AuthCodeBlock>
        </CodeGroup>
      </Tab>

      <Tab title="Dashboard">
        Before you start, create a `.env.local` file on your project's root directory

        <AuthCodeBlock filename=".env.local" icon="file-code" language="shellscript">
        AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
        APP_BASE_URL='http://localhost:3000'
        AUTH0_DOMAIN='https://{USER_DOMAIN}'
        AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
        AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
        </AuthCodeBlock>

        1. Head to the [Auth0 Dashboard](https://manage.auth0.com/dashboard/)
        2. Click on **Applications** > **Applications** > **Create Application**
        3. In the popup, enter a name for your app, select `Regular Web Application` as the app type and click **Create**
        4. Switch to the **Settings** tab on the Application Details page
        5. Replace `YOUR_AUTH0_APP_DOMAIN`, `YOUR_AUTH0_APP_CLIENT_ID`, and `YOUR_AUTH0_APP_CLIENT_SECRET` in the `.env.local` file with the **Domain**, **Client ID**, and **Client Secret** values from the dashboard
        6. Generate `YOUR_LONG_RANDOM_SECRET_HERE` using: `openssl rand -hex 32` (Mac/Linux) or use an online generator

        Finally, on the **Settings** tab of your Application Details page, set **Allowed Callback URLs**, **Allowed Logout URLs** and **Allowed Web Origins** to:

        <AuthCodeBlock icon="file-code">
        AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
        APP_BASE_URL='http://localhost:3000'
        AUTH0_DOMAIN='https://{USER_DOMAIN}'
        AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
        AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
        </AuthCodeBlock>

        <Info>
          **Allowed Callback URLs** are a critical security measure to ensure users are safely returned to your application after authentication. Without a matching URL, the login process will fail, and users will be blocked by an Auth0 error page instead of accessing your app.

          **Allowed Logout URLs** are essential for providing a seamless user experience upon signing out. Without a matching URL, users will not be redirected back to your application after logout and will instead be left on a generic Auth0 page.

          **Allowed Web Origins** is critical for silent authentication. Without it, users will be logged out when they refresh the page or return to your app later.
        </Info>
      </Tab>
    </Tabs>
  </Step>
  <Step title="Create the Auth0 configuration" stepNumber={4}>
    Create `lib/auth0.ts`:

    <AuthCodeBlock filename="lib/auth0.ts" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Add middleware" stepNumber={5}>
    Create `middleware.ts` in your project root:

    <AuthCodeBlock filename="middleware.ts" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    <Note>
      If you're using a `src/` directory, the `middleware.ts` file must be created inside the `src/` directory.
    </Note>
    <Info>
      This middleware automatically mounts the following authentication routes:

      - `/auth/login` - Login route
      - `/auth/logout` - Logout route
      - `/auth/callback` - Callback route
      - `/auth/profile` - User profile route
      - `/auth/access-token` - Access token route
      - `/auth/backchannel-logout` - Backchannel logout route
    </Info>
  </Step>
  <Step title="Create Login, Logout and Profile Components" stepNumber={6}>
    Create the components directory and files:

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    Add the component code:

    <CodeGroup>

    <AuthCodeBlock filename="components/LoginButton.tsx" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    
    <AuthCodeBlock filename="components/LogoutButton.tsx" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    
    <AuthCodeBlock filename="components/Profile.tsx" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    </CodeGroup>
  </Step>
  <Step title="Update your main page" stepNumber={7}>
    Replace `src/app/page.tsx` with:

    <AuthCodeBlock filename="src/app/page.tsx" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Update layout with Auth0Provider (OPTIONAL)" stepNumber={8}>
    Update `src/app/layout.tsx` to wrap your app with the `Auth0Provider`:

    <AuthCodeBlock filename="src/app/layout.tsx" icon="file-code" language="typescript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    <Note>
      In v4, the Auth0Provider is **optional**. You only need it if you want to pass an initial user during server rendering to be available to the `useUser()` hook.
    </Note>
  </Step>
  <Step title="Add styling" stepNumber={9}>
    Replace `src/app/globals.css` with modern Auth0-branded styling:

    <AuthCodeBlock filename="src/app/globals.css" icon="file-code" language="css" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Run your app" stepNumber={10}>
    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    <Info>
      Your app will be available at http://localhost:3000. The Auth0 SDK v4 automatically mounts authentication routes at `/auth/*` (not `/api/auth/*` like in v3).
    </Info>
  </Step>
</Steps>

<Check>
  **Checkpoint**

  You should now have a fully functional Auth0 login page running on your [localhost](http://localhost:3000/)
</Check>

---

## Advanced Usage

<Accordion title="Important v4 Changes">
  This quickstart uses **Auth0 Next.js SDK v4**, which has significant changes from v3:

  - **No dynamic route handlers needed** - Authentication routes are auto-mounted by middleware
  - **Simplified client setup** - `new Auth0Client()` reads environment variables automatically
  - **New route paths** - Routes are at `/auth/*` instead of `/api/auth/*`
  - **Required middleware** - All authentication functionality goes through middleware
  - **Use `<a>` tags** - Navigation must use `<a href="/auth/login">` instead of buttons with onClick

  ### Authentication Routes

  The SDK automatically mounts these routes via middleware:

  | Route                      | Purpose                   |
  | -------------------------- | ------------------------- |
  | `/auth/login`              | Initiate login            |
  | `/auth/logout`             | Logout user               |
  | `/auth/callback`           | Handle Auth0 callback     |
  | `/auth/profile`            | Get user profile          |
  | `/auth/access-token`       | Get access token          |
  | `/auth/backchannel-logout` | Handle backchannel logout |
</Accordion>

<Accordion title="Server-Side Authentication">
  The Auth0 Next.js SDK v4 supports both App Router and Pages Router patterns. Here are some common server-side patterns:

  <Tabs>
    <Tab title="App Router - Server Component">
      <AuthCodeBlock filename="app/protected/page.tsx" icon="file-code" language="typescript">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
    </Tab>
    <Tab title="App Router - API Route">
      <AuthCodeBlock filename="app/api/protected/route.ts" icon="file-code" language="typescript">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
    </Tab>
    <Tab title="Pages Router - Page">
      <AuthCodeBlock filename="pages/protected.tsx" icon="file-code" language="typescript">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>
    </Tab>
  </Tabs>
</Accordion>

<Accordion title="Client-Side Authentication">
  For client-side authentication state, use the `useUser` hook:

  <AuthCodeBlock filename="components/UserProfile.tsx" icon="file-code" language="typescript">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>

<Accordion title="Protecting API Routes">
  For API route protection, use the `withApiAuthRequired` method:

  <AuthCodeBlock filename="app/api/protected/route.ts" icon="file-code" language="typescript">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>
