---
title: Add Login to Your Java Servlet Application

sidebarTitle: Java
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";
import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";

import Web from "/snippets/quickstart/webapp/java/web.xml.mdx";
import Authenticationcontrollerprovider from "/snippets/quickstart/webapp/java/AuthenticationControllerProvider.java.mdx";
import Loginservlet from "/snippets/quickstart/webapp/java/LoginServlet.java.mdx";
import Callbackservlet from "/snippets/quickstart/webapp/java/CallbackServlet.java.mdx";
import Homeservlet from "/snippets/quickstart/webapp/java/HomeServlet.java.mdx";
import Logoutservlet from "/snippets/quickstart/webapp/java/LogoutServlet.java.mdx";

export const sections = [
      { id: "configure-auth0", title: "Configure Auth0" },
      { id: "integrate-auth0-in-your-application", title: "Integrate Auth0 in your application" },
      { id: "configure-your-java-application", title: "Configure your Java application" },
      { id: "create-the-authenticationcontroller", title: "Create the AuthenticationController" },
      { id: "login-redirection", title: "Login Redirection" },
      { id: "handling-the-tokens", title: "Handling the tokens" },
      { id: "display-the-home-page", title: "Display the home page" },
      { id: "handle-logout", title: "Handle logout" },
      { id: "run-the-sample", title: "Run the sample" }
]

<Recipe isSingleColumn>
  <Content>
    Auth0 allows you to quickly add authentication and gain access to user profile information in your application.
        This guide demonstrates how to integrate Auth0 with any new or existing Java Servlet application.

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      To use Auth0 services, youâ€™ll need to have an application set up in the Auth0 Dashboard. The Auth0 application is
            where you will configure how you want authentication to work for the project you are developing.

      ### Configure an application

      Use the interactive selector to create a new Auth0 application or select an existing application that represents
            the project you want to integrate with. Every application in Auth0 is assigned an alphanumeric, unique client ID
            that your application code will use to call Auth0 APIs through the SDK.

      Any settings you configure using this quickstart will automatically update for your Application in the [Dashboard](https://manage.auth0.com/#/), which is where you
            can manage your Applications in the future.

      If you would rather explore a complete configuration, you can view a sample application instead.

      ### Configure Callback URLs

      A callback URL is a URL in your application that you would like Auth0 to redirect users to after they have
            authenticated. If not set, users will not be returned to your application after they log in.

      <Info>
      If you are following along with our sample project, set this to
                      `http://localhost:3000/callback`.
      </Info>

      ### Configure Logout URLs

      A logout URL is a URL in your application that you would like Auth0 to redirect users to after they have logged
            out. If not set, users will not be able to log out from your application and will receive an error.

      <Info>
      If you are following along with our sample project, set this to `http://localhost:3000/`.
      </Info>
    
    <LoggedInForm />
</Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      ### Setup dependencies

      To integrate your Java application with Auth0, add the following dependencies:

      - **javax.servlet-api**
      : is the library that allows you to create Java Servlets. You then need to add a Server dependency like
                Tomcat or Gretty, which one is up to you. Check our sample code for more information.
      - **auth0-java-mvc-commons**: is the [Java library](https://github.com/auth0/auth0-java-mvc-common) that allows you to use Auth0 with Java for
                server-side MVC web apps. It generates the Authorize URL that you need to call in order to authenticate and
                validates the result received on the way back to finally obtain the [Auth0 Tokens](https://auth0.com/docs/tokens) that identify the user.

      If you are using Gradle, add them to your `build.gradle`:

      <AuthCodeBlock icon="file-code" language="text" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      

      If you are using Maven, add them to your `pom.xml`:

      <AuthCodeBlock icon="file-code" language="text" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      
    
    <LoggedInForm />
</Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Your Java App needs some information in order to authenticate against your Auth0 account. The samples read this
            information from the deployment descriptor file `src/main/webapp/WEB-INF/web.xml`, but you could store
            them anywhere else.

      This information will be used to configure the **auth0-java-mvc-commons** library to enable users to login to
            your application. To learn more about the library, including its various configuration options, see the [library's documentation](https://github.com/auth0/auth0-java-mvc-common/blob/master/README.md).

      ### Check populated attributes

      If you downloaded this sample using the **Download Sample** button, the `domain`,
            `clientId` and `clientSecret` attributes will be populated for you. You should verify that
            the values are correct, especially if you have multiple Auth0 applications in your account.

      ### Project structure

      The example project, which can be downloaded using the **Download Sample** button, has the following
            structure:

      <AuthCodeBlock icon="file-code" language="text" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      

      The project contains a single JSP: the `home.jsp` which will display the tokens associated with the
            user after a successful login and provide the option to logout.

      The project contains a WebFilter: the `Auth0Filter.java` which will check for existing tokens before
            giving the user access to our protected `/portal/*` path. If the tokens don't exist, the request will
            be redirected to the `LoginServlet`.

      The project contains also four servlets:

      - `LoginServlet.java`: Invoked when the user attempts to log in. The servlet uses the
                `client_id` and `domain` parameters to create a valid Authorize URL and redirects the
                user there.
      - `CallbackServlet.java`: The servlet captures requests to our Callback URL and processes the data
                to obtain the credentials. After a successful login, the credentials are then saved to the request's
                HttpSession.
      - `HomeServlet.java`: The servlet reads the previously saved tokens and shows them on the
                `home.jsp` resource.
      - `LogoutServlet.java`: Invoked when the user clicks the logout link. The servlet invalidates the
                user session and redirects the user to the login page, handled by the `LoginServlet`.
      - `AuthenticationControllerProvider.java`: Responsible to create and manage a single instance of the
                `AuthenticationController`
    
    <CodeGroup>
            <Web/>
            <Authenticationcontrollerprovider/>
            <Loginservlet/>
            <Callbackservlet/>
            <Homeservlet/>
            <Logoutservlet/>
          </CodeGroup>
</Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      To enable users to authenticate, create an instance of the `AuthenticationController` provided by the
            `auth0-java-mvc-commons` SDK using the `domain`, `clientId`, and
            `clientSecret`. The sample shows how to configure the component for use with tokens signed using the
            RS256 asymmetric signing algorithm, by specifying a `JwkProvider` to fetch the public key used to
            verify the token's signature. See the [jwks-rsa-java repository](https://github.com/auth0/jwks-rsa-java) to learn about additional configuration options. If you
            are using HS256, there is no need to configure the `JwkProvider`.

      <Info>
      The `AuthenticationController` does not store any context, and is inteded to be reused.
                      Unneccessary creation may result in additonal resources being created which could impact performance.
      </Info>
    
    <CodeGroup>
            <Authenticationcontrollerprovider/>
            <Web/>
            <Loginservlet/>
            <Callbackservlet/>
            <Homeservlet/>
            <Logoutservlet/>
          </CodeGroup>
</Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      To enable users to log in, your application will redirect them to the Universal Login page. Using the
            `AuthenticationController` instance, you can generate the redirect URL by calling the
            `buildAuthorizeUrl(HttpServletRequest request`, `HttpServletResponse response`,
            `String redirectUrl)` method. The redirect URL must be the URL that was added to the **Allowed
              Callback URLs** of your Auth0 application.
    
    <CodeGroup>
            <Loginservlet/>
            <Web/>
            <Authenticationcontrollerprovider/>
            <Callbackservlet/>
            <Homeservlet/>
            <Logoutservlet/>
          </CodeGroup>
</Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      After the user logs in, the result will be received in our `CallbackServlet` via either a GET or POST
            HTTP request. Because we are using the Authorization Code Flow (the default), a GET request will be sent. If you
            have configured the library for the Implicit Flow, a POST request will be sent instead.

      The request holds the call context that the library previously set by generating the Authorize URL with the
            `AuthenticationController`. When passed to the controller, you get back either a valid
            `Tokens` instance or an Exception indicating what went wrong. In the case of a successful call, you
            need to save the credentials somewhere to access them later. You can use the `HttpSession` of the
            request by using the `SessionsUtils` class included in the library.

      <Info>
      It is recommended to store the time in which we requested the tokens and the received
                      `expiresIn` value, so that the next time when we are going to use the token we can check if
                      it has already expired or if it's still valid. For the sake of this sample, we will skip that
                      validation.
      </Info>
    
    <CodeGroup>
            <Callbackservlet/>
            <Web/>
            <Authenticationcontrollerprovider/>
            <Loginservlet/>
            <Homeservlet/>
            <Logoutservlet/>
          </CodeGroup>
</Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Now that the user is authenticated (the tokens exists), the `Auth0Filter` will allow them to access
            our protected resources. In the `HomeServlet` we obtain the tokens from the request's session and set
            them as the `userId` attribute so they can be used from the JSP code.
    
    <CodeGroup>
            <Homeservlet/>
            <Web/>
            <Authenticationcontrollerprovider/>
            <Loginservlet/>
            <Callbackservlet/>
            <Logoutservlet/>
          </CodeGroup>
</Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      To properly handle logout, we need to clear the session and log the user out of Auth0. This is handled in the
            `LogoutServlet` of our sample application.

      First, we clear the session by calling `request.getSession().invalidate()`. We then construct the
            logout URL, being sure to include the `returnTo` query parameter, which is where the user will be
            redirected to after logging out. Finally, we redirect the response to our logout URL.
    
    <CodeGroup>
            <Logoutservlet/>
            <Web/>
            <Authenticationcontrollerprovider/>
            <Loginservlet/>
            <Callbackservlet/>
            <Homeservlet/>
          </CodeGroup>
</Section>

    <Section id={sections[8].id} title={sections[8].title} stepNumber="9" isSingleColumn>
      To run the sample from a terminal, change the directory to the root folder of the project and execute the
            following line:

      <AuthCodeBlock icon="file-code" language="text" lines="true">
      AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
      APP_BASE_URL='http://localhost:3000'
      AUTH0_DOMAIN='https://{USER_DOMAIN}'
      AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
      AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
      </AuthCodeBlock>

      

      After a few seconds, the application will be accessible on `http://localhost:3000/`. Try to access the
            protected resource [http://localhost:3000/portal/home](http://localhost:3000/portal/home) and note how you're redirected by the
            `Auth0Filter` to the Auth0 Login Page. The widget displays all the social and database connections that
            you have defined for this application in the [dashboard](https://manage.auth0.com/#/).

      <Frame>
        <img src="/images/cdy7uua7fh8z/7L6lZ6xCi1L7sJBFZUPb9g/b7697bfa1bc83a1072c2de2f15cec93c/Login_Screen_-_English.png" />
      </Frame>

      After a successful authentication, you'll be able to see the home page contents.

      <Frame>
        <img src="/images/cdy7uua7fh8z/FzK3jxfSGoeIDYQamxnJl/6b608e39ff39e044644193cfd2ee0f69/java-step-9-2.png" />
      </Frame>

      Log out by clicking the **logout** button at the top right of the home page.
    
    <LoggedInForm />
</Section>

    ## Next Steps

    Excellent work! If you made it this far, you should now have login, logout, and user profile information running in your application.

    This concludes our quickstart tutorial, but there is so much more to explore. To learn more about what you can do with Auth0, check out:

    *   [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Learn how to configure and manage your Auth0 tenant and applications
    *   [auth0-java-mvc-common SDK](https://github.com/auth0/auth0-java-mvc-common) - Explore the SDK used in this tutorial more fully
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Discover integrations you can enable to extend Auth0â€™s functionality
  </Content>

  
</Recipe>
