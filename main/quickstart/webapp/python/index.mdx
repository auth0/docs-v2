---
title: "Python"
permalink: "01-login"
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

##### By Evan Sims

This tutorial demonstrates how to add user login to a Python web Application built with the Flask framework and Authlib OAuth library.We recommend that you log in to follow this quickstart with examples configured for your account.


{/* <Card title="View on Github" href="https://github.com/auth0-samples/auth0-python-web-app/tree/master/01-Login" icon="github">
System requirements: Python 3 | Authlib 1.0 | Flask 2.0
</Card> */}

<Info>
**New to Auth?** Learn [How Auth0 works](/get-started/auth0-overview), how it [integrates with Regular Web Applications](/get-started/architecture-scenarios/sso-for-regular-web-apps) and which [protocol](/get-started/authentication-and-authorization-flow) it uses.
</Info>

## Configure Auth0

### Get Your Application Keys

When you signed up for Auth0, a new application was created for you, or you could have created a new one. You will need some details about that application to communicate with Auth0. You can get these details from the [Application Settings](https://manage.auth0.com/#/applications) section in the Auth0 dashboard.

<Frame>![App Dashboard](https://cdn2.auth0.com/docs/1.14550.0/media/articles/dashboard/client_settings.png)</Frame>

You need the following information:

* **Domain**
* **Client ID**
* **Client Secret**

<Info>
If you download the sample from the top of this page, these details are filled out for you.
</Info>

### Configure Callback URLs

A callback URL is a URL in your application where Auth0 redirects the user after they have authenticated. The callback URL for your app must be added to the **Allowed Callback URLs** field in your [Application Settings](https://manage.auth0.com/#/applications). If this field is not set, users will be unable to log in to the application and will get an error.
<Info>
If you are following along with the sample project you downloaded from the top of this page, the callback URL you need to add to the **Allowed Callback URLs** field is `http://localhost:3000/callback`.
</Info>

### Configure Logout URLs

A logout URL is a URL in your application that Auth0 can return to after the user has been logged out of the authorization server. This is specified in the `returnTo` query parameter. The logout URL for your app must be added to the **Allowed Logout URLs** field in your [Application Settings](https://manage.auth0.com/#/applications). If this field is not set, users will be unable to log out from the application and will get an error.
<Info>
If you are following along with the sample project you downloaded from the top of this page, the logout URL you need to add to the **Allowed Logout URLs** field is `http://localhost:3000`.
</Info>

## Install dependencies

For the purposes of this example, we'll be using the [Authlib](https://authlib.org/) OAuth library and [Flask](https://flask.palletsprojects.com/en/2.0.x/).

Begin by creating a `requirements.txt` file in your project directory:

<AuthCodeBlock icon="file-code" language="txt" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






You should now run `pip install -r requirements.txt` from your shell to make these dependencies available to your project.

## Configure your .env file

Next, create an `.env` file in your project directory. This file will hold your client keys and other configuration details.

<AuthCodeBlock icon="file-code" language="env" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






* Generate a suitable string for `APP_SECRET_KEY` using `openssl rand -hex 32` from your shell.

## Setup your application

Now you're ready to start writing your application. Create a `server.py` file in your project directory - this file will hold all of your application logic.

Begin by importing all the libraries your application will be making use of:

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






Next, your application will need to load the configuration `.env` file you made in the previous step:

<AuthCodeBlock icon="file-code" language="env" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






Now you can configure Flask for your application's needs:

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






Finally, you can now configure Authlib to handle your application's authentication with Auth0:

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






You can learn more about the configuration options available for Authlib's OAuth `register()` method from [their documentation.](https://docs.authlib.org/en/latest/client/frameworks.html#using-oauth-2-0-to-log-in)

## Setup your routes

For this demonstration, we'll be adding 4 routes for your application: your login, callback, logout and home routes.

### Triggering authentication with /login

When visitors to your app visit the `/login` route, they'll be redirected to Auth0 to begin the authentication flow.

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






### Finalizing authentication with /callback

After your users finish logging in with Auth0, they'll be returned to your application at the `/callback` route. This route is responsible for actually saving the session for the user, so when they visit again later, they won't have to sign back in all over again.

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






### Clearing a session with /logout

As you might expect, this route handles signing a user out from your application. It will clear the user's session in your app, and briefly redirect to Auth0's logout endpoint to ensure their session is completely clear, before they are returned to your home route (covered next.)

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






### There's no place like /home

Last but not least, your home route will serve as a place to either render an authenticated user's details, or offer to allow visitors to sign in.

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






### Server instantiation

Finally, you'll need to add some small boilerplate code for Flask to actually run your app and listen for connections.

<AuthCodeBlock icon="file-code" language="py" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






## Add templates

Now we just need to create the simple template files used in the routes about (during `render_template()` calls).

Create a new sub-directory in your project folder named `templates`, and create two files within: `dashboard.html` and `home.html`. You can paste the content from the two fields below into those files, respectfully:

<AuthCodeBlock icon="file-code" language="html" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






## Run your application

You're ready to run your application! From your project directory, open a shell and use:

<AuthCodeBlock icon="file-code" language="bash" lines="true">
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
APP_BASE_URL='http://localhost:3000'
AUTH0_DOMAIN='https://{USER_DOMAIN}'
AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
</AuthCodeBlock>






Your application should now be ready to open from your browser at `http://localhost:3000`.

<Note>
##### What can you do next?
<table>
  <tr>
    <td><a href="/authenticate/identity-providers">Configure other identity providers</a></td>
    <td><a href="/secure/multi-factor-authentication">Enable multifactor authentication</a></td>
  </tr>
  <tr>
    <td><a href="/secure/attack-protection">Learn about attack protection</a></td>
    <td><a href="/customize/rules">Learn about rules</a></td>
  </tr>
</table>
[Edit on GitHub](https://github.com/auth0/docs/edit/master/articles/quickstart/native/flutter/01-login.md)
</Note>