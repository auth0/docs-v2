---
mode: wide
'og:description': This guide demonstrates how to integrate Auth0, add authentication,
  and display user profile information in a Single-Page Application (SPA) that uses
  Cap'n Web RPC, using the Auth0 SPA SDK.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Auth0 JavaScript SDK Quickstarts: Add Login to Your Cap''n Web Application'
'og:url': https://auth0.com/docs/
sidebarTitle: Cap'n Web
title: Add Login to Your Cap'n Web Application
'twitter:description': This guide demonstrates how to integrate Auth0, add authentication,
  and display user profile information in a Single-Page Application (SPA) that uses
  Cap'n Web RPC, using the Auth0 SPA SDK.
'twitter:title': 'Auth0 JavaScript SDK Quickstarts: Add Login to Your Cap''n Web Application'
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

<Callout icon="pencil" color="#FFC107" iconType="solid">
  This Quickstart is currently in **Beta**. We'd love to hear your feedback!
</Callout>

<Accordion title="AI Prompt" defaultOpen icon="microchip-ai" iconType="sharp-solid">
  **Using AI to integrate Auth0?** Add this prompt to Cursor, Windsurf, Copilot, Claude Code or your favourite AI-powered IDE to speed up development.

  <AuthCodeBlock filename="expandable" icon="file-code" language="markdown">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>

## Get Started

This quickstart demonstrates how to add Auth0 authentication to a Cap'n Web application. You'll build a modern RPC-based web application with secure login functionality using Cap'n Web's JavaScript framework and the Auth0 SPA SDK.


<Steps>
  <Step title="Create a new project" stepNumber={1}>
    Create a new Cap'n Web project for this Quickstart

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    Initialize the project and install dependencies

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    Create the basic project structure

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    Set up your package.json scripts for development:

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Install the Auth0 SPA JS SDK" stepNumber={2}>
    Install the Auth0 SPA JS SDK to handle authentication:

    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
  <Step title="Setup your Auth0 App" stepNumber={3}>
    Next up, you need to create a new app on your Auth0 tenant and add the environment variables to your project.

    You can choose to do this automatically by running a CLI command or do it manually via the Dashboard:

    <Tabs>
      <Tab title="CLI">
        Run the following shell command on your project's root directory to create an Auth0 app and generate a `.env` file:

        <CodeGroup>
          <AuthCodeBlock filename="Mac" icon="file-code" language="shellscript">
          AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
          APP_BASE_URL='http://localhost:3000'
          AUTH0_DOMAIN='https://{USER_DOMAIN}'
          AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
          AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
          </AuthCodeBlock>

          <AuthCodeBlock filename="Windows" icon="file-code" language="shellscript">
          AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
          APP_BASE_URL='http://localhost:3000'
          AUTH0_DOMAIN='https://{USER_DOMAIN}'
          AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
          AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
          </AuthCodeBlock>
        </CodeGroup>
      </Tab>

      <Tab title="Dashboard">
        Before you start, create a `.env` file on your project's root directory

        <AuthCodeBlock filename=".env" icon="file-code" language="shellscript">
        AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
        APP_BASE_URL='http://localhost:3000'
        AUTH0_DOMAIN='https://{USER_DOMAIN}'
        AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
        AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
        </AuthCodeBlock>

        1. Head to the [Auth0 Dashboard](https://manage.auth0.com/dashboard/)
        2. Click on **Applications** > **Applications** > **Create Application**
        3. In the popup, enter a name for your app, select `Single Page Web Application` as the app type and click **Create**
        4. Switch to the **Settings** tab on the Application Details page
        5. Replace `YOUR_AUTH0_APP_DOMAIN` and `YOUR_AUTH0_APP_CLIENT_ID` on the `.env` file with the **Domain** and **Client ID** values from the dashboard

        Finally, on the **Settings** tab of your Application Details page, set **Allowed Callback URLs**, **Allowed Logout URLs** and **Allowed Web Origins** to:

        <AuthCodeBlock icon="file-code">
        AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
        APP_BASE_URL='http://localhost:3000'
        AUTH0_DOMAIN='https://{USER_DOMAIN}'
        AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
        AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
        </AuthCodeBlock>

        <Info>
          **Allowed Callback URLs** are a critical security measure to ensure users are safely returned to your application after authentication. Without a matching URL, the login process will fail, and users will be blocked by an Auth0 error page instead of accessing your app.

          **Allowed Logout URLs** are essential for providing a seamless user experience upon signing out. Without a matching URL, users will not be redirected back to your application after logout and will instead be left on a generic Auth0 page.

          **Allowed Web Origins** is critical for silent authentication. Without it, users will be logged out when they refresh the page or return to your app later.
        </Info>

        **Required: Create an Auth0 API**
        
        You must create an Auth0 API for token validation to work:
        
        1. In the Auth0 Dashboard, go to **APIs** > **Create API**
        2. Set these values:
           - **Name**: `Cap'n Web API` 
           - **Identifier**: `https://capnweb-api.yourproject.com` (use your own unique identifier)
           - **Signing Algorithm**: `RS256` (default)
        3. Click **Create**
        4. In the **Scopes** tab, add these scopes:
           - `read:profile` - Read user profile data
           - `write:profile` - Update user profile data
        5. Update your `.env` file with the API identifier as `AUTH0_AUDIENCE`
        
        <Warning>
        Without creating an Auth0 API, you'll get an "access_denied" error during login. The API identifier must match your `AUTH0_AUDIENCE` environment variable exactly.
        </Warning>
      </Tab>
    </Tabs>
  </Step>
  <Step title="Create the server" stepNumber={4}>
    Create the Cap'n Web server with Auth0 integration:

    <CodeGroup>

    <AuthCodeBlock filename="server/index.js" icon="file-code" language="javascript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    </CodeGroup>
  </Step>
  <Step title="Create the client interface" stepNumber={5}>
    Create the frontend HTML and JavaScript files:

    <CodeGroup>
    <AuthCodeBlock filename="client/index.html" icon="file-code" language="html" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    <AuthCodeBlock filename="client/app.js" icon="file-code" language="javascript" lines="true">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>

    </CodeGroup>
  </Step>
  <Step title="Run your app" stepNumber={6}>
    <AuthCodeBlock icon="file-code" language="shellscript">
    AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
    APP_BASE_URL='http://localhost:3000'
    AUTH0_DOMAIN='https://{USER_DOMAIN}'
    AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
    AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
    </AuthCodeBlock>
  </Step>
</Steps>

<Check>
  **Checkpoint**

  You should now have a fully functional Auth0 login page running on your [localhost](http://localhost:3000/)
</Check>

---

## Advanced Usage

<Accordion title="Server-Side RPC Security">
  Enhance security by adding additional validation and rate limiting to your RPC methods:

  <AuthCodeBlock filename="server/profile-service.js" icon="file-code" language="javascript">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>

<Accordion title="WebSocket Connection Management">
  Implement proper WebSocket connection handling with reconnection logic:

  <AuthCodeBlock filename="client/enhanced-rpc-client.js" icon="file-code" language="javascript">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>

<Accordion title="Database Integration">
  Replace in-memory storage with a database for production use:

  <AuthCodeBlock filename="server/database.js" icon="file-code" language="javascript">
  AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
  APP_BASE_URL='http://localhost:3000'
  AUTH0_DOMAIN='https://{USER_DOMAIN}'
  AUTH0_CLIENT_ID='{USER_CLIENT_ID}'
  AUTH0_CLIENT_SECRET='{USER_CLIENT_SECRET}'
  </AuthCodeBlock>
</Accordion>

