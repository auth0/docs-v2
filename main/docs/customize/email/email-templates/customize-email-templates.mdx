---
title: Customize Email Templates
description: Instructions on how to use email templates to customize the appearance and content of emails sent by Auth0's email-based workflows.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
---

## Prerequisites

To manage and customize email templates, you must:

* [Configure an external SMTP email provider](/docs/customize/email/smtp-email-providers).

* Configure a **From** address at either the template level or the SMTP provider level.

<Warning>
Email templates are not available when using Auth0's built-in SMTP email provider.
</Warning>

## Configure email templates

To customize an email template:

1. Go to [Dashboard > Branding > Email Templates](https://manage.auth0.com/#/templates).
2. From the **Template** dropdown, select the email template you want to update.
3. Make the desired changes.
4. To test, click **Try**, enter a valid email address that you have access to view, and choose the correct connection type.
5. Click **Save** to save the results, or click **Cancel** to discard them and return to the email template page.

Message bodies have HTML content. Liquid is supported in every field (except **URL Lifetime**). To learn more, read [Supported Liquid Syntax](/docs/customize/email/email-templates/supported-liquid-syntax).

## TODO

You can configure a **Redirect To** URL to send the users to after the email verification action was attempted. By default, Auth0 includes the following parameters:

* `success` with value `true` or `false` indicating whether the email verification was successful
* `message` with an additional description of the outcome. Some possible values are:

  + `Your email was verified. You can continue using the application.` (with `success=true`)
  + `This URL can be used only once` (with `success=false`)
  + `Access expired.` (with `success=false`)
  + `User account does not exist or verification code is invalid.` (with `success=false`)
  + `This account is already verified.` or `Your email address could not be verified.`(with `success=false`)

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">
For some errors, the user may be sent to the [Generic Error Page](/docs/authenticate/login/auth0-universal-login/error-pages) page instead of the Redirect To URL.
</Callout>

To control whether the template should include the user's email address in the redirect, you can use the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>'s [`PATCH /v2/email-templates/{templateName}`](https://auth0.com/docs/api/management/v2/email-templates/patch-email-templates-by-template-name) endpoint with the `includeEmailInRedirect` body parameter .

### Redirect results for user invitation email templates

You must [configure a default login route](/docs/authenticate/login/auth0-universal-login/configure-default-login-routes), to which users will be sent after selecting the link to accept the invitation. When redirecting, Auth0 will include the following parameters:

* `invitation`: ID of the invitation ticket
* `organization`: ID of the organization to which the user is being invited
* `organization_name`: Name of the organization to which the user is being invited

For example, if you have an organization-enabled application with an **Application Login URI** set to `https://myapp.com/login`, then the link sent in the email invitation that an end-user receives will be: `https://myapp.com/login?invitation={invitation_ticket_id}&organization={organization_id}&organization_name={organization_name}`.

The target login route should initiate a transaction to `/authorize` that contains the provided `invitation` and `organization` key-value pairs. It should also be prepared to gracefully handle other possible messages.


## TODO

## Configure template fields

You need to configure the following fields:

### 1. From address

Users will see the email address in the **From Address** field as the sender when receiving an email from Auth0. If you do not configure the **From Address** field for an email template, Auth0 will use the email address in the **From** field configured for your [Email Provider](/docs/customize/email/smtp-email-providers).

<Warning>
**From Address**es may not contain `@auth0.com`. Learn more about [email template limits](#limits).
</Warning>

The **From Address** field supports all common variables for templates.

You can use these variables to set the display name of the **From Address** to something that relates to the application for which the user signed up. For example, the field could display `{{ application.name }} <support@fabrikamcorp.com>`, as opposed to simply `<support@fabrikamcorp.com>`.

To allow Auth0 to send digitally-signed emails on your behalf, you must configure two forms of email authentication:

* [Sender Policy Framework (SPF)](https://en.wikipedia.org/wiki/Sender_Policy_Framework), which authorizes specific IP addresses to send email from a domain
* [DomainKeys Identified Mail (DKIM)](https://en.wikipedia.org/wiki/DKIM), which cryptographically signs emails so mail servers can verify that it was sent from the reported domain

Without SPF and DKIM configured, the emails may not be delivered or may be caught by spam filters. Users may also see `MyApp support@mail128-21.atl41.mandrillapp.com on behalf of MyApp support@fabrikamcorp.com` as the **From Address**.

To configure SPF, create a TXT record for your domain. Set the host name to `@` or leave it empty, depending on the provider. The value of the record should like `"v=spf1 include:spf.mandrillapp.com -all"`. If you already have a TXT record for SPF, you can add `include:spf.mandrillapp.com` to the existing record.

##### DKIM configuration

TO configure DKIM, create a TXT record for your domain. This domain should be the one you use to send emails. For example, if you are using [Mandrill](https://www.mandrill.com/signup/), you would set the host name for this record to `mandrill._domainkey` and the value to:

```text lines
v=DKIM1; k=rsa; 
p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrLHiExVd55zd/IQ/J/mRwSRMAocV/hMB3jXwaHH36d9NaVynQFYV8NaWi69c1veUtRzGt7yAioXqLj7Z4TeEUoOLgrKsn8YnckGs9i3B3tVFB+Ch/4mPhXWiNfNdynHWBcPcbJ8kjEQ2U8y78dHZj1YeRXXVvWob2OaKynO8/lQIDAQAB;
```

### 2. Subject

The **Subject** field supports all the common variables for templates.

If the **Subject** field is empty, Auth0 auto-populates this text depending on what type of email you are sending. For example, one subject line might be "Verify your email."

##### Multilingual subject line

You can use Liquid and reference the `request_language` parameter to pull the language setting from the header value or default to the user's browser language setting.

For example:

```liquid lines
{% assign language = request_language %}
  {% if language %}
    {% assign language = request_language | slice: 0,2 %}
  {% endif%}
{% if language == 'es' %}
  Cuenta de Example: bloqueada
{% elsif language == 'de' %}
  Ihr Example wurde gesperrt
{% elsif language == 'fr' %}
  Compte Example bloqué
{% elsif language == 'ja' %}
  Example アカウントがブロックされました
{% elsif language == 'pt' %}
  Conta da Example bloqueada
{% elsif language == 'zh' %}
  Example　帐户被阻止
{% else %}
  Example account blocked
{% endif %}
```

### 3. URL lifetime

The **Verification Email**, **Change Password** and **Blocked Account Email** contain links which allow users to verify their email address when signing up, confirm their password change, or unblock a blocked account respectively.

You can modify the lifetime of this link for security purposes. By default, the lifetime is 432,000 seconds (five days).

If users click on an expired link and a **Redirect To** URL is configured, they will be redirected to the configured **Redirect To** URL. The following text will be appended to the query string:

`http://myapplication.com/my_page/?email=john%contoso.com&message=Access%20expired.&success=false`

### 4. Redirect To URL

The **Redirect To** URL is an optional destination to redirect the user to after the relevant action (verify account, reset password, unblock account) was performed.

With the Universal Login Classic Experience, you can provide a URL to which users are redirected after they reset their password. Auth0 sends a `success` indicator and a `message` to the URL. To learn more about these two parameters, see [Email Template Descriptions](/docs/customize/email/email-templates/email-template-descriptions).

With the New Universal Login Experience, Auth0 redirects users to the default log in route when the user succeeds in resetting the password. If not, Auth0 handles the errors as part of the Universal Login flow and ignores the redirect URL provided in the email template.

Only the following three variables are available on the **Redirect To** URL:

* `application.name` (or its synonym `client.name`)
* `application.clientID`
* `application.callback_domain` (or its synonym `client.callback_domain`)

The `application.callback_domain` variable will contain the origin of the **first** URL listed in the application's **Allowed Callback URL** list. This lets you redirect users to a path of the application that triggered the action by using a syntax like this:

`{{ application.callback_domain }}/result_page`

Note that while the variable is called `callback_domain`, it is really an origin, so it includes the protocol in addition to the domain, e.g. `https://myapp.com`.

If your application has multiple **Allowed Callback URLs** configured, Auth0 will use the first URL listed. You can also provide a default origin using Liquid syntax:

`{{ application.callback_domain | default: "https://my-default-domain.com" }}/result_page`

#### Dynamic redirect to URLs

You can set up a different Redirect To URLs based on your application name. For example:

`{% if application.name == 'JWT.io' %} https://jwt.io {% else %} https://auth0.com {% endif %}`

Because the application name is encoded for security, you should always use an encoded value (especially if your application name contains a character that changes once encoded). For example, you'll want to use `My%20App` instead of `My App`.

For single-page applications (SPAs), the **Redirect To** URL may contain the hash and route for a particular state/view in the app, followed by route parameters. This can cause the following issue with the **Redirect To** URL:

`http://localhost:3000/#/register`

Which will result in a user getting redirected to the following URL:

```http lines
http://localhost:3000/?supportSignUp=true
  &supportForgotPassword=true
  &email=john.doe%40exampleco.com
  &message=Your%20email%20was%20verified.%20You%20can%20continue%20using%20the%20application.
  &success=true#/register
```

This is described by Internet Standards (to learn more, read the [RFC 3986](https://tools.ietf.org/html/rfc3986#section-3) spec by the Internet Engineering Task Force) that define the expected order of a URL as `scheme|authority|path|query|fragment`. However, SPA frameworks (such as Angular) typically expect URLs in the `scheme|authority|path|fragment|query` format (with the query string parameters at the end). This causes the application not to enter the expected state. For example, with the above URL, the app will be routed to `/` instead of `/#/register`.

To work around this limitation of SPA frameworks, it is recommended to use a server-side callback URL as the **redirect To** URL with a `route` parameter that preserves the SPA app route for the redirect. Once in this server-side URL, simply redirect to the SPA route saved in the `route` parameter along with rest of the query string.

1. Add a server-side URL as the **redirect To** URL with a `route` parameter that records the SPA route for the redirect.
   `http://localhost:3001/register?route=register`
2. Create a server-side route controller that reads the `route` and other parameters from the URL and redirects to the SPA route specified in `route` parameter. Remember to append the other parameters received from Auth0.

   ```javascript lines
   var express = require('express');
   var router = express.Router();
   var qs = require('qs'); // to read query string params and stringify them

   router.get('/register', function(req, res, next) {
     var route = req.query.route; // retrieve the route param that contains the SPA client side route user needs to be redirected to.

     delete req.query.route; // remove it from query params.
     res.redirect('http://localhost:3000/#/' + route + '?' +  qs.stringify(req.query)); // Send a 302 redirect for the expected route
   });

   module.exports = router;
   ```

### 5. Message body

Message bodies have HTML content, and Liquid syntax is the currently supported templating syntax to use. You can use all the common variables plus variables defined in each individual template.

#### Multilingual email templates

You can use Liquid syntax along with the `user_metadata.lang` property from the user object to alter the content based on the user preferred language. For example, you can [use an action](/docs/customize/actions/actions-overview) to set the `user_metadata.lang` property to `it` for Italian. You must set the language property with an action or otherwise.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">
When you click the **Try** button, Auth0 sends the email for a default app named after your tenant's raw name (that is, not the friendly name). To test templates for different applications, create a sample user to go through the relevant flows.

Verification emails, however, can be triggered manually for specific applications and users using the Auth0 Management API [Send an email address verification email](https://auth0.com/docs/api/management/v2#!/Jobs/post_verification_email) endpoint.
</Callout>
