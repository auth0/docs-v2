---
description: Learn about the properties of the Rules context object, which stores
  information about users' IP addresses, applications, and location.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': Context Object Properties in Rules
'og:url': https://auth0.com/docs/
permalink: context-object
title: Context Object Properties in Rules
'twitter:description': Learn about the properties of the Rules context object, which
  stores information about users' IP addresses, applications, and location.
'twitter:title': Context Object Properties in Rules
---
<Warning>

The End of Life (EOL) date of Rules and Hooks will be **November 18, 2026**, and they are no longer available to new tenants created as of **October 16, 2023**. Existing tenants with active Hooks will retain Hooks product access through end of life.

We highly recommend that you use Actions to extend Auth0. With Actions, you have access to rich type information, inline documentation, and public `npm` packages, and can connect external integrations that enhance your overall extensibility experience. To learn more about what Actions offer, read [Understand How Auth0 Actions Work](/docs/customize/actions/actions-overview).

To help with your migration, we offer guides that will help you [migrate from Rules to Actions](/docs/customize/actions/migrate/migrate-from-rules-to-actions) and [migrate from Hooks to Actions](/docs/customize/actions/migrate/migrate-from-hooks-to-actions). We also have a dedicated [Move to Actions](https://auth0.com/extensibility/movetoactions) page that highlights feature comparisons, [an Actions demo](https://www.youtube.com/watch?v=UesFSY1klrI), and other resources to help you on your migration journey.

To read more about the Rules and Hooks deprecation, read our blog post: [Preparing for Rules and Hooks End of Life](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/).

</Warning>

The `context` object stores contextual information about the current authentication transaction, such as the user's IP address, application, or location.

If you change token content using the context object within a rule, your changes will be available in tokens after all rules have finished running. If your application also requires <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=multifactor+authentication">multifactor authentication</Tooltip> or user consent, the user will be prompted before changes in the token are available.

## Properties

The following properties are available for the `context` object.

<table class="table">
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>context.tenant</code></td>
<td>A string containing the name of the tenant.</td>
</tr>
<tr>
<td><code>context.clientID</code></td>
<td>The client id of the application the user is logging in to.</td>
</tr>
<tr>
<td><code>context.clientName</code></td>
<td>The name of the application (as defined on the dashboard).</td>
</tr>
<tr>
<td><code>context.clientMetadata</code></td>
<td>An object for holding other application properties. Its keys and values are strings.</td>
</tr>
<tr>
<td><code>context.connectionID</code></td>
<td>A string containing the connection's unique identifier.</td>
</tr>
<tr>
<td><code>context.connection</code></td>
<td>The name of the connection used to authenticate the user (such as: <code>twitter</code> or <code>some-g-suite-domain</code>)</td>
</tr>
<tr>
<td><code>context.connectionStrategy</code></td>
<td>The type of connection. For social connection <code>connectionStrategy</code> === <code>connection</code>. For enterprise connections, the strategy will be <code>waad</code> (Windows Azure AD), <code>ad</code> (Active Directory/LDAP), <code>auth0</code> (database connections), and so on.</td>
</tr>
<tr>
<td><code>context.connectionOptions</code></td>
<td>An object representing the options defined on the connection. <code>connectionOptions.tenant_domain</code> is a string containing the domain being used for authentication when using an Enterprise connection.<br/> <code>connectionOptions.domain_aliases</code> is an array containing the optional domains registered as aliases in addition to the primary domain (specified in the <code>connectionOptions.tenant_domain</code> property).</td>
</tr>
<tr>
<td><code>context.connectionMetadata</code></td>
<td>An object representing metadata defined on the connection. Its keys and values are strings.</td>
</tr>
<tr>
<td><code>context.samlConfiguration</code></td>
<td>An object that controls the behavior of the <Tooltip tip="Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip> and WS-Fed endpoints. Useful for advanced claims mapping and token enrichment (only available for <code>samlp</code> and <code>wsfed</code> protocol).</td>
</tr>
<tr>
<td><code>context.protocol</code></td>
<td>The authentication protocol. Possible values:<ul>
<li><code>oidc-basic-profile</code>: most used, web-based login</li>
<li><code>oidc-implicit-profile</code>: used on mobile devices and single-page apps</li>
<li><code>oauth2-device-code</code>: transaction using the <a href="/docs/get-started/authentication-and-authorization-flow/device-authorization-flow">Device Authorization Flow</a></li>
<li> <code>oauth2-resource-owner</code>: user/password login typically used on database connections</li>
<li><code>oauth2-resource-owner-jwt-bearer</code>: login using a bearer JWT signed with user's private key</li>
<li><code>oauth2-password</code>: login using the password exchange</li>
<li><code>oauth2-refresh-token</code>: refreshing a token using the Refresh Token exchange</li>
<li><code>samlp</code>: SAML protocol used on SaaS apps</li>
<li><code>wsfed</code>: WS-Federation used on Microsoft products like Office365</li>
<li><code>wstrust-usernamemixed</code>: WS-trust user/password login used on CRM and Office365</li>
<li><code>delegation</code>: when calling the <a href="https://auth0.com/docs/api/authentication#delegation">Delegation endpoint</a></li>
<li><code>redirect-callback</code>: when a redirect rule is resumed</li></ul></td>
</tr>
<tr>
<td><code>context.riskAssessment</code></td>
<td>An object containing specific scores (low, medium, high, neutral) for high risk login attempt assessors. See <a href="/docs/secure/multi-factor-authentication/adaptive-mfa/customize-adaptive-mfa">Customize Adaptive MFA with Rules</a>.</td>
</tr>
<tr>
<td><code>context.stats</code></td>
<td>An object containing specific user stats, like <code>stats.loginsCount</code>. Note that any of the counter variables returned as part of the <code>stats</code> object do not increase during <a href="/docs/authenticate/login/configure-silent-authentication">silent authentication</a> (as when <code>prompt=none</code>). There are also scenarios where the counter variables might increase yet a rule or set of rules do not execute, as in the case of a successful cross-origin authentication followed by a failed token request.</td>
</tr>
<tr>
<td><code>context.sso</code></td>
<td>This object will contain information about the <Tooltip tip="Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on+%28SSO%29">Single Sign-on (SSO)</Tooltip> transaction (if available)<ul>
<li><code>with_auth0</code>: when a user signs in with SSO to an application where the <code>Use Auth0 instead of the IdP to do Single Sign-On</code> setting is enabled (only for legacy tenants).</li>
<li><code>with_dbconn</code>: an SSO login for a user that logged in through a database connection.</li>
<li><code>current_clients</code>: client IDs using SSO.</li></ul></td>
</tr>
<tr>
<td><code>context.accessToken</code></td>
<td>An object representing the options defined on the <Tooltip tip="Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=Access+Toke">Access Toke</Tooltip>. You can use this object to <a href="/docs/get-started/apis/scopes/sample-use-cases-scopes-and-claims#add-custom-claims-to-a-token">add custom namespaced claims</a> to the <Tooltip tip="Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=Access+Toke">Access Toke</Tooltip>. <code>context.accessToken.scope</code> can be used to <a href="/docs/customize/actions/actions-overview#modify-scope-of-access-token">change the Access Token's returned scopes</a>. When provided, it is an array containing permissions in string format. Custom claims will be included in the Access Token after all rules have run.</td>
</tr>
<tr>
<td><code>context.idToken</code></td>
<td>An object representing the options defined on the <a href="/docs/secure/tokens/id-tokens">ID Token</a>. Used to add custom <a href="/docs/secure/tokens/json-web-tokens/create-custom-claims">namespaced</a> claims to the ID Token. Custom claims will be included in the ID Token after all rules have run.</td>
</tr>
<tr>
<td><code>context.multifactor</code></td>
<td>An object representing the multifactor settings used in <a href="/docs/secure/multi-factor-authentication">implementing contextual MFA</a>.</td>
</tr>
<tr>
<td><code>context.redirect</code></td>
<td>The object used to <a href="/docs/customize/rules/redirect-users#how-to-implement-a-redirect">implement the redirection of a user from a rule</a>.</td>
</tr>
<tr>
<td><code>context.sessionID</code></td>
<td>An internal identification for the authentication session. Value is kept only if <code>prompt=none</code> is used in the authorization request. Note that the session ID can change <strong>after</strong> rule execution on other flows, so the value available in <code>context.sessionID</code> might not match the new session ID that the user will receive. This makes this value only meaningful when <code>prompt=none</code> is used.</td>
</tr>
<tr>
<td><code>context.request</code></td>
<td>An object containing useful information of the request. This can also be set to <code>undefined</code>. It has the following properties:<ul>
<li><code>userAgent</code>: the user-agent of the application that is trying to log in.</li>
<li><code>ip</code>: the originating IP address of the user trying to log in. We expose IPv6 addresses in our public endpoints (e.g., travel0.us.auth0.com). If a request arrives from a machine that supports IPv6, then this will contain an IPv6 address. If you perform manual IP address manipulation, we suggest you use the <a href="https://www.npmjs.com/package/ipaddr.js/v/1.9.0">ipaddr.js@1.9.0 library</a>.</li>
<li><code>hostname</code>: the hostname that is being used for the authentication flow.</li>
<li><code>query</code>: an object containing the querystring properties of the login transaction sent by the application.</li>
<li><code>body</code>: the body of the POST request on login transactions used on <code>oauth2-resource-owner</code>, <code>oauth2-resource-owner-jwt-bearer</code> or <code>wstrust-usernamemixed</code> protocols.</li>
<li><code>geoip</code>: an object containing geographic IP information. It has the following properties:<ul>
<li><code>country_code</code>: a two-character code for the country associated with the IP address.</li>
<li><code>country_code3</code>: a three-character code for the country associated with the IP address.</li>
<li><code>country_name</code>: the country name associated with the IP address.</li>
<li><code>city_name</code>: the city or town name associated with the IP address.</li>
<li><code>latitude</code>: the latitude associated with the IP address.</li>
<li><code>longitude</code>: the longitude associated with the IP address.</li>
<li><code>time_zone</code>: the timezone associated with the IP address.</li>
<li><code>continent_code</code>: a two-character code for the continent associated with the IP address.</li>
<li><code>subdivision_code</code>: the ISO 3166-2 code for the top-level subdivision/region.</li>
<li><code>subdivision_name</code>: The English name of this subdivision/region.</li></ul></li></ul></td>
</tr>
<tr>
<td><code>context.primaryUser</code></td>
<td>The unique user id of the primary account for the user. Used to <a href="/docs/manage-users/user-accounts/user-account-linking#automatic-account-linking">link user accounts</a> from various identity providers.</td>
</tr>
<tr>
<td><code>context.authentication</code></td>
<td>
An object containing information related to the authentication transaction with the following properties:<br/><br/><code>methods</code>: an array of objects containing the authentication methods a user has completed during their session. For example, a user that has completed a password-based authentication followed by MFA may have the following methods:<br/>
```json lines
[
  {
    "name": "pwd",
    "timestamp": 1434454643024
  },
  {
    "name": "mfa",
    "timestamp": 1534454643881
  }
]
```
<br/>
The method objects will contain the following properties:
<ul>
<li>
<code>name</code>: a string representing the name of the authentication method that has been completed. It can be one of the following values (additional values may be supported in the future):<br/>
<ul>
<li><code>federated</code>: a social or enterprise connection was used to authenticate the user</li>
<li><code>pwd</code>: a database connection was used to authenticate the user</li>
<li><code>sms</code>: a <Tooltip tip="Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=Passwordless">Passwordless</Tooltip> SMS connection was used to authenticate the user</li>
<li><code>email</code>: a Passwordless Email connection was used to authenticate the user</li>
<li><code>mfa</code>: the user completed a multi-factor authentication</li>
</ul>
</li>
<li><code>timestamp</code>: an integer indicating the time in seconds at which the authentication method took place in Unix Epoch time</li>
</ul>
<p>You can see a sample use case of the <code>context.authentication.methods</code> property in the <a href="https://github.com/auth0/rules/blob/master/src/rules/require-mfa-once-per-session.js">Require MFA once per session Rule</a>.</p>
</td>
</tr>
<tr>
<td><code>context.authorization</code></td>
<td>An object containing information related to the authorization transaction with the following properties:<ul>
<li><code>roles</code>: an array of strings containing the names of a user's assigned <Tooltip tip="Aspect of a user’s identity assigned to the user to give them a certain set of permissions." cta="View Glossary" href="/docs/glossary?term=roles">roles</Tooltip>. You can see a sample use case using the <code>context.authorization.roles</code> property to add roles to tokens in <a href="/docs/manage-users/access-control/sample-use-cases-rules-with-authorization#add-user-roles-to-tokens">Sample Use Cases: Rules with Authorization</a>.</li></ul></td>
</tr>
<tr>
<td><code>context.organization</code></td>
<td>Object containing information related to the organization. Includes the following properties:<ul>
<li><code>id</code>: String containing the ID of the organization with which the user is logging in.</li><li><code>name</code>: String containing the name of the organization (as defined in the Auth0 Dashboard).</li><li><code>metadata</code>: Dictionary of string key/value pairs containing other organization properties.</li></ul></td>
</tr>
</tbody>
</table>

## Learn more

* [Debug Rules](/docs/customize/rules/debug-rules)
* [User Object Properties in Rules](/docs/customize/rules/user-object-in-rules)
* [Sample Use Cases: Scopes and Claims](/docs/get-started/apis/scopes/sample-use-cases-scopes-and-claims)