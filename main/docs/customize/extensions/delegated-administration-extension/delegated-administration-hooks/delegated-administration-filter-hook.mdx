---
description: Learn how to use the Filter Hook with the Delegated Administration
  Extension.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Delegated Administration: Filter Hook'
'og:url': https://auth0.com/docs/
permalink: delegated-administration-filter-hook
title: 'Delegated Administration: Filter Hook'
'twitter:description': Learn how to use the Filter Hook with the Delegated Administration
  Extension.
'twitter:title': 'Delegated Administration: Filter Hook'
---
By default, users with the **Delegated Admin - User** role see all users associated with the Auth0 account. However, you can filter the data users see using the **Filter Hook**.

## Hook contract

* **ctx**: Context object.
* **callback(error, query)**: Callback to which you can return an error or the lucene query used when filtering the users. The extension will send this query to the [**Get Users** endpoint](https://auth0.com/docs/api/management/v2#!/Users/get_users) of the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>.

To learn more about the lucene query, review [User Search Query Syntax](/docs/manage-users/user-search/user-search-query-syntax).

### Sample use

If Kelly manages the Finance department, she should only see the users that are also part of the Finance department. We'll filter the users with respect to the department of the current user (which, in this case, is the Finance department and Kelly, respectively).

```javascript lines
function(ctx, callback) {
  // Get the department from the current user's metadata.
  var department = ctx.request.user.app_metadata && ctx.request.user.app_metadata.department;
  if (!department || !department.length) {
    return callback(new Error('The current user is not part of any department.'));
  }

  // The IT department can see all users.
  if (department === 'IT') {
    return callback();
  }

  // Return the lucene query.
  return callback(null, 'app_metadata.department:"' + department + '"');
}
```






### Search engine override

You can override the default search engine by specifying your choice in the response.

```javascript lines
// Return the lucene query.
return callback(null, { query: 'app_metadata.department:"' + department + '"', searchEngine: 'v2' });
```






## Notes

Do not use single quotes, double quotes, or any other special characters (such as **+** or **-**) in terms on which you'll want to filter. This may cause issues with the Lucene query.

If you use multiple operators like OR, NOT, or AND, use wrap those search parameters in parentheses [`()`] to delineate which operator is in effect where.

If you do not configure this Hook, the search returns **all users**.

## Learn more

* [Delegated Administration: Access Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-access-hook)
* [Delegated Administration: Memberships Query Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-memberships-query-hook)
* [Delegated Administration: Settings Query Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-settings-query-hook)
* [Delegated Administration: Write Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-write-hook)