---

mode: wide
description: This guide demonstrates how to integrate Auth0 with any new or existing
  ASP.NET OWIN application using the Microsoft.Owin.Security.OpenIdConnect Nuget package.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Auth0 ASP.NET (OWIN) SDK Quickstarts: Add Login to your ASP.NET OWIN
  Application'
'og:url': https://auth0.com/docs/
sidebarTitle: ASP.NET OWIN
title: Add Login to your ASP.NET OWIN Application
'twitter:description': This guide demonstrates how to integrate Auth0 with any new
  or existing ASP.NET OWIN application using the Microsoft.Owin.Security.OpenIdConnect
  Nuget package.
'twitter:title': 'Auth0 ASP.NET (OWIN) SDK Quickstarts: Add Login to your ASP.NET
  OWIN Application'
---
import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx"
import WebConfig from "/snippets/quickstart/webapp/aspnet-owin/web-config.mdx"
import AccountController1 from "/snippets/quickstart/webapp/aspnet-owin/AccountController1.mdx"
import AccountController2 from "/snippets/quickstart/webapp/aspnet-owin/AccountController2.mdx"
import AccountController3 from "/snippets/quickstart/webapp/aspnet-owin/AccountController3.mdx"

export const sections = [
  { id: "configure-auth0", title: "Configure Auth0" },
  { id: "configure-the-project", title: "Configure the project" },
  { id: "configure-the-middleware", title: "Configure the middleware" },
  { id: "add-login-to-your-application", title: "Add login to your application" },
  { id: "add-logout-to-your-application", title: "Add logout to your application" },
  { id: "show-user-profile-information", title: "Show user profile information" }
]

<Recipe>
  <Content>
    Auth0 allows you to quickly add authentication and gain access to user profile information in your application. This guide demonstrates how to integrate Auth0 with any new or existing ASP.NET OWIN application using the `Microsoft.Owin.Security.OpenIdConnect` Nuget package.

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      To use Auth0 services, you’ll need to have an application set up in the Auth0 Dashboard. The Auth0 application is where you will configure how you want authentication to work for the project you are developing.

      ### Configure an application

      Use the interactive selector to create a new Auth0 application or select an existing application that represents the project you want to integrate with. Every application in Auth0 is assigned an alphanumeric, unique client ID that your application code will use to call Auth0 APIs through the SDK.

      Any settings you configure using this quickstart will automatically update for your Application in the [Dashboard](https://manage.auth0.com/#/), which is where you can manage your Applications in the future.

      If you would rather explore a complete configuration, you can view a sample application instead.

      ### Configure Callback URLs

      A callback URL is a URL in your application that you would like Auth0 to redirect users to after they have authenticated. If not set, users will not be returned to your application after they log in.

      <Callout icon="file-lines" iconType="regular">
      If you are following along with our sample project, set this to `http://localhost:3000/callback`.
      </Callout>

      ### Configure Logout URLs

      A logout URL is a URL in your application that you would like Auth0 to redirect users to after they have logged out. If not set, users will not be able to log out from your application and will receive an error.

      <Callout icon="file-lines" iconType="regular">
      If you are following along with our sample project, set this to `http://localhost:3000`.
      </Callout>
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      ### Install from Nuget

      To integrate Auth0 with ASP.NET OWIN, you can use the `Microsoft.Owin.Security.OpenIdConnect` and `Microsoft.Owin.Security.Cookies` Nuget packages.

      ```text lines
      Install-Package Microsoft.Owin.Security.OpenIdConnect
      Install-Package Microsoft.Owin.Security.Cookies
      ```

      

      <Callout icon="file-lines" iconType="regular">
      Issues occur when configuring the OWIN cookie middleware and System.Web cookies at the same time. To learn more, read [System.Web cookie integration issues doc](https://github.com/aspnet/AspNetKatana/wiki/System.Web-response-cookie-integration-issues) to mitigate these problems.
      </Callout>

      ### Configure the credentials

      For the SDK to function properly, set the following properties in `Web.config`:

      - `auth0:Domain`: The domain of your Auth0 tenant. You can find this in the Auth0 Dashboard under your application's **Settings **in the Domain field. If you are using a [custom domain](/docs/customize/custom-domains), set this to the value of your custom domain instead.
      - `auth0:ClientId`: The ID of the Auth0 application you created in Auth0 Dashboard. You can find this in the Auth0 Dashboard under your application's **Settings **in the Client ID field.
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      To enable authentication in your ASP.NET OWIN application, go to the Configuration method of your Startup class and configure the cookie and OIDC middleware.

      It is essential that you register both the cookie middleware and the OpenID Connect middleware as both are required (in that order) for authentication to work. The OpenID Connect middleware handles the authentication with Auth0. Once users have authenticated, their identity is stored in the cookie middleware.

      In the code snippet, AuthenticationType is set to **Auth0**. Use AuthenticationType in the next section to challenge the OpenID Connect middleware and start the authentication flow. RedirectToIdentityProvider notification event constructs the correct logout URL.
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      To allow users to log in to your ASP.NET OWIN application, add a `Login` action to your controller.

      Call `HttpContext.GetOwinContext().Authentication.Challenge` and pass `"Auth0"` as the authentication scheme. This invokes the OIDC authentication handler that was registered earlier. Be sure to specify the corresponding `AuthenticationProperties`, including a `RedirectUri`.

      After successfully calling `HttpContext.GetOwinContext().Authentication.Challenge`, the user redirects to Auth0 and signed in to both the OIDC middleware and the cookie middleware upon being redirected back to your application. This will allow the users to be authenticated on subsequent requests.

      <Callout icon="file-lines" iconType="regular">
      ##### Checkpoint

      Now that you have configured Login, run your application to verify that:

      - Navigating to your `Login` action will redirect to Auth0
      - Entering your credentials will redirect you back to your application.
      </Callout>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      From your controller's action, call `HttpContext.GetOwinContext().Authentication.SignOut` with the `CookieAuthenticationDefaults.AuthenticationType` authentication scheme to log the user out of your application.

      Additionally, if you want to log the user out from Auth0 (this might also log them out of other applications that rely on Single Sign-On), call `HttpContext.GetOwinContext().Authentication.SignOut` with the `"Auth0"` authentication scheme.

      <Callout icon="file-lines" iconType="regular">
      ##### Checkpoint

      Now that you have configured Logout, run your application to verify that:

      - Navigating to your `Logout` action ensures the user is logged out.
      - During logout, you redirect to Auth0 and instantly redirect back to your application during log out.
      </Callout>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      After the middleware successfully retrieves the tokens from Auth0, it extracts the user's information and claims from the ID token and makes them available as `ClaimsIdentity`. Access the extracted information by using the `User` property on the controller.

      To create a user profile, retrieve a user's name, email address, and profile image from the `User` and pass it to the view from inside your controller.

      <Callout icon="file-lines" iconType="regular">
      ##### Checkpoint

      Now that you have set up your action to render the user's profile, run your application to verify that:

      - Navigating to your `Profile` action after being successfully logged in, shows the user's profile.
      </Callout>
    </Section>

    ## Next Steps
    Excellent work! If you made it this far, you should now have login, logout, and user profile information running in your application.

    This concludes our quickstart tutorial, but there is so much more to explore. To learn more about what you can do with Auth0, check out:

    - [Auth0 Dashboard](https://manage.auth0.com/) - Learn how to configure and manage your Auth0 tenant and applications
    - [Auth0 Marketplace](https://marketplace.auth0.com/) - Discover integrations you can enable to extend Auth0’s functionality
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <CodeGroup>
        <WebConfig/>
        <AccountController1/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <CodeGroup>
        <WebConfig/>
        <AccountController1/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
      <CodeGroup>
        <AccountController1/>
        <WebConfig/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <CodeGroup>
        <AccountController2/>
        <WebConfig/>
      </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[5].id}>
      <CodeGroup>
        <AccountController3/>
        <WebConfig/>
      </CodeGroup>
    </SideMenuSectionItem>

  </SideMenu>
</Recipe>
