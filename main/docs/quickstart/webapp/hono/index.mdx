---
title: "Add Login to Your Hono Application"
mode: wide
sidebarTitle: Hono
description: "This Quickstart demonstrates how to secure your Hono applications using Auth0 authentication. Follow the steps to add login, logout, and protected routes to a Hono app."
---

<Callout icon="pencil" color="#FFC107" iconType="solid">
  This Quickstart is currently in **Beta**. We'd love to hear your feedback!
</Callout>

<Note>
  **Prerequisites:**

  - **Node.js** 20 LTS or newer
  - **npm** 10+ or **yarn** 1.22+ or **pnpm** 8+
  - Optional: **jq** (for CLI automation) and **openssl** (to generate secure secrets)
  - Hono projects should use Hono >= 3.x (peer dependency)
</Note>

## Get Started

This quickstart shows the minimal, recommended way to secure a Hono application using `@auth0/auth0-hono`. It follows the repository's recommended patterns: environment-driven configuration, `app.use(auth(...))` middleware, and `requiresAuth()` for selective protection.

<Steps>
  <Step title="Create a new project" stepNumber={1}>
    Create a new folder and initialize a Node project.

    ```shellscript
    mkdir auth0-hono-app && cd auth0-hono-app
    npm init -y
    ```
  </Step>

  <Step title="Install dependencies" stepNumber={2}>
    Install Hono and the Auth0 middleware. Optionally install `tsx` for running TypeScript directly during development.

    ```shellscript
    npm install hono @auth0/auth0-hono
    npm install -D tsx
    ```
  </Step>

  <Step title="Create an Auth0 application" stepNumber={3}>
    Create an Auth0 Application in your Auth0 tenant (Regular Web Application) and record the **Domain**, **Client ID**, and **Client Secret**.

    <Tabs>
      <Tab title="CLI">
        (macOS) Example automation using Auth0 CLI + `jq`:

        ```shellscript
        AUTH0_APP_NAME="Hono Quickstart" && brew tap auth0/auth0-cli && brew install auth0 && auth0 login --no-input && auth0 apps create -n "${AUTH0_APP_NAME}" -t regular -c http://localhost:3000/auth/callback -l http://localhost:3000 -o http://localhost:3000 --reveal-secrets --json > auth0-details.json && CLIENT_ID=$(jq -r '.client_id' auth0-details.json) && CLIENT_SECRET=$(jq -r '.client_secret' auth0-details.json) && DOMAIN=$(auth0 tenants list --json | jq -r '.[] | select(.active == true) | .name') && echo "AUTH0_DOMAIN=${DOMAIN}" > .env && echo "AUTH0_CLIENT_ID=${CLIENT_ID}" >> .env && echo "AUTH0_CLIENT_SECRET=${CLIENT_SECRET}" >> .env && echo "BASE_URL=http://localhost:3000" >> .env && echo "AUTH0_SESSION_ENCRYPTION_KEY=$(openssl rand -hex 32)" >> .env && rm auth0-details.json && cat .env
        ```

        Use the generated `.env` or update values manually as needed.
      </Tab>

      <Tab title="Dashboard">
        Manual steps:

        1. Go to the [Auth0 Dashboard](https://manage.auth0.com/dashboard/)
        2. Applications → Create Application → **Regular Web Application**
        3. In the app settings set:

        **Allowed Callback URLs**
        ```
        http://localhost:3000/auth/callback
        ```

        **Allowed Logout URLs**
        ```
        http://localhost:3000
        ```

        **Allowed Web Origins**
        ```
        http://localhost:3000
        ```

        4. Copy **Domain**, **Client ID**, and **Client Secret** into a `.env` file (example below).
      </Tab>
    </Tabs>
  </Step>

  <Step title="Add configuration (.env)" stepNumber={4}>
    Create a `.env` file at your project root with these values:

    ```env
    AUTH0_DOMAIN=your-tenant.auth0.com
    AUTH0_CLIENT_ID=your_client_id
    AUTH0_CLIENT_SECRET=your_client_secret
    BASE_URL=http://localhost:3000
    AUTH0_SESSION_ENCRYPTION_KEY=your_32_char_min_secret
    # Optional for APIs
    AUTH0_AUDIENCE=https://api.yourapp.com
    ```

    Note: `AUTH0_SESSION_ENCRYPTION_KEY` must be at least 32 characters. Use `openssl rand -hex 32` to generate one.
  </Step>

  <Step title="Add Hono server with Auth0 middleware" stepNumber={5}>
    Create a `server.ts` file with the following example.

    ```typescript
    // server.ts
    import { Hono } from 'hono';
    import { auth, requiresAuth, Auth0Exception } from '@auth0/auth0-hono';

    const app = new Hono();

    // Configure auth middleware using environment variables.
    app.use(
      auth({
        domain: process.env.AUTH0_DOMAIN,
        clientID: process.env.AUTH0_CLIENT_ID,
        clientSecret: process.env.AUTH0_CLIENT_SECRET,
        baseURL: process.env.BASE_URL,
        session: {
          secret: process.env.AUTH0_SESSION_ENCRYPTION_KEY,
        },
      })
    );

    // Public route
    app.get('/', (c) => c.text('Public — no login required'));

    // Make most routes public, but protect /profile/* specifically
    app.use('/profile/*', requiresAuth());

    app.get('/profile', (c) => {
      const session = c.var.auth0Client?.getSession(c);
      const user = session?.user;
      return c.json({ message: 'Protected profile', user });
    });

    // Optional: handle Auth0-specific errors
    app.onError((err, c) => {
      if (err instanceof Auth0Exception) {
        console.error('Auth0 error', err);
        return err.getResponse();
      }
      return c.text(`Internal Server Error: ${err.message}`, 500);
    });

    export default app;
    ```

    Add a `package.json` script to run with `tsx` for development:

    ```json
    {
      "scripts": {
        "dev": "tsx server.ts"
      }
    }
    ```
  </Step>

  <Step title="Run your app" stepNumber={6}>
    Start the server and open `http://localhost:3000`.

    ```shellscript
    npm run dev
    ```
  </Step>
</Steps>

<Check>
  **Checkpoint**

  Your Hono app should be running on [http://localhost:3000](http://localhost:3000). The `/` route is public. Visiting `/profile` should redirect you to login (if not authenticated) and then return profile data after successful authentication.
</Check>

## Troubleshooting

<Accordion title="Common issues" >

  <Accordion title="Callback or Redirect Mismatch" >
    Cause: The callback URL configured in the Auth0 Dashboard does not exactly match `BASE_URL` + the callback route (e.g., `http://localhost:3000/auth/callback`).

    Fix:
    1. Verify `.env` `BASE_URL` value.
    2. Ensure Allowed Callback URLs in Auth0 Dashboard contain `http://localhost:3000/auth/callback`.
    3. Restart dev server after changes.
  </Accordion>

  <Accordion title="Session decryption / JWEDecryptionFailed" >
    Cause: `AUTH0_SESSION_ENCRYPTION_KEY` is missing or too short, or you changed it while cookies from an old secret remain.

    Fix:
    - Ensure `AUTH0_SESSION_ENCRYPTION_KEY` is at least 32 characters.
    - Clear browser cookies for localhost after changing the key.
    - Restart dev server.
  </Accordion>

  <Accordion title="Routes 404 (e.g., /auth/login returns 404)" >
    Cause: Middleware not installed or placed after route registration.

    Fix:
    - Ensure `app.use(auth(...))` runs before routes that depend on authentication.
    - Confirm package installed: `npm ls @auth0/auth0-hono`.
  </Accordion>

  <Accordion title="Missing environment variables in production" >
    Cause: Deployment platform not providing environment variables or using different names.

    Fix:
    - Map environment variables in your hosting provider dashboard to the names used in this quickstart.
    - For Cloudflare Workers, verify session/cookie handling is compatible with the platform.
  </Accordion>

</Accordion>

## Advanced Usage

- Selective protection: use `app.use(auth({ authRequired: false }))` to make routes public by default and `app.use('/private/*', requiresAuth())` to protect specific paths.
- Silent login: use `attemptSilentLogin()` middleware to try silent authentication for better UX.
- Custom login flow: call `login({...})` to customize forwarded query params, `redirectAfterLogin`, or silent login options.
- Token management: the middleware exposes access and ID tokens via the session; follow least-privilege for scopes and rotate refresh tokens safely.

## Best Practices & Security

- Keep secrets out of source control — use environment variables.
- Use a 32+ character `AUTH0_SESSION_ENCRYPTION_KEY`.
- Set cookie `secure` to `true` in production and set appropriate `sameSite` policy.
- Limit token scopes; use audience only when requesting access tokens for APIs.
- Catch `Auth0Exception` in `app.onError` to handle auth-specific errors cleanly.

---