# Auth0.swift Documentation Style Guide

> **Analysis Source**: This style guide is extracted from analyzing Auth0.swift repository documentation including README.md, EXAMPLES.md, FAQ.md, and V2_MIGRATION_GUIDE.md, supplemented with Auth0 quickstart documentation patterns.

## 1. Writing Style & Tone

### Voice & Perspective
- **Direct, instructional tone** using second person ("you")
- Active voice with imperative mood for instructions
- Examples:
  - ‚úÖ "Add the following line to your Podfile"
  - ‚úÖ "Store their credentials securely in the Keychain"
  - ‚úÖ "Configure the SDK"
  - ‚ùå "The SDK should be configured" (passive)
  - ‚ùå "One might want to configure..." (indirect)

### Technical Level
- **Intermediate developer focus** - assumes familiarity with:
  - iOS/macOS development basics
  - Xcode and Swift
  - Basic authentication concepts
- **Explains Auth0-specific concepts** clearly without over-simplifying
- **Provides context** for "why" when it matters for decision-making

### Personality
- **Professional and precise**, not casual
- **Helpful and clear**, not patronizing
- **Direct and efficient**, not verbose
- Avoids:
  - Exclamation marks (except in callout boxes for emphasis)
  - Overly friendly phrases ("Let's", "Great!", "Awesome!")
  - Marketing language or hyperbole

### Assumptions About Prior Knowledge
- ‚úÖ Assumes: Swift syntax, Xcode navigation, iOS app structure, Git basics
- ‚ùå Does not assume: Auth0 concepts, OAuth/OIDC details, SDK-specific patterns
- **Pattern**: Explain Auth0/OAuth concepts, link to docs for deep dives

## 2. Content Structure & Organization

### Opening Approach
Standard pattern for major sections:
1. **Link to API documentation** (when applicable)
2. **Brief overview** of what the feature does (1-2 sentences)
3. **Table of contents** for subsections (for longer sections)
4. **Core example** showing the most common use case

Example:
```markdown
## Web Auth (iOS / macOS / visionOS)

**See all the available features in the [API documentation ‚Üó](https://auth0.github.io/Auth0.swift/documentation/auth0/webauth)**

- [Web Auth signup](#web-auth-signup)
- [Web Auth configuration](#web-auth-configuration)
- [ID token validation](#id-token-validation)

### Web Auth signup

You can make users land directly on the Signup page...
```

### Section Flow & Hierarchy
**Typical progression**:
1. Prerequisites / Requirements
2. Installation
3. Configuration
4. Basic usage (most common pattern)
5. Alternative approaches / Advanced options
6. Error handling
7. Troubleshooting

**Hierarchy patterns**:
- `##` for major API areas (Web Auth, Authentication API, etc.)
- `###` for specific features within an API area
- `####` for sub-options or variations
- **Bold** for inline emphasis of important terms

### Information Hierarchy Principles
1. **Most common use case first**
2. Alternative approaches in collapsible `<details>` sections
3. Prerequisites before implementation steps
4. Configuration options after basic example
5. Error handling near the end
6. Advanced features clearly marked

### Length & Depth
- **README**: Comprehensive but focused on getting started quickly
  - Installation: detailed
  - Configuration: complete setup instructions
  - Basic usage: single clear example per major feature
  - Links to EXAMPLES.md for comprehensive details

- **EXAMPLES.md**: Exhaustive reference
  - Every method variation shown
  - Multiple programming styles (callbacks, async/await, Combine)
  - Platform-specific variations documented

- **FAQ.md**: Solution-oriented
  - Direct questions as headers
  - Immediate answers
  - Code examples for solutions
  - Links to related documentation

## 3. Code Example Patterns

### Code Style
```swift
// ‚úÖ Preferred: Clean, focused, no comments unless necessary
Auth0
    .webAuth()
    .scope("openid profile email")
    .start { result in
        switch result {
        case .success(let credentials):
            print("Obtained credentials: \(credentials)")
        case .failure(let error):
            print("Failed with: \(error)")
        }
    }
```

**Formatting conventions**:
- 4 spaces indentation
- Method chaining on separate lines
- Closures with explicit parameter names
- Always use `switch` over `if case` for Result handling
- Print statements for demonstration (not real implementation)

### Example Complexity
- **Start minimal**: Show the simplest working code first
- **Progressive disclosure**: Add complexity in subsequent examples
- **Complete**: Examples should be runnable (not pseudo-code)
- **Realistic**: Use realistic variable names, not `foo`/`bar`

Example progression:
```swift
// 1. Basic example (most common)
Auth0.webAuth().start { result in
    // ...
}

// 2. With configuration
Auth0
    .webAuth()
    .audience("https://example.com/api")
    .scope("openid profile email read:todos")
    .start { result in
        // ...
    }

// 3. Alternative syntax in <details>
// async/await version
// Combine version
```

### Code Comments
- **Minimize comments in code blocks**
- Use explanatory text *outside* code blocks instead
- Inline comments only when:
  - Clarifying a non-obvious parameter
  - Indicating where real logic should go (`// ...`)
  - Showing output (`// "openid profile email" will be used`)

```swift
// ‚ùå Over-commented
Auth0
    .webAuth() // Create a Web Auth instance
    .scope("openid profile email") // Set the scope
    .start { result in // Start the authentication flow
        // Handle the result
    }

// ‚úÖ Let the code speak, explain outside
Auth0
    .webAuth()
    .scope("openid profile email")
    .start { result in
        // ...
    }
```

### Multiple Languages / Patterns
Use **collapsible `<details>` sections** for alternative approaches:

```markdown
Auth0.webAuth().start { result in
    // ...
}

<details>
  <summary>Using async/await</summary>

\```swift
do {
    let credentials = try await Auth0.webAuth().start()
} catch {
    // ...
}
\```
</details>

<details>
  <summary>Using Combine</summary>

\```swift
Auth0.webAuth()
    .start()
    .sink(receiveCompletion: { ... }, receiveValue: { ... })
    .store(in: &cancellables)
\```
</details>
```

**Pattern**: Callback syntax first (most universal), then async/await, then Combine.

## 4. Developer Guidance & UX

### Setup Instructions Detail Level
- **Installation**: Very detailed
  - Exact commands to copy/paste
  - Multiple package managers shown
  - Version numbers specified

- **Configuration**: Step-by-step
  - Dashboard instructions with exact navigation
  - File content to copy (e.g., Auth0.plist)
  - What to replace (YOUR_CLIENT_ID, etc.)
  - Screenshots for visual steps

Example pattern:
```markdown
#### Configure the callback and logout URLs

Go to the settings page of your [Auth0 application](https://manage.auth0.com/#/applications/) and add the corresponding URLs to **Allowed Callback URLs** and **Allowed Logout URLs**, according to the platform of your app.

##### iOS

\```text
https://YOUR_AUTH0_DOMAIN/ios/YOUR_BUNDLE_IDENTIFIER/callback,
YOUR_BUNDLE_IDENTIFIER://YOUR_AUTH0_DOMAIN/ios/YOUR_BUNDLE_IDENTIFIER/callback
\```

<details>
  <summary>Example</summary>

If your iOS bundle identifier were `com.example.MyApp`...
</details>
```

### Troubleshooting Approach
- **Anticipate common issues** and address them proactively
- Use callout boxes to highlight potential problems
- Provide workarounds when platform limitations exist

**Callout box patterns**:
```markdown
> [!NOTE]
> Informational context or helpful tips

> [!IMPORTANT]
> Critical information that affects functionality

> [!WARNING]
> Potential security or data loss concerns

> [!TIP]
> Suggestions for better approaches

> [!CAUTION]
> Thread-safety, concurrency, or data integrity warnings
```

### Next Steps Guidance
- **Link to related features** using inline links
- **Provide a "Next steps" section** in quickstarts
- Use bullet points with descriptive links:

```markdown
### Next steps

- [**Store credentials**](EXAMPLES.md#store-credentials) - store the user's credentials securely in the Keychain.
- [**Retrieve user information**](EXAMPLES.md#retrieve-user-information) - fetch the latest user information from the `/userinfo` endpoint.
```

### Resource Linking Strategy
1. **API docs** for comprehensive feature documentation
2. **EXAMPLES.md** for detailed code examples
3. **FAQ.md** for common issues
4. **Auth0 docs** for conceptual understanding
5. **Apple docs** for platform-specific APIs

Link pattern:
- External links: `[Link Text ‚Üó](url)`
- Internal links: `[Link Text](path)`
- API docs: Use full titles like "API documentation" not just "docs"

## 5. Visual & Formatting Elements

### Headers & Sections
```markdown
# Top-level (repository/guide title)

## Major sections (Feature areas)

### Sub-features or specific topics

#### Variations or options
```

**Naming conventions**:
- Use title case for major sections: "Web Auth Configuration"
- Use sentence case for specific features: "Use a custom URLSession instance"
- Platform indicators in parentheses: "(iOS / macOS / visionOS)"

### Callouts & Highlights
Use GitHub-flavored Markdown callouts:

```markdown
> [!NOTE]
> Additional context or helpful information

> [!IMPORTANT]
> Critical configuration requirements

> [!WARNING]
> Security considerations or deprecated features

> [!TIP]
> Best practices or alternative approaches

> [!CAUTION]
> Thread-safety or data integrity concerns
```

**Usage guidelines**:
- Place callouts *after* the primary instruction/example
- Keep callout text concise (1-3 sentences)
- Use sparingly - too many diminish impact

### Lists & Bullets
**Unordered lists** for:
- Features or options (no priority)
- Requirements or dependencies
- Related links

**Ordered lists** for:
- Sequential steps
- Prerequisites before setup
- Decision trees (if X, then Y)

**Tables** for:
- Comparing options (e.g., different SSO behaviors)
- Reference information (platform versions)
- Before/after comparisons in migration guides

### Code Blocks
Always specify the language:

````markdown
```swift
// Swift code
```

```xml
<!-- XML/plist content -->
```

```text
// Plain text (URLs, file paths)
```

```ruby
# Ruby (Podfile)
```
````

## 6. Prerequisites & Environment Setup Coverage

### Prerequisites Approach
**Always include**:
1. Platform version requirements
2. Xcode version requirements
3. Swift version requirements
4. External dependencies (if any)
5. Auth0 account requirements

**Format example**:
```markdown
### Requirements

- iOS 14.0+ / macOS 11.0+ / tvOS 14.0+ / watchOS 7.0+
- Xcode 16.x
- Swift 6.0+
```

**Placement**:
- Requirements section near the top (after intro, before installation)
- Use callout boxes to emphasize support policy changes

### Environment Setup Detail
**Auth0 Dashboard setup**:
1. Link to specific dashboard page
2. Application type specification (Native, SPA, etc.)
3. Exact field names in dashboard (bold)
4. What values to enter
5. Why each configuration matters (optional but helpful)

Example:
```markdown
Head to the [Auth0 Dashboard](https://manage.auth0.com/#/applications/) and create a new **Native** application.

> [!IMPORTANT]
> Make sure that the Auth0 application type is **Native**. Otherwise, you might run into errors due to the different configuration of other application types.
```

### Dependency Management
**For each package manager**:
- Show installation command
- Show configuration file content
- Specify version constraints
- Note any platform-specific considerations

**Pattern**:
```markdown
#### Using the Swift Package Manager

Open the following menu item in Xcode:

**File > Add Package Dependencies...**

In the **Search or Enter Package URL** search box enter this URL:

\```text
https://github.com/auth0/Auth0.swift
\```

Then, select the dependency rule and press **Add Package**.
```

### Version Specification
- Use specific version numbers in examples (`~> 2.16`)
- Use version ranges where appropriate (`14.0+`)
- Link to support policy for version dropping policy

## 7. Configuration & External Service Setup Patterns

### Service Configuration
**Multi-step external setup** (like Auth0 Dashboard):

1. **Link to the external service** with direct deep link if possible
2. **Specify the exact page/section** to navigate to
3. **Use bold for UI element names** ("Allowed Callback URLs")
4. **Show exact values to enter** in code blocks
5. **Explain the purpose** of each configuration
6. **Provide complete examples** in expandable sections

Example structure:
```markdown
#### Configure the callback and logout URLs

The callback and logout URLs are the URLs that Auth0 invokes to redirect back to your app.

Since callback and logout URLs can be manipulated, you will need to add your URLs to the **Allowed Callback URLs** and **Allowed Logout URLs** fields in the settings page of your Auth0 application.

Go to the settings page of your [Auth0 application](https://manage.auth0.com/#/applications/) and add the corresponding URLs...

##### iOS

\```text
https://YOUR_AUTH0_DOMAIN/ios/YOUR_BUNDLE_IDENTIFIER/callback
\```

<details>
  <summary>Example</summary>

If your iOS bundle identifier were `com.example.MyApp` and your Auth0 Domain were `example.us.auth0.com`, then this value would be:

\```text
https://example.us.auth0.com/ios/com.example.MyApp/callback
\```
</details>
```

### Credential & API Key Management
**Configuration pattern**:

1. **Show the configuration file structure first**
2. **Use placeholder values** that are obvious (YOUR_CLIENT_ID)
3. **Explain where to find real values**
4. **Offer programmatic alternative** for flexibility

```markdown
#### Configure the Client ID and Domain with a plist

Create a `plist` file named `Auth0.plist` in your app bundle with the following content:

\```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>ClientId</key>
    <string>YOUR_AUTH0_CLIENT_ID</string>
    <key>Domain</key>
    <string>YOUR_AUTH0_DOMAIN</string>
</dict>
</plist>
\```

#### Configure the Client ID and Domain programmatically

<details>
  <summary>For Web Auth</summary>

\```swift
Auth0
    .webAuth(clientId: "YOUR_AUTH0_CLIENT_ID", domain: "YOUR_AUTH0_DOMAIN")
    // ...
\```
</details>
```

### Step-by-Step Guidance
**For complex multi-step setup**:

1. **Number the steps** clearly
2. **One action per step**
3. **Include verification** where possible
4. **Screenshots** for visual steps (Xcode settings, Dashboard UI)

Example:
```markdown
##### 1. Configure the Team ID and bundle identifier

Scroll to the end of the settings page of your Auth0 application and open **Advanced Settings > Device Settings**. In the **iOS** section, set **Team ID** to your [Apple Team ID](link), and **App ID** to your app's bundle identifier.

![Screenshot of the iOS section](image-url)

This will add your app to your Auth0 tenant's `apple-app-site-association` file.

##### 2. Add the associated domain capability

In Xcode, go to the **Signing and Capabilities** [tab](link) of your app's target settings, and press the **+ Capability** button. Then select **Associated Domains**.
```

### Configuration Examples
**Always provide**:
- Complete, valid example
- Explanation of each placeholder
- Link to where to find real values
- Common mistakes to avoid (in callouts)

## 8. Technology Evolution & Current Practices

### Command Currency
- **Use current Swift syntax** (Swift 6.0+)
- **Reference current iOS versions** (iOS 14+)
- **Current package managers** (SPM first, then CocoaPods, then Carthage)
- **Modern APIs** (ASWebAuthenticationSession over deprecated SFAuthenticationSession)

### Framework Compatibility
**Platform-specific patterns**:
- Show iOS pattern as primary
- macOS variations in subsections or same section when similar
- Note platform differences explicitly

```markdown
## Web Auth (iOS / macOS / visionOS)

### Configure the callback URLs

##### iOS

\```text
https://YOUR_AUTH0_DOMAIN/ios/YOUR_BUNDLE_IDENTIFIER/callback
\```

##### macOS

\```text
https://YOUR_AUTH0_DOMAIN/macos/YOUR_BUNDLE_IDENTIFIER/callback
\```
```

### Deprecated vs Current
**For deprecated features**:
- Mention deprecation clearly
- Provide modern replacement
- Explain why it changed (if security/performance related)
- Show before/after in migration guides

Example:
```markdown
#### `tokenExchange(withParameters:)`

You should use `codeExchange(withCode:codeVerifier:redirectURI:)` instead.

<details>
  <summary>Before / After</summary>

\```swift
// Before
Auth0.authentication()
    .tokenExchange(withParameters: ["key": "value"])
    .start { result in }

// After
Auth0.authentication()
    .codeExchange(withCode: code, codeVerifier: codeVerifier, redirectURI: redirectURI)
    .parameters(["key": "value"])
    .start { result in }
\```
</details>
```

### Ecosystem Integration
- **Prefer standard patterns** (Result type, async/await, Combine)
- **Follow Apple HIG** for capabilities (Face ID, Universal Links)
- **Reference Apple documentation** for platform features
- **Use Xcode terminology** exactly ("Signing & Capabilities" tab)

## 9. Error Prevention & Troubleshooting Approach

### Problem Anticipation
**Common issues addressed proactively**:

1. **Configuration mistakes**
   - Wrong application type in Auth0 Dashboard
   - Missing URL schemes
   - Incorrect callback URLs

2. **Platform limitations**
   - ASWebAuthenticationSession alert box (FAQ dedicated to this)
   - Universal Links requirements (paid developer account)
   - Thread-safety concerns

3. **Version incompatibilities**
   - Support policy clearly stated
   - Platform version requirements

### Troubleshooting Organization
**FAQ structure**:
- Question as header (H2)
- Direct answer immediately
- Code solution if applicable
- Link to related topics
- "Go up" link at the end

Example:
```markdown
## 1. How can I disable the _login_ alert box?

![Screenshot]

Under the hood, Auth0.swift uses `ASWebAuthenticationSession` by default...

### If you don't need SSO

#### Use ephemeral sessions

\```swift
Auth0.webAuth()
    .useEphemeralSession()
    .start { result in }
\```

[Go up ‚§¥](#frequently-asked-questions)
```

### Error Context
**For each major error type**:

1. **Dedicated error section** in feature documentation
2. **Link to error type API docs**
3. **Explain cause property** for underlying errors
4. **Warning against parsing error messages**

```markdown
### Web Auth errors

Web Auth will only produce `WebAuthError` error values. You can find the underlying error (if any) in the `cause: Error?` property of the `WebAuthError`.

> [!WARNING]
> Do not parse or otherwise rely on the error messages to handle the errors. The error messages are not part of the API and can change. Run a switch statement on the [error cases](link) instead, which are part of the API.
```

### Validation & Checkpoints
**For setup steps**:
- Provide validation commands/checks where possible
- Show expected output
- Link to troubleshooting if validation fails

Example:
```markdown
4. **Run on device**
   - Connect your device to your Mac
   - Select your device from the device menu in Xcode
   - Press **Cmd+R** or click the **Run** button
   - If prompted, trust the developer certificate on your device (**Settings > General > VPN & Device Management**)
```

## 10. Special Patterns & Best Practices

### Migration Guide Pattern
When documenting breaking changes:

1. **Table of Contents** first (critical for long documents)
2. **Categorize changes** (Types Removed, Methods Changed, Behavior Changes)
3. **Show before/after** in collapsible details
4. **Explain the reason** for breaking changes
5. **Provide clear migration path**

### Thread-Safety Documentation
For APIs with thread-safety concerns:

```markdown
> [!CAUTION]
> The Credentials Manager is not thread-safe, except for the following methods:
>
> - `credentials()`
> - `renew()`
>
> To avoid concurrency issues, do not call its non thread-safe methods and properties from different threads without proper synchronization.
```

### Early Access Features
For beta/EA features:

```markdown
### DPoP [EA]

> [!NOTE]
> This feature is currently available in [Early Access](https://auth0.com/docs/troubleshoot/product-lifecycle/product-release-stages#early-access). Please reach out to Auth0 support to get it enabled for your tenant.

[Implementation details...]

> [!IMPORTANT]
> DPoP will only be used for new user sessions created after enabling it...
```

### Parameter Documentation
For optional parameters with defaults:

```swift
// Show usage with default
Auth0.webAuth().start { result in }

// Show explicit parameter when discussing it
Auth0.webAuth()
    .scope("openid profile email") // Default if not specified
    .start { result in }
```

---

## Summary: Key Takeaways for Writing Auth0.swift Documentation

### ‚úÖ Do:
1. Start with the simplest working example
2. Use collapsible sections for alternatives (async/await, Combine)
3. Include both configuration file and programmatic options
4. Anticipate common problems and address them proactively
5. Use callout boxes appropriately (NOTE, IMPORTANT, WARNING, etc.)
6. Link generously to related documentation
7. Show platform-specific variations explicitly
8. Provide complete, runnable code examples
9. Use tables for comparing options or behaviors
10. Include screenshots for visual setup steps

### ‚ùå Don't:
1. Use casual or overly friendly language
2. Assume knowledge of Auth0-specific concepts
3. Over-comment code examples
4. Hide critical information in walls of text
5. Use passive voice for instructions
6. Parse or rely on error message strings
7. Mix platform-specific instructions without clear labels
8. Provide pseudo-code or incomplete examples
9. Use exclamation marks liberally
10. Link without descriptive text

### üéØ Golden Rule:
**Make it possible for developers to copy-paste and succeed quickly, while providing depth for those who need to understand the "why" behind decisions.**

---

## Appendix: Template Patterns

### Feature Documentation Template

```markdown
## Feature Name (iOS / macOS / Platform)

**See all the available features in the [API documentation ‚Üó](link)**

- [Sub-feature 1](#sub-feature-1)
- [Sub-feature 2](#sub-feature-2)

### Sub-feature 1

Brief explanation of what this sub-feature does and when to use it.

\```swift
// Simplest example
Auth0.api().method()
\```

<details>
  <summary>Using async/await</summary>

\```swift
// async/await version
\```
</details>

> [!NOTE]
> Additional context if needed

[Go up ‚§¥](#feature-name)
```

### Configuration Section Template

```markdown
#### Configure [Thing]

Explanation of why this configuration is needed.

1. **Step name**
   - Sub-instruction with specific details
   - Use **bold** for UI elements
   - Link to [external resources](url) where helpful

\```format
configuration code or value
\```

2. **Next step**
   - Continue with clear instructions

<details>
  <summary>Example</summary>

If your specific case were X, then Y.
</details>

> [!IMPORTANT]
> Critical information about this configuration
```

### Error Handling Template

```markdown
### API Name errors

Brief explanation of error handling for this API.

\```swift
switch result {
case .success(let value):
    // Handle success
case .failure(let error):
    // error is ErrorType, check error.cause for underlying error
}
\```

> [!WARNING]
> Do not parse or otherwise rely on the error messages. Run a switch statement on the [error cases](link) instead.

[Go up ‚§¥](#section)
```
