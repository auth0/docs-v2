---
title: "Ajouter une fonctionnalité de connexion à votre Application Java Servlet"
permalink: "interactive"
'description': "Ce guide explique comment intégrer Auth0 dans n’importe quelle application Java Servlet, nouvelle ou existante."
'og:title': "Ajouter une fonctionnalité de connexion à votre Application Java Servlet"
'og:description': "Ce guide explique comment intégrer Auth0 dans n’importe quelle application Java Servlet, nouvelle ou existante."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/java.png"
'twitter:title': "Ajouter une fonctionnalité de connexion à votre Application Java Servlet"
'twitter:description': "Ce guide explique comment intégrer Auth0 dans n’importe quelle application Java Servlet, nouvelle ou existante."
sidebarTitle: Java
---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Web from "/snippets/quickstart/webapp/java/web.xml.mdx";
import Authenticationcontrollerprovider from "/snippets/quickstart/webapp/java/AuthenticationControllerProvider.java.mdx";
import Loginservlet from "/snippets/quickstart/webapp/java/LoginServlet.java.mdx";
import Callbackservlet from "/snippets/quickstart/webapp/java/CallbackServlet.java.mdx";
import Homeservlet from "/snippets/quickstart/webapp/java/HomeServlet.java.mdx";
import Logoutservlet from "/snippets/quickstart/webapp/java/LogoutServlet.java.mdx";

import {AuthCodeGroup} from "/snippets/AuthCodeGroup.jsx";

export const sections = [
  { id: "configuration-d-auth0", title: "Configuration d’Auth0" },
  { id: "intégrer-auth0-dans-votre-application", title: "Intégrer Auth0 dans votre application" },
  { id: "configurer-votre-application-java", title: "Configurer votre application Java" },
  { id: "créer-l-authenticationcontroller", title: "Créer l’AuthenticationController" },
  { id: "redirection-de-connexion", title: "Redirection de connexion" },
  { id: "gérer-les-jetons", title: "Gérer les jetons" },
  { id: "afficher-la-page-d-accueil", title: "Afficher la page d’accueil" },
  { id: "gérer-la-déconnexion", title: "Gérer la déconnexion" },
  { id: "exécuter-l-exemple", title: "Exécuter l’exemple" }
]

<Recipe>
  <Content>
    Auth0 vous permet d’ajouter rapidement l’authentification et de pouvoir accéder aux informations relatives au profil utilisateur dans votre application. Ce guide explique comment intégrer Auth0 dans n’importe quelle application Java Servlet, nouvelle ou existante.

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Pour utiliser les services Auth0, vous devez avoir une application installée dans Auth0 Dashboard. L’application Auth0 est l’endroit où vous allez configurer le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet avec lequel vous souhaitez effectuer l’intégration. Dans Auth0, chaque application se voit attribuer un identifiant client unique alphanumérique que votre code d’application utilisera pour appeler les API Auth0 via la trousse SDK.

      Tous les paramètres que vous configurez à l’aide de ce guide de démarrage rapide seront automatiquement mis à jour pour votre application dans le [Tableau de bord](https://manage.auth0.com/#/), qui est l’endroit où vous pourrez gérer vos applications à l’avenir.

      Si vous préférez explorer une configuration complète, consultez plutôt un exemple d’application.

      ### Configuration des URL de rappel

      Une URL de rappel est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas redirigés vers votre application après s’être connectés.

      <Info>
      Si vous suivez notre exemple de projet, définissez cette URL comme suit : `http://localhost:3000``/callback`.
      </Info>

      ### Configuration des URL de déconnexion

      Une URL de déconnexion est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront un message d’erreur.

      <Info>
      Si vous suivez notre exemple de projet, définissez cette URL comme suit : `http://localhost:3000/logout`.
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      ### Régler les dépendances.

      Pour intégrer votre application Java avec Auth0, ajoutez les dépendances suivantes :

      - **javax.servlet-api**

        : est la bibliothèque qui vous permet de créer des servlets Java. Vous devez ensuite ajouter une dépendance de serveur comme Tomcat ou Gretty, selon votre choix. Consultez notre code d’exemple pour plus d’informations.
      - **auth0-java-mvc-commons** : est la [bibliothèque Java](https://github.com/auth0/auth0-java-mvc-common) qui vous permet d’utiliser Auth0 avec Java pour des applications Web MVC côté serveur. Elle génère l’URL d’autorisation que vous devez appeler pour authentifier et valide le résultat reçu au retour afin d’obtenir finalement les [jetons Auth0](https://auth0.com/docs/tokens) qui identifient l’utilisateur.

      Si vous utilisez Gradle, ajoutez-les à votre `build.gradle` :

      ```
      // build.gradle
      compile 'javax.servlet:javax.servlet-api:3.1.0'
      compile 'com.auth0:mvc-auth-commons:1.+'W
      ```

      Si vous utilisez Maven, ajoutez-les à votre fichier `pom.xml` :

      ```html
      <!-- pom.xml -->
      <dependency>
      <groupId>com.auth0</groupId>
      <artifactId>mvc-auth-commons</artifactId>
      <version>[1.0, 2.0)</version>
      </dependency>
      <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>javax.servlet-api</artifactId>
      <version>3.1.0</version>
      </dependency>
      ```
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Votre application Java a besoin de certaines informations pour s’authentifier auprès de votre compte Auth0. Les exemples lisent ces informations à partir du fichier descripteur de déploiement `src/main/webapp/WEB-INF/web.xml`, mais vous pouvez les stocker ailleurs.

      Ces informations seront utilisées pour configurer la bibliothèque **auth0-java-mvc-commons** afin de permettre aux utilisateurs de se connecter à votre application. Pour en savoir plus sur la bibliothèque, y compris ses différentes options de configuration, consultez la [documentation de la bibliothèque](https://github.com/auth0/auth0-java-mvc-common/blob/master/README.md).

      ### Vérifier les attributs remplis

      Si vous avez téléchargé cet exemple en utilisant le bouton **Download Sample (Télécharger l’exemple)**, les attributs `domain`, `clientId` et `clientSecret` seront remplis pour vous. Vous devez vérifier que les valeurs sont correctes, surtout si vous avez plusieurs applications Auth0 dans votre compte.

      ### Structure du projet

      L’exemple de projet, qui peut être téléchargé en utilisant le bouton **Download Sample (Télécharger l’exemple)** a la structure suivante :

      ```
      - src
      -- main
      ---- java
      ------ com
      -------- auth0
      ---------- example
      ------------ Auth0Filter.java
      ------------ AuthenticationControllerProvider.java
      ------------ HomeServlet.java
      ------------ CallbackServlet.java
      ------------ LoginServlet.java
      ------------ LogoutServlet.java
      ---- webapp
      ------ WEB-INF
      -------- jsp
      ---------- home.jsp
      -------- web.xml

      build.gradle
      ```

      Le projet contient un seul JSP : `home.jsp` qui affichera les jetons associés à l’utilisateur après une connexion réussie et proposera l’option de déconnexion.

      Le projet contient un WebFilter : le `Auth0Filter.java` qui vérifiera l’existence de jetons avant de donner à l’utilisateur accès à notre chemin protégé `/portal/*`. Si les jetons n’existent pas, la requête sera redirigée vers `LoginServlet`.

      Le projet contient également quatre servlets :

      - `LoginServlet.java` : Appelé lorsque l’utilisateur essaie de se connecter. Le servlet utilise les paramètres `client_id` et `domain` pour créer une URL d’autorisation valide et y redirige l’utilisateur.
      - `CallbackServlet.java` : Le servlet enregistre les requêtes adressées à notre URL de rappel et traite les données pour obtenir les identifiants. Après une connexion réussie, les identifiants sont ensuite enregistrés dans la HttpSession de la requête.
      - `HomeServlet.java` : Le servlet lit les jetons précédemment enregistrés et les affiche sur la ressource `home.jsp`.
      - `LogoutServlet.java` : Appelé lorsque l’utilisateur clique sur le lien de déconnexion. Le servlet invalide la session de l’utilisateur et redirige l’utilisateur vers la page de connexion, gérée par `LoginServlet`.
      - `AuthenticationControllerProvider.java` : Responsable de la création et de la gestion d’une seule instance de `AuthenticationController`
      </Section>

      <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      Pour permettre aux utilisateurs de s’authentifier, créez une instance de l’`AuthenticationController` fournie par la trousse SDK `auth0-java-mvc-commons` en utilisant le `domain`, `clientId`, et `clientSecret`. L’exemple présente comment configurer le composant pour l’utiliser avec des jetons signés à l’aide de l’algorithme de signature asymétrique RS256, en précisant un `JwkProvider` pour récupérer la clé publique utilisée pour vérifier la signature du jeton. Consultez le [référentiel jwks-rsa-java](https://github.com/auth0/jwks-rsa-java) pour en savoir plus sur les options de configuration supplémentaires. Si vous utilisez HS256, il n’est pas nécessaire de configurer `JwkProvider`.

      <Info>
      `AuthenticationController` ne stocke aucun contexte et est destiné à être réutilisé. Une création inutile peut entraîner la génération de ressources supplémentaires, ce qui peut avoir une incidence sur les performances.
      </Info>
      </Section>

      <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      Pour permettre aux utilisateurs de se connecter, votre application les redirigera vers la page de Connexion universelle. En utilisant l’instance `AuthenticationController` , vous pouvez générer l’URL de redirection en appelant la méthode `buildAuthorizeUrl(HttpServletRequest request`, `HttpServletResponse response`, `String redirectUrl)`. L’URL de redirection doit être celle qui a été ajoutée aux **URL de rappel autorisées** de votre application Auth0.
      </Section>

      <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      Après que l’utilisateur s’est connecté, le résultat sera reçu dans notre `CallbackServlet` via une requête HTTP GET ou POST. Comme nous utilisons le flux de code d’autorisation (par défaut), une requête GET sera envoyée. Si vous avez configuré la bibliothèque pour le flux implicite, une requête POST sera plutôt envoyée.

      La requête contient le contexte d’appel que la bibliothèque a précédemment défini en générant l’URL d’autorisation avec `AuthenticationController`. Lorsqu’il est passé au contrôleur, vous recevez soit une instance `Tokens` valide soit une Exception indiquant ce qui a mal tourné. En cas d’appel réussi, vous devez enregistrer les identifiants afin de pouvoir y accéder ultérieurement. Vous pouvez utiliser `HttpSession` de la requête en utilisant la classe `SessionsUtils` comprise dans la bibliothèque.

      <Info>
      Il est recommandé d’enregistrer le moment où nous avons demandé les jetons ainsi que la valeur `expiresIn` reçue, afin que la prochaine fois que nous utiliserons le jeton, nous puissions vérifier s’il a déjà expiré ou s’il est encore valide. Pour les besoins de cet exemple, nous ignorerons cette validation.
      </Info>
      </Section>

      <Section id={sections[6].id} title={sections[6].title} stepNumber="7">
      Maintenant que l’utilisateur est authentifié (les jetons existent), `Auth0Filter` leur permettra d’accéder à nos ressources protégées. Dans le `HomeServlet` nous obtenons les jetons de la session de la requête et les définissons comme l’attribut `userId` afin qu’ils puissent être utilisés dans le code JSP.
      </Section>

      <Section id={sections[7].id} title={sections[7].title} stepNumber="8">
      Pour gérer adéquatement la déconnexion, nous devons effacer la session et déconnecter l’utilisateur d’Auth0. Cette opération est gérée dans `LogoutServlet` de notre exemple d’application.

      Tout d’abord, nous effaçons la session en appelant `request.getSession().invalidate()`. Nous générons ensuite l’URL de déconnexion, en veillant à inclure le paramètre de requête `returnTo` qui est l’endroit où l’utilisateur sera redirigé après la déconnexion. Enfin, nous redirigeons la réponse vers notre URL de déconnexion.
      </Section>

      <Section id={sections[8].id} title={sections[8].title} stepNumber="9">
      Pour exécuter l’exemple à partir d’un terminal, placez-vous dans le dossier racine du projet et exécutez la ligne suivante :

      `./gradlew clean app`

      Après quelques secondes, l’application sera accessible sur `http://localhost:3000/`. Essayez d’accéder à la ressource protégée http://localhost:3000/portal/home et notez comment vous êtes redirigé par `Auth0Filter` vers la page de connexion Auth0. Le gadget logiciel affiche toutes les connexions via réseaux sociaux et de bases de données que vous avez définies pour cette application dans le [tableau de bord](https://manage.auth0.com/#/).

      <Frame>![null](/docs/images/fr-ca/cdy7uua7fh8z/7L6lZ6xCi1L7sJBFZUPb9g/215ad0b724c138290b0b217edb5ddf96/Login_Screen_-_French.png)</Frame>

      Vous serez en mesure de voir le contenu de la page d’accueil après une authentification réussie.

      <Frame>![null](/docs/images/fr-ca/cdy7uua7fh8z/FzK3jxfSGoeIDYQamxnJl/6b608e39ff39e044644193cfd2ee0f69/java-step-9-2.png)</Frame>

      Déconnectez-vous en cliquant sur le bouton **logout (déconnexion)** en haut à droite de la page d’accueil.
      </Section>

    ## Étapes suivantes

    Beau travail! Si vous en êtes arrivé là, vous devriez avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Cela conclut notre tutoriel de démarrage rapide, mais il y a tellement plus à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    *   [Auth0 Dashboard](https://manage.auth0.com/#) : apprenez à configurer et gérer votre locataire et vos applications Auth0
    *   [Trousse SDK auth0-java-mvc-common](https://github.com/auth0/auth0-java-mvc-common) : explorez en détail la trousse SDK utilisée dans ce tutoriel
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) : découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <AuthCodeGroup>
          <Web/>
          <Authenticationcontrollerprovider/>
          <Loginservlet/>
          <Callbackservlet/>
          <Homeservlet/>
          <Logoutservlet/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[3].id}>
        <AuthCodeGroup>
          <Authenticationcontrollerprovider/>
          <Web/>
          <Loginservlet/>
          <Callbackservlet/>
          <Homeservlet/>
          <Logoutservlet/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[4].id}>
        <AuthCodeGroup>
          <Loginservlet/>
          <Web/>
          <Authenticationcontrollerprovider/>
          <Callbackservlet/>
          <Homeservlet/>
          <Logoutservlet/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[5].id}>
        <AuthCodeGroup>
          <Callbackservlet/>
          <Web/>
          <Authenticationcontrollerprovider/>
          <Loginservlet/>
          <Homeservlet/>
          <Logoutservlet/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[6].id}>
        <AuthCodeGroup>
          <Homeservlet/>
          <Web/>
          <Authenticationcontrollerprovider/>
          <Loginservlet/>
          <Callbackservlet/>
          <Logoutservlet/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[7].id}>
        <AuthCodeGroup>
          <Logoutservlet/>
          <Web/>
          <Authenticationcontrollerprovider/>
          <Loginservlet/>
          <Callbackservlet/>
          <Homeservlet/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[8].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

    </SideMenu>
</Recipe>
