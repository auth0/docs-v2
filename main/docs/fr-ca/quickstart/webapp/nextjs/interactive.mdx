---
title: "Ajouter une connexion à votre application Next.js"
permalink: "interactive"
'description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Next.js, nouvelle ou existante, à l’aide de la trousse SDK Next.js Auth0."
'og:title': "Ajouter une connexion à votre application Next.js"
'og:description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Next.js, nouvelle ou existante, à l’aide de la trousse SDK Next.js Auth0."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/media/platforms/nginx-plus.png"
'twitter:title': "Ajouter une connexion à votre application Next.js"
'twitter:description': "Ce guide explique comment intégrer Auth0 à n’importe quelle application Next.js, nouvelle ou existante, à l’aide de la trousse SDK Next.js Auth0."
sidebarTitle: Next.js
---


import {AuthCodeGroup} from "/snippets/AuthCodeGroup.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx"
import ConfigureSDK from "/snippets/quickstart/webapp/nextjs/configure-the-sdk.mdx"
import CreateAuth0SDKClient from "/snippets/quickstart/webapp/nextjs/create-the-auth0-sdk-client.mdx"
import CreateLoginPage from "/snippets/quickstart/webapp/nextjs/create-a-login-page.mdx"
import AddLandingPageContent from "/snippets/quickstart/webapp/nextjs/add-the-landing-page-content.mdx"

export const sections = [
  { id: "configuration-d-auth0", title: "Configuration d’Auth0" },
  { id: "installer-la-trousse-sdk-next-js-auth0", title: "Installer la trousse SDK Next.js Auth0" },
  { id: "configuration-de-la-trousse-sdk", title: "Configuration de la trousse SDK" },
  { id: "ajouter-le-gestionnaire-de-route-dynamique", title: "Ajouter le gestionnaire de route dynamique" },
  { id: "ajouter-le-composant-userprovider", title: "Ajouter le composant UserProvider" },
  { id: "ajouter-une-connexion-à-votre-application", title: "Ajouter une connexion à votre application" },
  { id: "ajouter-une-fonctionnalité-de-déconnexion-à-votre-application", title: "Ajouter une fonctionnalité de déconnexion à votre application" }
]

<Recipe>
  <Content>
    Ce guide explique comment intégrer Auth0 à n’importe quelle application Next.js, nouvelle ou existante, à l’aide de la trousse SDK Next.js Auth0. Nous vous recommandons de vous connecter pour suivre ce guide de démarrage rapide avec les exemples configurés pour votre compte.

      <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Pour utiliser les services Auth0, vous devez avoir une application installée dans Auth0 Dashboard. L’application Auth0 est l’endroit où vous allez configurer le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet avec lequel vous souhaitez effectuer l’intégration. Dans Auth0, chaque application se voit attribuer un identifiant client unique alphanumérique que votre code d’application utilisera pour appeler les API Auth0 via la trousse SDK.

      Tous les paramètres que vous configurez à l’aide de ce guide rapide seront automatiquement mis à jour pour votre application dans le [Tableau de bord](https://manage.auth0.com/#/), qui est l’endroit où vous pourrez gérer vos applications à l’avenir.

      Si vous préférez explorer une configuration complète, consultez plutôt un exemple d’application.

      ### Configuration des URL de rappel

      Une URL de rappel est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas redirigés vers votre application après s’être connectés.

      <Info>
      Si vous suivez notre projet à titre d’exemple, définissez ceci sur `http://localhost:3000/api/auth/callback`.
      </Info>

      ### Configuration des URL de déconnexion

      Une URL de déconnexion est une URL intégrée dans votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront un message d’erreur.

      <Info>
      Si vous suivez notre projet à titre d’exemple, définissez ceci sur `http://localhost:3000`.
      </Info>
      </Section>

      <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Exécutez la commande suivante dans le répertoire de votre projet pour installer la trousse SDK Next.js Auth0 :

      `npm install @auth0/nextjs-auth0`

      La trousse SDK expose des méthodes et des variables qui vous aident à intégrer Auth0 à votre application Next.js en utilisant les [gestionnaires de route](https://nextjs.org/docs/app/building-your-application/routing/route-handlers) sur le système dorsal et le [contexte React](https://reactjs.org/docs/context.html) avec les [Crochets React](https://reactjs.org/docs/hooks-overview.html) sur le système frontal.
      </Section>

      <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Dans le répertoire racine de votre projet, ajoutez le fichier `.env.local` avec les [variables d’environnement](https://nextjs.org/docs/basic-features/environment-variables) suivantes :

      - `AUTH0_SECRET` : valeur secrète longue utilisée pour chiffrer le témoin de session. Vous pouvez générer une chaîne appropriée en utilisant `openssl rand -hex 32` sur la ligne de commande.
      - `AUTH0_BASE_URL` : URL de base de votre application.
      - `AUTH0_ISSUER_BASE_URL` : URL de votre domaine de locataire Auth0. Si vous utilisez un [domaine personnalisé avec Auth0](https://auth0.com/docs/custom-domains), utilisez la valeur de votre domaine personnalisé au lieu de la valeur indiquée dans l’onglet Settings (Paramètres).
      - `AUTH0_CLIENT_ID` : identifiant client de votre application Auth0.
      - `AUTH0_CLIENT_SECRET` : secret client de votre application Auth0.

      La trousse SDK lira ces valeurs à partir de l’environnement du processus Node.js et se configurera automatiquement.
      </Section>

      <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      <Info>
      Ce guide rapide s’adresse au [routeur d’application](https://nextjs.org/docs/app) Next.js. Si vous utilisez le [routeur Pages](https://nextjs.org/docs/pages), consultez l’exemple dans le [README](https://github.com/auth0/nextjs-auth0#page-router) de la trousse SDK.
      </Info>

      Créez un fichier dans `app/api/auth/[auth0]/route.js`. Il s’agit de votre fichier Route Handler (Gestionnaire de route) avec un [Dynamic Route Segment (Segment de route dynamique)](https://nextjs.org/docs/app/building-your-application/routing/route-handlers#dynamic-route-segments).

      Ensuite, importez la méthode `handleAuth` de la trousse SDK et appelez-la à partir de l’exportation `GET`. Cette opération crée les routes suivantes :

      - `/api/auth/login` : la route utilisée pour se connecter avec Auth0.
      - `/api/auth/logout` : la route utilisée pour déconnecter l’utilisateur.
      - `/api/auth/callback` : la route vers laquelle Auth0 redirigera l’utilisateur après une connexion réussie.
      - `/api/auth/me` : la route à partir de laquelle le profil utilisateur doit être récupéré.
      </Section>

      <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      Côté frontal, la trousse SDK utilise React Context pour gérer l’état d’authentification de vos utilisateurs. Pour que cet état soit accessible à toutes vos pages, vous devez remplacer le [Root Layout component (composant Disposition racine)](https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#root-layout-required) et envelopper la balise `<body>` avec un `UserProvider` dans le fichier `app/layout.jsx`.

      L’état d’authentification exposé par `UserProvider` est accessible dans n’importe quel composant client à l’aide de l’appel `useUser()`.

      <Note>
      ##### Point de contrôle
      Maintenant que vous avez ajouté le gestionnaire de route et `UserProvider`, exécutez votre application pour vérifier qu’elle ne génère pas d’erreurs liées à Auth0.
      </Note>
      </Section>

      <Section id={sections[5].id} title={sections[5].title} stepNumber="6">
      Les utilisateurs peuvent désormais se connecter à votre application en visitant Gestionnaire de route `/api/auth/login` fourni par la trousse SDK. Ajoutez un lien qui pointe vers la route de connexion à l’aide d’une **balise d’ancrage**. En cliquant sur ce lien, vos utilisateurs seront redirigés vers la page de connexion universelle Auth0, où Auth0 pourra les authentifier. Une fois l’authentification réussie, Auth0 redirigera vos utilisateurs vers votre application.

      <Info>
      Les prochaines règles de liaison pourraient suggérer d’utiliser le composant `Link` au lieu d’une balise d’ancrage. Le composant `Link` est destiné à effectuer des [transitions côté client entre les pages](https://nextjs.org/docs/api-reference/next/link). Comme le lien pointe vers une route API et non vers une page, vous devez le conserver en tant que balise d’ancrage.
      </Info>

      <Note>
      ##### Point de contrôle
      Ajoutez le lien de connexion à votre application.
      - Lorsque vous cliquez dessus, vérifiez que votre application Next.js vous redirige vers la page [Connexion universelle Auth0](https://auth0.com/universal-login) et que vous pouvez maintenant vous connecter ou vous inscrire en utilisant un nom d’utilisateur et un mot de passe ou un fournisseur social.
      - Une fois l’opération terminée, vérifiez qu’Auth0 vous redirige vers votre application.
      </Note>

      <Frame>![null](/docs/images/fr-ca/cdy7uua7fh8z/7L6lZ6xCi1L7sJBFZUPb9g/215ad0b724c138290b0b217edb5ddf96/Login_Screen_-_French.png)</Frame>

      <Info>
      Auth0 active le fournisseur social Google par défaut sur les nouveaux locataires et vous offre des clés de développeur pour tester la connexion avec des [fournisseurs d’identité sociale](https://auth0.com/docs/connections/identity-providers-social). Toutefois, ces clés de développeur présentent certaines limitations qui peuvent entraîner un comportement différent de votre application. Pour plus de détails sur ce comportement et comment le résoudre, consultez le document [Tester les connexions sociales avec des clés de développeur Auth0](https://auth0.com/docs/connections/social/devkeys#limitations-of-developer-keys).
      </Info>
      </Section>

      <Section id={sections[6].id} title={sections[6].title} stepNumber="7">
      Maintenant que vous pouvez vous connecter à votre application Next.js, vous avez besoin [d’un moyen de vous déconnecter](https://auth0.com/docs/logout/log-users-out-of-auth0). Ajoutez un lien qui pointe vers la route API `/api/auth/logout`. En cliquant dessus, vous redirigez vos utilisateurs vers votre [point de terminaison de déconnexion Auth0](https://auth0.com/docs/api/authentication?javascript#logout) (`https://YOUR_DOMAIN/v2/logout`), puis vous les redirigez immédiatement vers votre application.

      <Note>
      ##### Point de contrôle
      Lancez votre application.
      - Vérifiez que votre application Next.js vous redirige vers la page de [connexion universelle Auth0](https://auth0.com/universal-login) et que vous pouvez désormais vous connecter ou vous inscrire à l’aide d’un nom d’utilisateur et d’un mot de passe ou d’un fournisseur de réseau social.
      - Une fois cette opération terminée, vérifiez qu’Auth0 effectue une redirection vers votre application.
      </Note>
      </Section>

    ## Étapes suivantes

    Beau travail! Si vous en êtes arrivé là, vous devriez avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Cela conclut notre tutoriel de démarrage rapide, mais il y a tellement plus à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    *   [Auth0 Dashboard](https://manage.auth0.com/#) : apprenez à configurer et gérer votre locataire et vos applications Auth0
    *   [Trousse SDK nextjs-auth0](https://github.com/auth0/nextjs-auth0/) : explorez en détail la trousse SDK utilisée dans ce tutoriel
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) : découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  <SideMenu sections={sections}>
      <SideMenuSectionItem id={sections[0].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[1].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[2].id}>
        <AuthCodeGroup>
          <ConfigureSDK/>
          <CreateAuth0SDKClient/>
          <CreateLoginPage/>
          <AddLandingPageContent/>
        </AuthCodeGroup>
      </SideMenuSectionItem>  

      <SideMenuSectionItem id={sections[3].id}>
        <AuthCodeGroup>
          <CreateAuth0SDKClient/>
          <ConfigureSDK/>
          <CreateLoginPage/>
          <AddLandingPageContent/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[4].id}>
        <AuthCodeGroup>
          <CreateLoginPage/>
          <ConfigureSDK/>
          <CreateAuth0SDKClient/>
          <AddLandingPageContent/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[5].id}>
        <AuthCodeGroup>
          <AddLandingPageContent/>
          <ConfigureSDK/>
          <CreateAuth0SDKClient/>
          <CreateLoginPage/>
        </AuthCodeGroup>
      </SideMenuSectionItem>

      <SideMenuSectionItem id={sections[6].id}>
        <SignUpForm lang="fr"/>
      </SideMenuSectionItem>
    </SideMenu>
</Recipe>
