---
og:description: Learn how to use variables in Forms for Actions.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 変数とヘルパー関数
og:url: https://auth0.com/docs/
permalink: variables
title: 変数とヘルパー関数
twitter:description: Learn how to use variables in Forms for Actions.
twitter:title: 変数とヘルパー関数
---

変数を使用すると、フォームとフローに含まれるデータにアクセスして、カスタムビジネスロジックと自動化を作成できます。

変数を使用する際の基本的な考慮事項は次のとおりです。

* 変数は中括弧`{{ variable }}`で囲みます。
* 変数が存在しないか解決できない場合は、`未定義`の変数と同じ効果があります。
* `null`または`未定義`の変数を処理するには、nullish演算子を使用できます。例:`{{fields.foo ?? fields.bar}}`。

## 利用できる変数

フォームとフローを使用して顧客から収集したデータを参照および変換するには、さまざまな種類の変数を使用できます。

<table class="table"><thead>
<tr>
<th><strong>Variable</strong></th>
<th><strong>Syntax</strong></th>
<th><strong>Where</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Context</td>
<td>
`{{context.*}}`
</td>
<td>Forms / Flows</td>
<td>Reference context data of the current transaction</td>
</tr>
<tr>
<td>Form fields</td>
<td>
`{{fields.*}}`
</td>
<td>Forms / Flows</td>
<td>Reference data from your form fields and hidden fields</td>
</tr>
<tr>
<td>Shared variables</td>
<td>
`{{vars.*}}`
</td>
<td>Forms / Flows</td>
<td>Reference data stored as shared variables</td>
</tr>
<tr>
<td>Flow actions output</td>
<td>
`{{actions.*}}`
</td>
<td>Flows</td>
<td>Reference data from the output response of previous flow actions</td>
</tr>
<tr>
<td>Helper functions</td>
<td>
`{{functions.*}}`
</td>
<td>Forms / Flows</td>
<td>Helper functions to transform data</td>
</tr>
</tbody>
</table>

### コンテキスト変数

フォームとフローは、現在のトランザクションからコンテキスト変数を自動的に継承します。次のコンテキスト変数にアクセスできます。

* `user`オブジェクト。以下に挙げたプロパティにアクセスできます。

  + `user.user_id`
  + `user.username`
  + `user.name`
  + `user.given_name`
  + `user.family_name`
  + `user.nickname`
  + `user.email`
  + `user.email_verified`
  + `user.phone_number`
  + `user.phone_verified`
  + `user.picture`
  + `user.user_metadata`
  + `user.app_metadata`
  + `user.created_at`
  + `user.updated_at`
  + `user.last_password_reset`
  + `user.identities`
* 次のプロパティにアクセスできる`組織`オブジェクト。

  + `organization.id`
  + `organization.name`
  + `organization.display_name`
  + `organization.metadata`
* 次のプロパティにアクセスできる`クライアント`オブジェクト。

  + `client.client_id`
  + `client.name`
* 次のプロパティにアクセスできる`テナント`オブジェクト。

  + `tenant.name`
* 次のプロパティにアクセスできる`トランザクション`オブジェクト。

  + `transaction.state`



<Accordion title="Example of context object">

```json lines expandable
{
  "user": {
    "user_id": "auth0|658409...",
    "name": "ana@travel0.com",
    "nickname": "ana",
    "email": "ana@travel0.com",
    "email_verified": true,
    "picture": "https://s.gravatar.com/avatar/8eb1b522f6...",
    "user_metadata": {},
    "app_metadata": {},
    "created_at": "2023-12-21T09:46:40.487Z",
    "updated_at": "2024-05-07T10:44:26.271Z",
    "last_password_reset": "2023-12-21T09:49:08.932Z",
    "identities": [
      {
        "user_id": "6584...",
        "isSocial": false,
        "provider": "auth0",
        "connection": "Username-Password-Authentication"
      }
    ]
  },
  "client": {
    "client_id": "xpeg5...",
    "name": "My App"
  },
  "tenant": {
    "name": "tenant-testing"
  },
  "transaction": {
    "state": "hKFo2SBId2M0..."
  }
}
```






</Accordion>



例：  `{{context.user.user_id}}`は、`ユーザー`オブジェクトの`user_id`を参照します。

<Frame>![Dashboard > Forms > Flows](/images/cdy7uua7fh8z/3B8DRhXO2wGqeqSFb8KbQv/0a61cdbbb7f1d290950a2ddb9857aac3/Contex-variable.png)</Frame>

### フォームフィールド変数

フィールド変数には、フォームの入力フィールドからユーザーから収集されたデータと、非表示フィールドのデータが含まれます。各フィールドのデータは、フィールドタイプによって異なります。例：`{{fields.first_name`}}は、IDが`first_name`のフィールドの入力値を参照します。

<Frame>![Dashboard > Actions > Forms > Form](/images/cdy7uua7fh8z/4D42A6ww4XvFxweoxh04Rd/016c2ed9d25bc2267ed3ed31bf8b2bf6/form-fields-variable.png)</Frame>

### フロー出力アクション変数

フローアクションが実行されると、後続のアクションで参照できる出力オブジェクト応答が生成されます。例：`{{actions.generate_otp.code}}`は、IDが`generate_otp`のアクションの出力コードを参照します。

<Frame>![Dashboard > Actions > Forms > Flows](/images/cdy7uua7fh8z/6jYtEdYqSGXm3DDv0mxQ0o/2d48012629745e07137bf6ba42f4d829/flow-output-variable.png)</Frame>

### 共有変数

後続のフローと共有する変数、または同じトランザクション内のフォームコンポーネントと共有する変数を保存できます。共有変数は一時的なものであり、特定のフォームジャーニーに関連付けられています。その値には、そのジャーニーの外部からはアクセスできません。例：`{{vars.external_id}}`は、IDが`external_id`の共有変数の値を参照します。

<Frame>![Dashboard > Actions > Forms > Flows](/images/cdy7uua7fh8z/4571ExRTHL0KZKJKX9pNwj/abb631b8608a6356b0e5b3784cf8b02f/flow-shared-variable.png)</Frame>

<Warning>

Shared variables:

* are internal (server-side) and not exposed to the browser (client-side).
* can be resolved and exposed to the browser if you referenced a shared variable in the form component.
* might have sensitive information, so take care when you access shared variable to avoid any unnecessary or unintentional exposure.

</Warning>

### ヘルパー関数

ヘルパー関数 let you transform data and perform simple operations. For example: `{{functions.toString(fields.privacy_policies)}}` transform the value of the field with ID `privacy_policies` using the `toString()` function.

<Frame>![Dashboard > Actions > Forms > Flows](/images/cdy7uua7fh8z/1gyox33XJEtdkT43NppblT/0e878cc5ae2bde11b4207e105bbac6c5/flow-helper-functions.png)</Frame>

使用可能なヘルパー関数は次のとおりです。

<table class="table"><thead>
<tr>
<th><strong>Function</strong></th>
<th><strong>Description</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toArray(value)</code></td>
<td>Converts value to an array.</td>
<td>
`{{ functions.toArray('abc') }} // ['abc']`
</td>
</tr>
<tr>
<td><code>toBoolean(value)</code></td>
<td>Converts value to a boolean value.</td>
<td>
`{{ functions.toBoolean(1) }} // true&lt;br /&gt;&lt;br /&gt;\{\{ functions.toBoolean(0) }} // false`
</td>
</tr>
<tr>
<td><code>length(value)</code></td>
<td>Returns the length of the parameter value.</td>
<td>
`{{ functions.length('auth0') }} // 5`
</td>
</tr>
<tr>
<td><code>mask(value)</code></td>
<td>Masks a value to avoid be exposed in Executions.</td>
<td>
`{{ functions.mask('my_awesome_secret') }} // ███`
</td>
</tr>
<tr>
<td><code>toNumber(value)</code></td>
<td>Converts value to a number.</td>
<td>
`{{ functions.toNumber('123') }} // 123`
</td>
</tr>
<tr>
<td><code>random(min, max, [boolean])</code></td>
<td>Returns a random number between the inclusive min and max.</td>
<td>
`{{ functions.random(0, 6) }} // 4 &lt;br /&gt;&lt;br /&gt;\{\{ functions.random(0, 6, true) }} // 3.8523497...`
</td>
</tr>
<tr>
<td><code>slice(value, start, end)</code></td>
<td>Returns a section of a value array or string between the start and end indexes.</td>
<td>
`{{ functions.slice( 'example', 3, 5) }} // 'mp'`
</td>
</tr>
<tr>
<td><code>toString(value)</code></td>
<td>Converts value to a string.</td>
<td>
`{{ functions.toString(123) }} // '123'`
</td>
</tr>
<tr>
<td><code>substring(value, start, end)</code></td>
<td>Returns a section of a value between the start and end indexes. Read about the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring#differences_between_substring_and_slice">differences of slice and substring functions</a></td>
<td>
`{{ functions.substring( 'example’', 3, 5) }} // 'mp'`
</td>
</tr>
<tr>
<td><code>toTimestamp()</code></td>
<td>Returns the current UNIX timestamp.</td>
<td>
`{{ functions.toTimestamp() }} // 1628761483`
</td>
</tr>
<tr>
<td><code>toTimestamp(date)</code></td>
<td>Returns the provided date in UNIX time.</td>
<td>
`{{ functions.toTimestamp('2021-04-30T10:02:50.876Z') }} // 1619776970`
</td>
</tr>
<tr>
<td><code>toTimestamp(date)</code></td>
<td>Returns the provided date in UNIX time.</td>
<td>
`{{ functions.toTimestamp('2021-04-30T10:02:50.876Z') }} // 1619776970`
</td>
</tr>
<tr>
<td><code>replaceAll(value, string, replacement)</code></td>
<td>Returns a new string with all matches of a pattern replaced by a replacement.</td>
<td>
`{{ functions.replaceAll('2021-04-30', '-', '/') }} // 2021/04/30`
</td>
</tr>
<tr>
<td><code>replace(value, string, replacement)</code></td>
<td>Returns a new string with all matches of a pattern replaced by a replacement. If pattern is a string, only the first occurence will be replaced.</td>
<td>
`{{ functions.replace('2021-04-30', '-', '/') }} // 2021/04-30`
</td>
</tr>
<tr>
<td><code>split(value, separator, limit?)</code></td>
<td>Returns an ordered list of substrings divided by the separator.</td>
<td>
`{{ functions.split('2021-04-30', '-') }} // ['2021', '04', '30']`
</td>
</tr>
<tr>
<td><code>now()</code></td>
<td>Returns the current date in ISO 8601 format.</td>
<td>
`{{ functions.now() }} // 2021-04-30T10:31:28.576Z`
</td>
</tr>
<tr>
<td><code>includes(collection, item, fromIndex?)</code></td>
<td>Returns whether an array includes a certain value among its entries.</td>
<td>
`{{ functions.includes(['auth0', 'identity', 'authentication'], 'identity') }} // true`
</td>
</tr>
<tr>
<td><code>indexOf(collection, item, fromIndex?)</code></td>
<td>Returns the first index at which a given element can be found in the array, or -1 if it is not present.</td>
<td>
`{{ functions.indexOf(['auth0', 'identity', 'authentication'], 'identity') }} // 1`
</td>
</tr>
<tr>
<td><code>merge(base, value)</code></td>
<td>Returns a merged array, object or concatenates a string depending on the base data type.</td>
<td>
`{{ functions.merge(['auth0', 'identity'], ['authentication']) }} // ['auth0', 'identity', 'authentication']`
</td>
</tr>
<tr>
<td><code>md5(value)</code></td>
<td>Returns a MD5 hashed value.</td>
<td>
`{{ functions.md5('auth0') }} // 7bbb597...`
</td>
</tr>
<tr>
<td><code>sha1(value)</code></td>
<td>Returns a SHA1 hashed value.</td>
<td>
`{{ functions.sha1('auth0') }} // b4ec5339...`
</td>
</tr>
<tr>
<td><code>sha256(value)</code></td>
<td>Returns a SHA256 hashed value.</td>
<td>
`{{ functions.sha256('auth0') }} // d9082bdc...`
</td>
</tr>
<tr>
<td><code>sha512(value)</code></td>
<td>Returns a SHA512 hashed value.</td>
<td>
`{{ functions.sha512('auth0') }} // c0d588069d...`
</td>
</tr>
<tr>
<td><code>uuid()</code></td>
<td>Returns a random v4 UUID.</td>
<td>
`{{ functions.uuid() }} // 36b8f84d-df4e-4d49-b662-bcde71a8764`
</td>
</tr>
</tbody>
</table>

## 変数のベストプラクティス

### 意味のあるIDを使用する

フォームフィールドまたはフローアクションを追加すると、IDが自動的に生成されます。

IDをよりわかりやすい値に更新して、含まれる情報を識別できるようにします。たとえば、ユーザーの名を保存するフォームフィールドを作成する場合は、IDを`first_name`に更新します。

### 既存のIDを更新するときは注意してください

変数がすでに使用されており、IDを変更する必要がある場合は、参照した場所を特定し、それに応じてIDを更新して、未定義または空の値にならないようにします。

### フロー実行を確認する

If you see an unexpected variable value, use the [**Executions**](/docs/customize/forms/flows/flow-execution-and-debugger) view to troubleshoot the variable.

### オートコンプリートメニューを使用する

オートコンプリートメニューを使用すると、既存の変数を見つけて適切に参照できます。

<Frame>![Dashboard > Actions > Forms > Flows](/images/cdy7uua7fh8z/3SKnDuaMzSImxZtDDAoZaz/9ea800fad29ef71d1ded3c72b87660a4/Autocomplete-flows.png)</Frame><Frame>![Dashboard > Actions > Forms > Form](/images/cdy7uua7fh8z/2kjRKozVgrd2a7UJXOANaN/ee5452d7210cd2f13b0e97763f11c82a/Autocomplete-forms.png)</Frame>